<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="google-site-verification"
    content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI"
  />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <meta name="description" content="cody1991的博客" />
  <meta name="keywords" content="cody1991, blog" />
  <meta name="theme-color" content="#000000" />

  <!-- Open Graph -->
  <meta
    property="og:title"
    content="TypeScript Tutorial 中文版 - cody1991的博客 | cody1991 Blog"
  />
  
  <meta property="og:type" content="article" />
  <meta
    property="og:description"
    content="Section 0. 前言
"
  />
   <meta property="article:published_time" content="2021-08-04T00:00:00Z">   
  <meta property="article:tag" content="TypeScript" />
   
  <meta property="og:image" content="https://cody1991.github.io/Blogimg/cody1991.jpeg" />
  <meta property="og:url" content="https://cody1991.github.io/Blog/2021/08/04/typescript-tutorial/" />
  <meta property="og:site_name" content="cody1991的博客 | cody1991 Blog" />

  <title>
    TypeScript Tutorial 中文版 - cody1991的博客 | cody1991 Blog
  </title>

  <!-- Web App Manifest -->
  <link rel="manifest" href="/Blog/pwa/manifest.json" />

  <!-- Favicon -->
  <link rel="shortcut icon" href="/Blog/img/favicon.ico" />

  <!-- Canonical URL -->
  <link
    rel="canonical"
    href="https://cody1991.github.io/Blog/Blog/2021/08/04/typescript-tutorial/"
  />

  <!-- Bootstrap Core CSS -->
  <link
    rel="stylesheet"
    href="//cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.3.2/css/bootstrap.min.css"
  />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/Blog/css/hux-blog.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/Blog/css/codytang-blog.css">

  <!-- Custom Fonts -->
  <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
  <!-- Hux change font-awesome CDN to qiniu -->
  <link
    href="//cdn.bootcdn.net/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css"
    rel="stylesheet"
    type="text/css"
  />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- ga & ba script hoook -->
  <script></script>

  <script>
    (function () {
      var src = '//cdn.jsdelivr.net/npm/eruda';
      if (
        !/eruda=true/.test(window.location) &&
        localStorage.getItem('active-eruda') != 'true'
      )
        return;
      document.write('<scr' + 'ipt src="' + src + '"></scr' + 'ipt>');
      document.write('<scr' + 'ipt>eruda.init();</scr' + 'ipt>');
    })();
  </script>
</head>


  <!-- hack iOS CSS :active style -->
  <body ontouchstart="">
    <!-- Navigation -->

    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/Blog/">cody1991</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div id="huxblog_navbar">
                <div class="navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="/Blog/">Home</a>
                        </li>
                        
                        
                        
                        
                        <li>
                            <a href="/Blog/about/">About</a>
                        </li>
                        
                        
                        
                        <li>
                            <a href="/Blog/archive/">Archive</a>
                        </li>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <li class="search-icon">
                            <a href="javascript:void(0)">
                                <i class="fa fa-search"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <script>
        // Drop Bootstarp low-performance Navbar
        // Use customize navbar with high-quality material design animation
        // in high-perf jank-free CSS3 implementation
        var $body = document.body;
        var $toggle = document.querySelector('.navbar-toggle');
        var $navbar = document.querySelector('#huxblog_navbar');
        var $collapse = document.querySelector('.navbar-collapse');

        var __HuxNav__ = {
            close: function () {
                $navbar.className = " ";
                // wait until animation end.
                setTimeout(function () {
                    // prevent frequently toggle
                    if ($navbar.className.indexOf('in') < 0) {
                        $collapse.style.height = "0px"
                    }
                }, 400)
            },
            open: function () {
                $collapse.style.height = "auto"
                $navbar.className += " in";
            }
        }

        // Bind Event
        $toggle.addEventListener('click', function (e) {
            if ($navbar.className.indexOf('in') > 0) {
                __HuxNav__.close()
            } else {
                __HuxNav__.open()
            }
        })

        /**
         * Since Fastclick is used to delegate 'touchstart' globally
         * to hack 300ms delay in iOS by performing a fake 'click',
         * Using 'e.stopPropagation' to stop 'touchstart' event from 
         * $toggle/$collapse will break global delegation.
         * 
         * Instead, we use a 'e.target' filter to prevent handler
         * added to document close HuxNav.  
         *
         * Also, we use 'click' instead of 'touchstart' as compromise
         */
        document.addEventListener('click', function (e) {
            if (e.target == $toggle) return;
            if (e.target.className == 'icon-bar') return;
            __HuxNav__.close();
        })
    </script> <!-- Search -->
<div class="search-page">
  <div class="search-icon-close-container">
    <span class="search-icon-close">
      <i class="fa fa-chevron-down"></i>
    </span>
  </div>
  <div class="search-main container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <form></form>
        <input type="text" id="search-input" placeholder="$ grep...">
        </form>
        <div id="search-results" class="mini-post-list"></div>
      </div>
    </div>
  </div>
</div> <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/Blog/img/home-bg.jpg" width="0" height="0"> -->

<!-- Post Header -->



<style type="text/css">
    header.intro-header{
        position: relative;
        background-image: url('/Blog/img/home-bg.jpg');
        background: ;
    }

    
</style>

<header class="intro-header" >

    <div class="header-mask"></div>
    
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/Blog/archive/?tag=TypeScript" title="TypeScript">TypeScript</a>
                        
                    </div>
                    <h1>TypeScript Tutorial 中文版</h1>
                    
                    <h2 class="subheading"></h2>
                    <span class="meta">Posted by cody1991 on August 4, 2021</span>
                </div>
            </div>
        </div>
    </div>
</header>






<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container"
      >
        <!-- Multi-Lingual -->
         <h1 id="section-0-前言">Section 0. 前言</h1>

<h2 id="typescript-教程">TypeScript 教程</h2>

<p><a href="https://www.typescripttutorial.net/">原文地址</a></p>

<p>TypeScript 是带有类型系统的 JavaScript 语言，TypeScript 通过给 JavaScript 添加类型，可以在 JavaScript 代码运行前就捕获到不少的错误提示，从而提升开发效率。</p>

<p>TypeScript 是建立在 JavaScript 语言之上的开源编程语言。TypeScript 适用于任何浏览器，任何操作系统和任何环境，只要是 JavaScript 能够正常运行的地方。</p>

<p>在本 TypeScript 教程中，你将学习以下内容：</p>

<ul>
  <li>和原生 JavaScript 比较， TypeScript 有哪些优势；</li>
  <li>知道 TypeScript 的真正含义，以及它背后的运行原理；</li>
  <li>使用 TypeScript 丰富的语言特性，例如类型，类，接口，模块等等。</li>
</ul>

<h3 id="要求">要求</h3>

<p>为了更好的学习本教程，你需要具备以下条件：</p>

<ul>
  <li>JavaScript 语言基础知识，如果你想学习 JavaScript 语言，前往查看 <a href="https://zh.javascript.info/">现代 JavaScript 教程</a>；</li>
  <li>具备 ECMAScript 2015 或者 ES6 的相关知识。</li>
</ul>

<h3 id="注意">注意</h3>

<p>教程中指向 JavaScript 相关知识的网站 <a href="https://www.javascripttutorial.net/">JavaScript Tutorial</a> 发现无法打开，于是把它们调整指向 <a href="https://zh.javascript.info/">现代 JavaScript 教程</a> 相似内容的地址。</p>

<p>另外推荐阮一峰的 <a href="https://es6.ruanyifeng.com/">ES6 入门教程</a>。</p>

<h3 id="译者留言">译者留言</h3>

<p>本教程的翻译并不都是直译的，有些翻译后感觉不太通顺的地方会进行微调。</p>

<p>由于水平有限，翻译不好的地方欢迎指出。</p>

<p>非常感谢您的阅读，您可以通过微信赞赏码，表示支持：</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/20210604/zsm.6t3ys61st900.jpeg" alt="微信赞赏码" /></p>

<h1 id="section-1-入门">Section 1. 入门</h1>

<h2 id="简介">简介</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/what-is-typescript/">原文地址</a></p>

<p>在本教程中，你将知道 TypeScript 是什么，以及 TypeScript 对比原生 JavaScript 具备哪些优势。</p>

<h3 id="typescript-介绍">TypeScript 介绍</h3>

<p>TypeScript 是 JavaScript 的超集，它是建立在 JavaScript 之上的一门编程语言。</p>

<p>通过使用 TypeScript 编译器可以把你编写的 TypeScript 代码编译成原生 JavaScript 代码，一旦得到这些原生 JavaScript 代码，你可以把它们部署到任何 JavaScript 可以正常运行的环境中。</p>

<p>JavaScript 文件使用的扩展名是 <code class="language-plaintext highlighter-rouge">.js</code> ，而 TypeScript 文件使用的扩展名是 <code class="language-plaintext highlighter-rouge">.ts</code>。</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/what-is-typescript-compiler.51en2uo6cgo0.png" alt="what-is-typescript-compiler" /></p>

<p>TypeScript 在 JavaScript 语法的基础上，增加了用来支持类型系统的新语法。如果你有一段没有任何语法错误的 JavaScript 程序，那它也是一段 TypeScript 程序，这意味着所有的 JavaScript 程序都是 TypeScript 程序。基于上述原因，把现有的基于 JavaScript 的代码库重构成基于 TypeScript 的代码库会是一件非常容易的事。</p>

<p>下图展示了 TypeScript 和 JavaScript 之间的关系：</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/what-is-typescript-typescript-and-js.zaozekhm5bk.png" alt="what-is-typescript-typescript-and-js" /></p>

<h3 id="为什么选择-typescript">为什么选择 TypeScript</h3>

<p>TypeScript 主要的目标如下：</p>

<ul>
  <li>向 JavaScript 中注入可选类型；</li>
  <li>实现了未来的 JavaScript 计划添加的特性（未来的 JavaScript 指的是 ECMAScript Next 或者 ES Next）。</li>
</ul>

<h4 id="1-typescript-帮你避免一些-bug达到提升工作效率的目的">1) TypeScript 帮你避免一些 Bug，达到提升工作效率的目的</h4>

<p>类型系统可以帮你避免很多的错误，达到提升工作效率的目的，原因在于使用类型系统的时候，你可以在编译阶段提前捕获到一些 Bug，而不是等到运行时才发现这些问题。</p>

<p>下面的函数将两个数字 x 和 y 进行相加：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果你通过 HTML 的 Input 元素获取到 x 和 y 的值，把它们传递给上述函数，你可能会得到意料之外的结果：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">add</span><span class="p">(</span><span class="nx">input1</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="nx">input2</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span> <span class="c1">// result of concatenating strings</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>假设用户输入了 <code class="language-plaintext highlighter-rouge">10</code> 和 <code class="language-plaintext highlighter-rouge">20</code>， <code class="language-plaintext highlighter-rouge">add()</code> 函数会返回 <code class="language-plaintext highlighter-rouge">1020</code>，而不是期望的 <code class="language-plaintext highlighter-rouge">30</code>。产生这种情况的原因是 <code class="language-plaintext highlighter-rouge">input1.value</code> 和 <code class="language-plaintext highlighter-rouge">input2.value</code> 的类型是字符串，而非数字。当你使用操作符 <code class="language-plaintext highlighter-rouge">+</code> 将两个字符串相加的时候，操作符 <code class="language-plaintext highlighter-rouge">+</code> 会把两个字符串连接成一个单独的字符串。</p>

<p>如下所示，当你使用 TypeScript 显式指定参数的类型的时候：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">y</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个函数中，我们给参数增加了数字类型，<code class="language-plaintext highlighter-rouge">add()</code> 函数只能接收数字类型的参数，无法接收其他任何类型的参数，当你调用它的时候：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">add</span><span class="p">(</span><span class="nx">input1</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="nx">input2</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>当想通过 TypeScript 编译器把上面的代码编译成 JavaScript 的时候，TypeScript 编译器会抛出一个错误提示，需要你去进行修改。因此，你可以避免这个错误发生在运行阶段。</p>

<h4 id="2-typescript-把未来的-javascript-带到了今天">2) TypeScript 把未来的 JavaScript 带到了今天</h4>

<p>TypeScript 给如今的 JavaScript 引擎提供了 ES Next 即将推出的新特性的支持，这意味着你可以在 Web 浏览器（或者其他环境）完全支持这些新特性之前使用它们。</p>

<p>每一年，TC39 都会为 ECMAScript(JavaScript 标准) 发布几个新特性，功能提案一般经历下面五个阶段：</p>

<ul>
  <li>第 0 阶段：最初的想法；</li>
  <li>第 1 阶段：提案；</li>
  <li>第 2 阶段：草稿；</li>
  <li>第 3 阶段：候选；</li>
  <li>第 4 阶段：完成。</li>
</ul>

<p>TypeScript 通常能支持还在第 3 阶段的特性。</p>

<blockquote>
  <p>关于功能提案可以参考下面这篇文章 <a href="https://nitayneeman.com/posts/introducing-all-stages-of-the-tc39-process-in-ecmascript/">ECMAScript - Introducing All Stages of the TC39 Process</a>。</p>
</blockquote>

<h2 id="环境搭建">环境搭建</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/setup-typescript/">原文地址</a></p>

<p>在本教程中，你会学习 TypeScript 本地开发环境的搭建。</p>

<p>安装下面的工具来开始你的 TypeScript 语言编程之旅：</p>

<ul>
  <li>Node.js – Node.js 是运行 TypeScript 编译器的环境，注意不一定要了解 Node.js；</li>
  <li>TypeScript 编译器 – 一个把 TypeScript 代码编译成 JavaScript 代码的 Node.js 模块。如果你是在 Node.js 环境中使用 JavaScript，你可以安装 <code class="language-plaintext highlighter-rouge">ts-node</code> 模块，它是 Node.js 下的 TypeScript 执行引擎与交互式解释器；</li>
  <li>Visual Studio Code – 它是一个支持 TypeScript 语言的代码编辑器，非常推荐使用它，当然你可以使用你自己喜欢的编辑器。</li>
</ul>

<p>如果你是使用 Visual Studio Code 编辑器的话，可以安装下面的插件来提升你的开发效率：</p>

<ul>
  <li>Live Server – 允许启动本地开发服务器进行开发，它带有热更新等特性。</li>
</ul>

<h3 id="安装-nodejs">安装 Node.js</h3>

<p>按照下面的步骤来安装 Node.js</p>

<ul>
  <li>打开 <a href="https://nodejs.org/en/download/">Node.js 下载页面</a>；</li>
  <li>下载与你操作系统（例如 Windows, macOS 或者 Linux 系统）兼容的 Node.js 版本；</li>
  <li>运行下载回来的 Node.js 包或者可执行文件，后续的安装过程非常简单；</li>
  <li>在 macOS 或 Linux 中打开终端，或者在 Windows 上打开命令行工具，输入命令 <code class="language-plaintext highlighter-rouge">node -v</code> 验证安装是否成功，如果看到的版本号和你刚下载的一致，那么 Node.js 成功安装在你的电脑上了。</li>
</ul>

<h3 id="安装-typescript-编译器">安装 TypeScript 编译器</h3>

<p>安装 TypeScript 编译器，你需要在 macOS 或 Linux 上打开终端，或者在 Windows 上打开命令行工具，输入以下命令：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">-g</span> typescript
</pre></td></tr></tbody></table></code></pre></div></div>

<p>安装完以后，你可以输入下面的命令查看当前 TypeScript 编译器的版本：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>tsc <span class="nt">--v</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它会返回 TypeScript 编译器的版本号，如下所示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>Version 4.0.2
</pre></td></tr></tbody></table></code></pre></div></div>

<p>注意你可能看到比这里展示的更新的版本。</p>

<p>如果你在 Windows 系统上看到下面的错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="s1">'tsc'</span> is not recognized as an internal or external <span class="nb">command</span>,
operable program or batch file.
</pre></td></tr></tbody></table></code></pre></div></div>

<p>你需要把下面这个路径 <code class="language-plaintext highlighter-rouge">C:\Users\&lt;user&gt;\AppData\Roaming\npm</code> 添加到 <code class="language-plaintext highlighter-rouge">PATH</code> 变量中，注意你需要把路径中的 <code class="language-plaintext highlighter-rouge">&lt;user&gt;</code> 换成你自己 Windows 系统上的用户名。</p>

<p>你可以在 macOS 或 Linux 的终端或者 Windows 的命令行工具中，运行下面的命令来全局安装 <code class="language-plaintext highlighter-rouge">ts-node</code> 模块：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">-g</span> ts-node
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="安装-visual-studio-code">安装 Visual Studio Code</h3>

<p>你可以按照下面的步骤来安装 Visual Studio Code</p>

<ul>
  <li>打开 <a href="https://code.visualstudio.com/download">Visual Studio Code 下载页面</a>；</li>
  <li>选择最新的且和你操作系统（Windows, macOS, 或者 Linux）兼容的 Visual Studio Code 版本进行下载；</li>
  <li>执行下载好的安装包或者安装程序文件来启动安装向导，安装过程非常简单；</li>
  <li>启动 Visual Studio Code。</li>
</ul>

<p>你会看到如下所示的 Visual Studio Code 代码编辑器：</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/vs-code.1glyyl4c1pxc.png" alt="vs-code" /></p>

<p>按照下面的步骤来安装 Live Server 扩展插件：</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/Live-Server.4m2ngu7cnii0.png" alt="Live-Server" /></p>

<ul>
  <li>点击扩展插件选项卡，将展示 Visual Studio Code 的扩展插件列表；</li>
  <li>输入 Live Server 查找 Live Server 扩展插件；</li>
  <li>点击 <code class="language-plaintext highlighter-rouge">Install</code> 进行安装。</li>
</ul>

<h2 id="hello-world">Hello World</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-hello-world/">原文地址</a></p>

<p>在本教程中，你会学习如何使用 TypeScript 开发一个 Hello World 程序。</p>

<h3 id="nodejs-环境下的-typescript-hello-world-程序">Node.js 环境下的 TypeScript Hello World 程序</h3>

<p>第一，创建一个存放代码的文件夹，比如 <code class="language-plaintext highlighter-rouge">helloword</code> 文件夹。</p>

<p>第二，启动 Visual Studio Code ，打开上面创建的文件夹。</p>

<p>第三，创建一个名为 <code class="language-plaintext highlighter-rouge">app.ts</code> 的 TypeScript 文件，TypeScript 文件的扩展名是 <code class="language-plaintext highlighter-rouge">.ts</code>。</p>

<p>第四，在 <code class="language-plaintext highlighter-rouge">app.ts</code> 文件中输入以下代码：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hello, World!</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>第五，使用快捷键 <code class="language-plaintext highlighter-rouge">Ctrl+</code> 或者菜单 <code class="language-plaintext highlighter-rouge">Terminal &gt; New Terminal</code>，在 Visual Studio Code 中启动命令行工具：</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/TypeScript-Hello-World-Launch-Terminal.1lqe6wc1s140.png" alt="TypeScript-Hello-World-Launch-Terminal" /></p>

<p>第六，在命令行工具中输入下面的命令来编译 <code class="language-plaintext highlighter-rouge">app.ts</code> 文件：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>tsc app.ts
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/TypeScript-Hello-World-compile-TS-file.k21w3y1dri8.png" alt="TypeScript-Hello-World-compile-TS-file" /></p>

<p>如果一切正常，你会看到 TypeScript 编译器生成了一个名为 <code class="language-plaintext highlighter-rouge">app.js</code> 的新文件：</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/TypeScript-Hello-World-Output-file.noimhwwiqa8.png" alt="TypeScript-Hello-World-Output-file" /></p>

<p>你可以在命令行工具中输入下面的命令来运行 <code class="language-plaintext highlighter-rouge">app.js</code> 文件：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>node app.js
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果你已经安装了在 <a href="https://cody1991.github.io/TypeScript-Tutorial/1-getting-started/2-setup-typescript.html">环境搭建</a> 中提到的 <code class="language-plaintext highlighter-rouge">ts-node</code> 模块，你只需要一个命令便可以实现编译 TypeScript 文件后运行输出的文件的目的：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>ts-node app.ts
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="web-浏览器下的-typescript-hello-world-程序">Web 浏览器下的 TypeScript Hello World 程序</h3>

<p>跟着下面的步骤来创建一个显示 <code class="language-plaintext highlighter-rouge">Hello, World!</code> 信息的网页。</p>

<p>首先, 创建一个名为 <code class="language-plaintext highlighter-rouge">index.html</code> 的文件，文件中引入了 <code class="language-plaintext highlighter-rouge">app.js</code> ，如下所示：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;title&gt;</span>TypeScript: Hello, World!<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"app.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>第二，把 <code class="language-plaintext highlighter-rouge">app.js</code> 中的代码改成如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hello, World!</span><span class="dl">'</span><span class="p">;</span>
<span class="c1">// create a new heading 1 element</span>
<span class="kd">let</span> <span class="nx">heading</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">h1</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">heading</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">message</span><span class="p">;</span>
<span class="c1">// add the heading the document</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">heading</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>第三，编译 <code class="language-plaintext highlighter-rouge">app.ts</code> 文件：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>tsc app.ts
</pre></td></tr></tbody></table></code></pre></div></div>

<p>第四，打开 Visual Studio Code 编辑器，鼠标右键 <code class="language-plaintext highlighter-rouge">index.html</code> 文件，选择 <code class="language-plaintext highlighter-rouge">Open with Live Server</code> 选项来打开 Live Server 服务：</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/TypeScript-Hello-World-Live-Server.4obe4i76xdo0.png" alt="TypeScript-Hello-World-Live-Server" /></p>

<p>Live Server 会打开 <code class="language-plaintext highlighter-rouge">index.html</code> 文件，显示下面的信息：</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/TypeScript-Hello-World-Web-Browser.ptpo86xpvnk.png" alt="TypeScript-Hello-World-Web-Browser" /></p>

<p>你可以编辑 <code class="language-plaintext highlighter-rouge">app.ts</code> 文件来做出一些改变，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hello, TypeScript!</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">heading</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">h1</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">heading</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">message</span><span class="p">;</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">heading</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>然后编译 <code class="language-plaintext highlighter-rouge">app.ts</code> 文件：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>tsc app.ts
</pre></td></tr></tbody></table></code></pre></div></div>

<p>TypeScript 编译器会生成新的 <code class="language-plaintext highlighter-rouge">app.js</code> 文件，Live Server 会通知 Web 浏览器重新加载新的 <code class="language-plaintext highlighter-rouge">app.js</code> 文件。</p>

<p>注意 <code class="language-plaintext highlighter-rouge">app.js</code> 文件是 <code class="language-plaintext highlighter-rouge">app.ts</code> 文件编译产生的文件，你不应该直接修改 <code class="language-plaintext highlighter-rouge">app.js</code> 里面的代码，否则在重新编译 <code class="language-plaintext highlighter-rouge">app.ts</code> 文件后，之前在 <code class="language-plaintext highlighter-rouge">app.js</code> 中修改的代码会被覆盖。</p>

<h2 id="使用原因">使用原因</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/why-typescript/">原文地址</a></p>

<p>在本教程中，你将学习如何使用 TypeScript 来避免一些由 JavaScript 中的动态类型引发的问题。</p>

<h3 id="为什么使用-typescript">为什么使用 TypeScript</h3>

<p>下面罗列了使用 TypeScript 的主要原因：</p>

<ul>
  <li>TypeScript 增加类型系统来避免一些由 JavaScript 中的动态类型引发的问题；</li>
  <li>TypeScript 实现了很多 JavaScript 的未来特性，也就是 <a href="https://zh.javascript.info/">ES Next</a> 中的新特性，使得我们现在就可以使用它们。</li>
</ul>

<p>本教程将聚焦在第一个原因上。</p>

<h3 id="理解-javascript-中的动态类型">理解 JavaScript 中的动态类型</h3>

<p>JavaScript 是一门动态类型语言，与其他的比如 <code class="language-plaintext highlighter-rouge">Java</code> 或者 <code class="language-plaintext highlighter-rouge">C#</code> 这些静态语言不同，值具有类型而不是变量，比如：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="dl">'</span><span class="s1">Hello</span><span class="dl">'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>对于这个值，你可以说它的类型是 <code class="language-plaintext highlighter-rouge">string</code>，又比如下面的值是一个数字：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="mi">2020</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>看看下面的例子：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">box</span><span class="p">;</span>
<span class="nx">box</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">box</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">box</code> 变量的类型随着赋值给它的值的类型改变而改变。</p>

<p>你可以使用 <code class="language-plaintext highlighter-rouge">typeof</code> 操作符来找出 <code class="language-plaintext highlighter-rouge">box</code> 变量的类型：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">box</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">box</span><span class="p">);</span> <span class="c1">// undefined</span>

<span class="nx">box</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hello</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">box</span><span class="p">);</span> <span class="c1">// string</span>

<span class="nx">box</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">box</span><span class="p">);</span> <span class="c1">// number</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，第一条语句定义了一个变量但是没有进行赋值，它的类型是 <code class="language-plaintext highlighter-rouge">undefined</code>。</p>

<p>接下来，我们将 <code class="language-plaintext highlighter-rouge">"Hello"</code> 赋值给 <code class="language-plaintext highlighter-rouge">box</code> 变量并打印出它的类型，这个时候 <code class="language-plaintext highlighter-rouge">box</code> 变量的类型变成了 <code class="language-plaintext highlighter-rouge">string</code> 类型。</p>

<p>最后，我们将 <code class="language-plaintext highlighter-rouge">100</code> 赋值给 <code class="language-plaintext highlighter-rouge">box</code> 变量，这个时候，<code class="language-plaintext highlighter-rouge">box</code> 变量的类型变成了 <code class="language-plaintext highlighter-rouge">number</code> 类型。</p>

<p>正如你所见的，每当给变量赋值的时候，它的类型可能会发生变化。你不需要显式地告诉 JavaScript 变量的类型是什么，JavaScript 会自动根据值来出推断它的类型是什么。</p>

<p>动态类型具有灵活性，但它也引发了一些问题。</p>

<h4 id="动态类型引发的问题">动态类型引发的问题</h4>

<p>假设你有一个函数，它会根据 <code class="language-plaintext highlighter-rouge">id</code> 来返回一个 <code class="language-plaintext highlighter-rouge">product</code> 对象：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">getProduct</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="nx">id</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span> <span class="s2">`Awesome Gadget </span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
    <span class="na">price</span><span class="p">:</span> <span class="mf">99.5</span><span class="p">,</span>
  <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面的例子调用 <code class="language-plaintext highlighter-rouge">getProduct()</code> 函数查找 <code class="language-plaintext highlighter-rouge">id</code> 为 <code class="language-plaintext highlighter-rouge">1</code> 的产品信息，并显示出来：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">product</span> <span class="o">=</span> <span class="nx">getProduct</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`The product </span><span class="p">${</span><span class="nx">product</span><span class="p">.</span><span class="nx">Name</span><span class="p">}</span><span class="s2"> costs $</span><span class="p">${</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出内容是：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>The product undefined costs <span class="nv">$99</span>.5
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这与我们期望的结果不一致，这段代码的问题是 <code class="language-plaintext highlighter-rouge">product</code> 对象没有 <code class="language-plaintext highlighter-rouge">Name</code> 属性，它只有首字母为小写 <code class="language-plaintext highlighter-rouge">n</code> 的 <code class="language-plaintext highlighter-rouge">name</code> 属性，然而你只有在运行这段脚本的时候才能发现这个问题。引用对象上不存在的属性是编写 JavaScript 代码工作中常见的问题。</p>

<p>下面的例子定义了一个新的函数，它会在命令行工具中输出产品的信息：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">showProduct</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">price</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`The product </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2"> costs </span><span class="p">${</span><span class="nx">price</span><span class="p">}</span><span class="s2">$.`</span><span class="p">);</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面例子调用了 <code class="language-plaintext highlighter-rouge">getProduct()</code> 和 <code class="language-plaintext highlighter-rouge">showProduct()</code> 函数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">product</span> <span class="o">=</span> <span class="nx">getProduct</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nx">showProduct</span><span class="p">(</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">,</span> <span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出内容是：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>The product 99.5 costs <span class="nv">$Awesome</span> Gadget 1
</pre></td></tr></tbody></table></code></pre></div></div>

<p>我们以错误的顺序传递参数给 <code class="language-plaintext highlighter-rouge">showProduct()</code> 函数，这是在编写 JavaScript 代码的时候常见的另外一个问题。</p>

<p>使用 TypeScript 来解决这些问题，是我们引入 TypeScript 的重要原因。</p>

<h3 id="typescript-如何解决这些动态类型引发的问题">Typescript 如何解决这些动态类型引发的问题</h3>

<p>解决引用对象上不存在的属性的问题，你可以按照下面的步骤来进行：</p>

<p>第一，我们使用 <a href="https://cody1991.github.io/TypeScript-Tutorial/6-interfaces/1-interface.html">接口</a> 定义 <code class="language-plaintext highlighter-rouge">product</code> 对象的 “形状”，注意你会在后面的教程中 <a href="https://cody1991.github.io/TypeScript-Tutorial/6-interfaces/1-interface.html">学习接口的相关知识</a></p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">Product</span> <span class="p">{</span>
  <span class="nl">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">price</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>第二，显式使用 <code class="language-plaintext highlighter-rouge">Product</code> 类型作为 <code class="language-plaintext highlighter-rouge">getProduct()</code> 函数的返回类型：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">getProduct</span><span class="p">(</span><span class="nx">id</span><span class="p">):</span> <span class="nx">Product</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="nx">id</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span> <span class="s2">`Awesome Gadget </span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
    <span class="na">price</span><span class="p">:</span> <span class="mf">99.5</span><span class="p">,</span>
  <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>当你引用了一个对象上不存在的属性的时候，代码编辑器会马上告知你这个信息，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">product</span> <span class="o">=</span> <span class="nx">getProduct</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`The product </span><span class="p">${</span><span class="nx">product</span><span class="p">.</span><span class="nx">Name</span><span class="p">}</span><span class="s2"> costs $</span><span class="p">${</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>代码编辑器会在 <code class="language-plaintext highlighter-rouge">Name</code> 属性下高亮显式下面的错误提示：</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/why-typescript-error.5wcnv14y4240.png" alt="why-typescript-error" /></p>

<p>当你把鼠标悬停在这个错误提示上的时候，可以看到解决这个错误的方法：</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/why-typescript-hint.60w42juytao0.png" alt="why-typescript-hint" /></p>

<p>为了解决由于以错误的顺序传递参数引发的问题，你可以显式地给函数的参数指定类型：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">showProduct</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">price</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`The product </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2"> costs </span><span class="p">${</span><span class="nx">price</span><span class="p">}</span><span class="s2">$.`</span><span class="p">);</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>当你传递错误类型的参数给 <code class="language-plaintext highlighter-rouge">showProduct()</code> 函数的时候，你会收到一个错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">product</span> <span class="o">=</span> <span class="nx">getProduct</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nx">showProduct</span><span class="p">(</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">,</span> <span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/why-typescript-error-in-function-arguments.6rj9183357s0.png" alt="why-typescript-error-in-function-arguments" /></p>

<h3 id="小结">小结</h3>

<ul>
  <li>JavaScript 是一门动态类型语言，它具有灵活性，但是引发了不少问题；</li>
  <li>TypeScript 在 JavaScript 之上增加了可选类型系统解决这些问题。</li>
</ul>

<h1 id="section-2-基本类型">Section 2. 基本类型</h1>

<h2 id="类型">类型</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-types/">原文地址</a></p>

<p>在本教程中，你将了解 TypeScript 中的类型和它的用途。</p>

<h3 id="typescript-中的类型是什么">TypeScript 中的类型是什么</h3>

<p>在 TypeScript 中，类型可以方便地描述一个值拥有的属性和方法，值是任何可以赋值给变量的东西，比如数字，字符串，数组，对象或者函数。</p>

<p>看看下面的值：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="s1">'Hello'</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>当你看这个值的时候，你会说它是一个字符串，这个值拥有字符串所拥有的属性和方法。比如 <code class="language-plaintext highlighter-rouge">'Hello'</code> 值有一个名为 <code class="language-plaintext highlighter-rouge">length</code> 的属性，它返回字符串拥有的字符数量：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello</span><span class="dl">'</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span> <span class="c1">// 5</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它也有很多的方法，比如 <code class="language-plaintext highlighter-rouge">match()</code>， <code class="language-plaintext highlighter-rouge">indexOf()</code> 和 <code class="language-plaintext highlighter-rouge">toLocaleUpperCase()</code>，例如：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello</span><span class="dl">'</span><span class="p">.</span><span class="nx">toLocaleUpperCase</span><span class="p">());</span> <span class="c1">// HELLO</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>观察 <code class="language-plaintext highlighter-rouge">'Hello'</code> 值的时候，通过罗列出它所有的属性和方法的方式来描述它是非常不便的，而通过类型来描述一个值将是一个更加简单有效的方式。</p>

<p>在这个例子中，指出 <code class="language-plaintext highlighter-rouge">'Hello'</code> 是一个字符串，从而也知道可以在 <code class="language-plaintext highlighter-rouge">'Hello'</code> 值上使用字符串所拥有的所有属性和方法。</p>

<p>总之，在 TypeScript 中：</p>

<ul>
  <li>类型是描述值所具有的属性和方法的标签；</li>
  <li>每个值都有一种类型。</li>
</ul>

<h3 id="typescript-中的类型">TypeScript 中的类型</h3>

<p>TypeScript 继承了 JavaScript 的内置类型，TypeScript 中的类型可分为：</p>

<ul>
  <li>原始类型</li>
  <li>对象类型</li>
</ul>

<h4 id="原始类型">原始类型</h4>

<p>下面列出了 TypeScript 中的原始类型：</p>

<table>
  <thead>
    <tr>
      <th>名字</th>
      <th>描述</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/3-string.html">字符串</a></td>
      <td>表示文本类型数据</td>
    </tr>
    <tr>
      <td><a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/2-number.html">数字</a></td>
      <td>表示数值</td>
    </tr>
    <tr>
      <td><a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/4-boolean.html">布尔值</a></td>
      <td>有 <code class="language-plaintext highlighter-rouge">true</code> 值和 <code class="language-plaintext highlighter-rouge">false</code> 值</td>
    </tr>
    <tr>
      <td>null</td>
      <td>有一个值：null</td>
    </tr>
    <tr>
      <td>undefined</td>
      <td>有一个值：undefined，它是未初始化变量的默认值</td>
    </tr>
    <tr>
      <td>symbol</td>
      <td>表示唯一常量值</td>
    </tr>
  </tbody>
</table>

<h4 id="对象类型">对象类型</h4>

<p>对象类型包括函数，数组和类等，稍后你将学习如何创建自定义对象类型。</p>

<h3 id="typescript-中类型的作用">TypeScript 中类型的作用</h3>

<p>TypeScript 中类型的主要作用如下：</p>

<ul>
  <li>首先，TypeScript 编译器使用类型来分析代码中错误；</li>
  <li>其次，类型帮助你了解变量所关联的值是什么。</li>
</ul>

<h3 id="typescript-中类型示例">TypeScript 中类型示例</h3>

<p>下面的例子使用 <a href="https://zh.javascript.info/searching-elements-dom#querySelector">querySelector()</a> 方法来选出 <code class="language-plaintext highlighter-rouge">&lt;h1&gt;</code> 元素：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">heading</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">h1</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>TypeScript 编译器知道 <code class="language-plaintext highlighter-rouge">heading</code> 的类型是 <code class="language-plaintext highlighter-rouge">HTMLHeadingElement</code>：</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/TypeScript-types-example-1.4h001hujndw0.png" alt="TypeScript-types-example-1" /></p>

<p>下面列出了类型为 <code class="language-plaintext highlighter-rouge">HTMLHeadingElement</code> 的 <code class="language-plaintext highlighter-rouge">heading</code> 变量可以访问的属性和方法列表：</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/TypeScript-types-properties-and-methods.2izwvt0qmfa0.png" alt="TypeScript-types-properties-and-methods" /></p>

<p>如果你试图访问值上不存在的属性和方法时，TypeScript 编译器会显示错误提示，如下所示：</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/TypeScript-types-error.4c00bls39gw0.png" alt="TypeScript-types-error" /></p>

<h3 id="小结-1">小结</h3>

<ul>
  <li>TypeScript 中每个值都有一种类型；</li>
  <li>类型是描述值所具有的属性和方法的标签；</li>
  <li>TypeScript 编译器使用类型分析你的代码，找出其中存在的 bug 或者错误。</li>
</ul>

<h2 id="类型注释">类型注释</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-type-annotations/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的类型注释。</p>

<h3 id="typescript-中的类型注释是什么">TypeScript 中的类型注释是什么</h3>

<p>TypeScript 使用类型注释显式地为变量，函数和对象等标识符指定类型。TypeScript 中的类型注释语法是在标识符后面添加 <code class="language-plaintext highlighter-rouge">: type</code> 标识，其中 <code class="language-plaintext highlighter-rouge">type</code> 可以是任何有效的类型。一旦标识符被声明为某种类型，那它在使用的时候只能是那种类型，如果以其他类型来使用，TypeScript 编译器会抛出一个错误提示。</p>

<h3 id="变量和常量中的类型注释">变量和常量中的类型注释</h3>

<p>下面是给变量和常量指定类型注释的语法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">variableName</span><span class="p">:</span> <span class="kd">type</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">variableName</span><span class="p">:</span> <span class="kd">type</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">constantName</span><span class="p">:</span> <span class="kd">type</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个语法中，类型注释跟在变量或者常量名之后，前面是一个冒号 (<code class="language-plaintext highlighter-rouge">:</code>)。</p>

<p>下面例子中的变量使用了 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/2-number.html">数字</a> 类型注释：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">counter</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这之后，你只能给 <code class="language-plaintext highlighter-rouge">counter</code> 变量赋值一个数字：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">counter</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果你给变量 <code class="language-plaintext highlighter-rouge">counter</code> 赋值一个字符串，你会得到一个错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">counter</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
<span class="nx">counter</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hello</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// compile error</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>Type <span class="s1">'"Hello"'</span> is not assignable to <span class="nb">type</span> <span class="s1">'number'</span><span class="nb">.</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>可以在一条语句中给变量添加类型注释的同时进行变量初始化操作，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">counter</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这里例子中，我们给 <code class="language-plaintext highlighter-rouge">counter</code> 变量添加数字类型注释的时候把它初始化为 <code class="language-plaintext highlighter-rouge">1</code>。</p>

<p>下面是添加其他原始类型注释的例子：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">name</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">age</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">25</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">active</span><span class="p">:</span> <span class="nx">boolean</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中， 为 <code class="language-plaintext highlighter-rouge">name</code> 变量添加了 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/3-string.html">字符串</a> 类型注释，为 <code class="language-plaintext highlighter-rouge">age</code> 变量添加了 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/2-number.html">数字</a> 类型注释，为 <code class="language-plaintext highlighter-rouge">active</code> 变量添加了 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/4-boolean.html">布尔值</a> 类型注释</p>

<h3 id="类型注释例子">类型注释例子</h3>

<h4 id="数组">数组</h4>

<p>为 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/6-array-type.html">数组类型</a> 的变量添加类型注释，需要使用一个特定的类型：它的后面跟着一个方括号 <code class="language-plaintext highlighter-rouge">: type[] </code> 标识：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">arrayName</span><span class="p">:</span> <span class="kd">type</span><span class="p">[];</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>比如下面的例子声明了一个字符串数组：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">names</span><span class="p">:</span> <span class="kr">string</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Jane</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Peter</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">David</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Mary</span><span class="dl">'</span><span class="p">];</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="对象">对象</h4>

<p>为一个对象指定类型，使用对象类型注释，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">person</span><span class="p">:</span> <span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">age</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">age</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
<span class="p">};</span> <span class="c1">// 合法的</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">person</code> 对象只接受具有两个指定属性的对象：一个是类型为 <code class="language-plaintext highlighter-rouge">string</code> 名为 <code class="language-plaintext highlighter-rouge">name</code> 的属性，另外一个是类型为 <code class="language-plaintext highlighter-rouge">number</code> 名为 <code class="language-plaintext highlighter-rouge">age</code> 的属性。</p>

<h3 id="函数参数和返回类型">函数参数和返回类型</h3>

<p>下面展示了一个带有参数类型注释和返回类型注释的函数注释语法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">greeting</span><span class="p">:</span> <span class="p">(</span><span class="nx">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="kr">string</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这个例子中你可以给 <code class="language-plaintext highlighter-rouge">greeting</code> 赋值一个函数，这个函数带有一个类型为字符串的参数，并且它的返回类型也是字符串：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nx">greeting</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s2">`Hi </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面的例子由于分配给 <code class="language-plaintext highlighter-rouge">greeting</code> 变量的函数和它的 <a href="https://cody1991.github.io/TypeScript-Tutorial/4-functions/2-function-types.html">函数</a> 类型注释不匹配，会抛出一个错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nx">greeting</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello</span><span class="dl">'</span><span class="p">);</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>Type <span class="s1">'() =&gt; void'</span> is not assignable to <span class="nb">type</span> <span class="s1">'(name: string) =&gt; string'</span><span class="nb">.</span> Type <span class="s1">'void'</span> is not assignable to <span class="nb">type</span> <span class="s1">'string'</span><span class="nb">.</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-2">小结</h3>

<ul>
  <li>使用语法为 <code class="language-plaintext highlighter-rouge">: [type]</code> 的类型注释方式，显式地给一个变量，函数或者函数返回值指定类型。</li>
</ul>

<h2 id="类型推断">类型推断</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-type-inference/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的类型推断</p>

<p>类型推断描述的是当你没有为变量添加 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/1-type-annotations.html">类型注释</a> 的时候，TypeScript 是如何推断变量的类型的。</p>

<h3 id="类型推断基础">类型推断基础</h3>

<p>当你声明一个变量的时候，你可以使用 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/1-type-annotations.html">类型注释</a> 为变量指定某种类型，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">counter</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>当你把 <code class="language-plaintext highlighter-rouge">counter</code> 变量初始化一个数字的时候，TypeScript 会推断 <code class="language-plaintext highlighter-rouge">counter</code> 的类型为 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/2-number.html">数字类型</a>，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它和下面的语句是等价的：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">counter</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>同样的，当你给函数参数赋值的时候，TypeScript 将参数的类型推断为默认值的类型，比如：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">setCounter</span><span class="p">(</span><span class="nx">max</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，TypeScript 推断 <code class="language-plaintext highlighter-rouge">max</code> 参数的类型为 <code class="language-plaintext highlighter-rouge">number</code> 类型。类似地，TypeScript 推断下面 <code class="language-plaintext highlighter-rouge">increment()</code> 函数的返回值类型为 <code class="language-plaintext highlighter-rouge">number</code> 类型：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">increment</span><span class="p">(</span><span class="nx">counter</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">counter</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它和下面例子是等价的：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">increment</span><span class="p">(</span><span class="nx">counter</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">counter</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="最佳通用类型算法">最佳通用类型算法</h3>

<p>思考下面的语句：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="kc">null</span><span class="p">];</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>为了推断出 <code class="language-plaintext highlighter-rouge">items</code> 变量的类型，TypeScript 需要考虑数组中的每个元素的类型。TypeScript 使用最佳通用类型算法来分析每个候选类型，最终选择与所有候选类型都兼容的类型作为变量的类型。</p>

<p>在这个例子中，TypeScript 选择数字 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/6-array-type.html">数组类型</a> (<code class="language-plaintext highlighter-rouge">number[]</code>) 作为最佳通用类型。如果你往 <code class="language-plaintext highlighter-rouge">items</code> 数组中添加一个字符串，TypeScript 会把 <code class="language-plaintext highlighter-rouge">items</code> 变量的类型推断为数字与字符串组合的数组类型，即 <code class="language-plaintext highlighter-rouge">(number | string)[]</code>。</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Hi</span><span class="dl">'</span><span class="p">];</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>当 TypeScript 找不到最佳通用类型的时候，它会返回联合数组类型，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="dl">'</span><span class="s1">d+</span><span class="dl">'</span><span class="p">)];</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，TypeScript 推断 <code class="language-plaintext highlighter-rouge">arr</code> 变量的类型为 <code class="language-plaintext highlighter-rouge">(RegExp | Date)[]</code>。</p>

<h3 id="上下文类型">上下文类型</h3>

<p>TypeScript 可以使用位置上下文推断变量的类型，这种机制被称为上下文类型，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">button</span><span class="p">);</span> <span class="c1">//</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，由于 <code class="language-plaintext highlighter-rouge">event</code> 参数在 <code class="language-plaintext highlighter-rouge">click</code> 事件中，TypeScript 知道它是 <code class="language-plaintext highlighter-rouge">MouseEvent</code> 的一个实例。</p>

<p>然而，当你把 <code class="language-plaintext highlighter-rouge">click</code> 事件修改成 <code class="language-plaintext highlighter-rouge">scroll</code> 事件，TypeScript 会抛出一个错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">scroll</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">button</span><span class="p">);</span> <span class="c1">// compiler error</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>Property <span class="s1">'button'</span> does not exist on <span class="nb">type</span> <span class="s1">'Event'</span>.<span class="o">(</span>2339<span class="o">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>TypeScript 知道在这种情况下 <code class="language-plaintext highlighter-rouge">event</code> 不再是 <code class="language-plaintext highlighter-rouge">MouseEvent</code> 的实例，而是 <code class="language-plaintext highlighter-rouge">UIEvent</code> 的实例。而由于 <code class="language-plaintext highlighter-rouge">UIEvent</code> 没有 <code class="language-plaintext highlighter-rouge">button</code> 属性，访问 <code class="language-plaintext highlighter-rouge">MouseEvent</code> 实例的 <code class="language-plaintext highlighter-rouge">button</code> 属性的时候 TypeScript 会抛出了一个错误提示。</p>

<p>很多情况中可以找到上下文类型的踪影，比如函数调用的参数，类型断言，对象和数组的成员，返回语句和右侧赋值。</p>

<h3 id="类型推断-vs-类型注释">类型推断 vs 类型注释</h3>

<p>下面展示了类型推断和类型注释的区别：</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">类型推断</th>
      <th style="text-align: left">类型注释</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">TypeScript 会猜测变量的类型</td>
      <td style="text-align: left">明确告诉 TypeScript 变量的类型</td>
    </tr>
  </tbody>
</table>

<p>所以，应该在什么时候使用类型推断，什么时候使用类型注释？实际上，你应该尽可能的使用类型推断，只有在下面的几种情况中才去使用类型注释：</p>

<ul>
  <li>当声明一个变量但在后面才为它赋值的时候；</li>
  <li>当你希望一个变量的类型不能被推断的时候；</li>
  <li>当一个函数的返回类型是 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/9-any-type.html">any</a> 类型，而你需要明确知道它的类型的时候。</li>
</ul>

<h3 id="小结-3">小结</h3>

<ul>
  <li>类型推断发生在初始化变量的值，设置参数默认值和需要确定函数返回值类型的时候；</li>
  <li>TypeScript 使用最佳通用类型算法来选择与所有变量类型兼容的最佳候选类型；</li>
  <li>TypeScript 还根据变量的位置，使用上下文类型来推断变量的类型。</li>
</ul>

<h2 id="数字类型">数字类型</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-number/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的数字数据类型。</p>

<p>TypeScript 中的所有数字，要么是浮点数，那么是大整数，浮点数的类型是 <code class="language-plaintext highlighter-rouge">number</code> 而大数字的类型是 <code class="language-plaintext highlighter-rouge">bigint</code>。</p>

<h3 id="数字类型-1">数字类型</h3>

<p>下面的例子展示如果声明一个保存浮点数的变量：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">price</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>或者你可以将 <code class="language-plaintext highlighter-rouge">price</code> 变量初始化为一个数字：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">price</span> <span class="o">=</span> <span class="mf">9.95</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>和 JavaScript 一样，TypeScript 支持十进制，十六进制，二进制和八进制的数字字面量。</p>

<h4 id="十进制数字">十进制数字</h4>

<p>下面展示了一些十进制数字：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">counter</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">x</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
  <span class="nx">y</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="二进制数字">二进制数字</h4>

<p>二进制数字的形式为：一个前导 <code class="language-plaintext highlighter-rouge">0</code>，后面跟着一个小写或大写的字母 <code class="language-plaintext highlighter-rouge">B</code> 的形式，比如 <code class="language-plaintext highlighter-rouge">0b</code> 或 <code class="language-plaintext highlighter-rouge">0B</code>：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">bin</span> <span class="o">=</span> <span class="mb">0b100</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">anotherBin</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mb">0b010</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>注意在 <code class="language-plaintext highlighter-rouge">0b</code> 或 <code class="language-plaintext highlighter-rouge">0B</code> 后面必须是数字 <code class="language-plaintext highlighter-rouge">0</code> 或数字 <code class="language-plaintext highlighter-rouge">1</code>。</p>

<h4 id="八进制数字">八进制数字</h4>

<p>八进制数字的形式为：一个前导 <code class="language-plaintext highlighter-rouge">0</code>，后面跟着字母 <code class="language-plaintext highlighter-rouge">o</code>(自 ES2015 以来)，即 <code class="language-plaintext highlighter-rouge">0o</code> 的形式。在 <code class="language-plaintext highlighter-rouge">0o</code> 后面的数字的范围在数字 <code class="language-plaintext highlighter-rouge">0</code> 和数字 <code class="language-plaintext highlighter-rouge">7</code> 之间。</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">octal</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mo">0o10</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="十六进制数字">十六进制数字</h4>

<p>十六进制数字的形式为：一个前导 <code class="language-plaintext highlighter-rouge">0</code>，后面跟着一个小写或大写字母 <code class="language-plaintext highlighter-rouge">X</code> （<code class="language-plaintext highlighter-rouge">0x</code> 或 <code class="language-plaintext highlighter-rouge">0X</code>）的形式。在 <code class="language-plaintext highlighter-rouge">0x</code> 后面的数字的范围必须在 (<code class="language-plaintext highlighter-rouge">0123456789ABCDEF</code>) 之间，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">hexadecimal</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mh">0xa</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>JavaScript 有一个 <code class="language-plaintext highlighter-rouge">Number</code> 类型（注意是大写字母 <code class="language-plaintext highlighter-rouge">N</code>），该类型表示的是非原始，封装的对象类型，在 TypeScript 中尽可能不使用 <code class="language-plaintext highlighter-rouge">Number</code> 类型。</p>

<h3 id="大整数">大整数</h3>

<p>大整数表示大于 <code class="language-plaintext highlighter-rouge">2^53 – 1</code> 的所有整数，一个大整数的末尾带有一个 <code class="language-plaintext highlighter-rouge">n</code> 字符，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">big</span><span class="p">:</span> <span class="nx">bigint</span> <span class="o">=</span> <span class="mi">9007199254740991</span><span class="nx">n</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-4">小结</h3>

<ul>
  <li>TypeScript 中的所有数字，要么是 <code class="language-plaintext highlighter-rouge">number</code> 类型的浮点数，那么是 <code class="language-plaintext highlighter-rouge">bigint</code> 类型的大整数；</li>
  <li>尽可能避免使用 <code class="language-plaintext highlighter-rouge">Number</code> 类型。</li>
</ul>

<h2 id="字符串类型">字符串类型</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-string/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 字符串数据类型。</p>

<p>和 JavaScript 一样，在 TypeScript 中使用双引号 (<code class="language-plaintext highlighter-rouge">"</code>) 或者单引号 (<code class="language-plaintext highlighter-rouge">'</code>) 包裹字符串：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">title</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Web Developer</span><span class="dl">'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>TypeScript 也支持使用反引号 (`) 包裹字符的模板字符串语法，模板字符串允许你创建多行字符串，也提供了字符串插值特性。</p>

<p>下面例子展示如何使用反引号 (`) 来创建多行字符串：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">description</span> <span class="o">=</span> <span class="s2">`This TypeScript string can
span multiple
lines
`</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>字符串插值特性允许你将变量嵌入到字符串中，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="s2">`John`</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">title</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="s2">`Web Developer`</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">profile</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="s2">`I'm </span><span class="p">${</span><span class="nx">firstName</span><span class="p">}</span><span class="s2">.
I'm a </span><span class="p">${</span><span class="nx">title</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">profile</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>I<span class="s1">'m John.
I'</span>m a Web Developer.
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-5">小结</h3>

<ul>
  <li>在 TypeScript 中，所有的字符串都是 <code class="language-plaintext highlighter-rouge">string</code> 类型；</li>
  <li>和 JavaScript 一样，TypeScript 中使用双引号 (<code class="language-plaintext highlighter-rouge">"</code>)，单引号 (<code class="language-plaintext highlighter-rouge">'</code>) 或者反引号 (`) 包裹字符串。</li>
</ul>

<h2 id="布尔值类型">布尔值类型</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-boolean/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的布尔值数据类型。</p>

<p>TypeScript 中的 <code class="language-plaintext highlighter-rouge">boolean</code> 类型有两个值：<code class="language-plaintext highlighter-rouge">true</code> 和 <code class="language-plaintext highlighter-rouge">false</code>，它是 TypeScript 的原始类型之一，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">pending</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
<span class="nx">pending</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="c1">// after a while</span>
<span class="c1">// ..</span>
<span class="nx">pending</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>JavaScript 有表示非原始，封装的对象类型 <code class="language-plaintext highlighter-rouge">Boolean</code> 类型，<code class="language-plaintext highlighter-rouge">Boolean</code> 类型首字母为大写字符 <code class="language-plaintext highlighter-rouge">B</code>，和 <code class="language-plaintext highlighter-rouge">boolean</code> 类型是不一样的，我们尽可能不使用 <code class="language-plaintext highlighter-rouge">Boolean</code> 类型。</p>

<h2 id="对象类型-1">对象类型</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-object-type/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的对象数据类型，以及如何更加准地编写对象类型声明。</p>

<h3 id="typescript-中的对象类型介绍">TypeScript 中的对象类型介绍</h3>

<p>TypeScript 中的 <code class="language-plaintext highlighter-rouge">object</code> 类型代表所有不是原始类型的值，TypeScript 中原始类型有以下这些：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">number</code></li>
  <li><code class="language-plaintext highlighter-rouge">bigint</code></li>
  <li><code class="language-plaintext highlighter-rouge">string</code></li>
  <li><code class="language-plaintext highlighter-rouge">boolean</code></li>
  <li><code class="language-plaintext highlighter-rouge">null</code></li>
  <li><code class="language-plaintext highlighter-rouge">undefined</code></li>
  <li><code class="language-plaintext highlighter-rouge">symbol</code></li>
</ul>

<p>下面的例子展示了如何声明一个保存对象的变量：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">employee</span><span class="p">:</span> <span class="nx">object</span><span class="p">;</span>

<span class="nx">employee</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">age</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
  <span class="na">jobTitle</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Web Developer</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">employee</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="o">{</span>
  firstName: <span class="s1">'John'</span>,
  lastName: <span class="s1">'Doe'</span>,
  age: 25,
  jobTitle: <span class="s1">'Web Developer'</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果你给 <code class="language-plaintext highlighter-rouge">employee</code> 对象赋值一个原始类型的值，将得到一个错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">employee</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Jane</span><span class="dl">'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>error TS2322: Type <span class="s1">'"Jane"'</span> is not assignable to <span class="nb">type</span> <span class="s1">'object'</span><span class="nb">.</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">employee</code> 对象是一个具有固定属性列表的 <code class="language-plaintext highlighter-rouge">object</code> 类型，如果你尝试去访问 <code class="language-plaintext highlighter-rouge">employee</code> 对象中不存在的属性，将得到一个错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">employee</span><span class="p">.</span><span class="nx">hireDate</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>error TS2339: Property <span class="s1">'hireDate'</span> does not exist on <span class="nb">type</span> <span class="s1">'object'</span><span class="nb">.</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>注意：上面的语句在 JavaScript 中能正常地运行，它会返回 <code class="language-plaintext highlighter-rouge">undefined</code> 。</p>
</blockquote>

<p>要显式地指定 <code class="language-plaintext highlighter-rouge">employee</code> 对象的属性，首先使用下面的语法定义 <code class="language-plaintext highlighter-rouge">employee</code> 对象：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">employee</span><span class="p">:</span> <span class="p">{</span>
  <span class="nl">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">age</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">jobTitle</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>然后你给 <code class="language-plaintext highlighter-rouge">employee</code> 对象赋值一个具有上面所有属性的对象：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="nx">employee</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">age</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
  <span class="na">jobTitle</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Web Developer</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>也可以把两种语法组合在一个语句中，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">employee</span><span class="p">:</span> <span class="p">{</span>
  <span class="nl">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">age</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">jobTitle</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">age</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
  <span class="na">jobTitle</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Web Developer</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="object-vs-object">object vs Object</h3>

<p>TypeScript 有另外一种类型，叫做 <code class="language-plaintext highlighter-rouge">Object</code> 类型，它的字符 <code class="language-plaintext highlighter-rouge">O</code> 是大写的，理解它们之间的区别是非常有必要的。<code class="language-plaintext highlighter-rouge">object</code> 类型代表所有的非原始类型的值，而 <code class="language-plaintext highlighter-rouge">Object</code> 类型描述的是所有对象具有的功能。例如，<code class="language-plaintext highlighter-rouge">Object</code> 类型具有可以被任何对象访问的 <code class="language-plaintext highlighter-rouge">toString()</code> 和 <code class="language-plaintext highlighter-rouge">valueOf()</code> 方法。</p>

<h3 id="空类型-">空类型 {}</h3>

<p>TypeScript 有另外一个类型叫空类型，使用 <code class="language-plaintext highlighter-rouge">{}</code> 表示，它和 <code class="language-plaintext highlighter-rouge">object</code> 类型非常相似。空类型 <code class="language-plaintext highlighter-rouge">{}</code> 描述一个本身没有任何属性的对象，如果你尝试去访问这种类型的对象的某个属性，TypeScript 会发出一个编译时错误的提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">vacant</span><span class="p">:</span> <span class="p">{};</span>
<span class="nx">vacant</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>error TS2339: Property <span class="s1">'firstName'</span> does not exist on <span class="nb">type</span> <span class="s1">'{}'</span><span class="nb">.</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>但可以通过 <a href="https://zh.javascript.info/prototype-inheritance">原型链</a> 访问所有在 <code class="language-plaintext highlighter-rouge">Object</code> 类型上定义的属性和方法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">vacant</span><span class="p">:</span> <span class="p">{}</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">vacant</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="o">[</span>object Object]
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-6">小结</h3>

<ul>
  <li>TypeScript 中的 <code class="language-plaintext highlighter-rouge">object</code> 类型代表所有的非原始类型的值；</li>
  <li><code class="language-plaintext highlighter-rouge">Object</code> 类型描述所有对象具有的功能；</li>
  <li>空类型 <code class="language-plaintext highlighter-rouge">{}</code> 描述一个自身没有任何属性的对象。</li>
</ul>

<h2 id="数组类型">数组类型</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-array-type/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的数组类型，以及它的一些基本操作。</p>

<h3 id="typescript-中的数组类型介绍">TypeScript 中的数组类型介绍</h3>

<p>TypeScript 中的 <code class="language-plaintext highlighter-rouge">array</code> 是一个有序的数据列表，可以使用下面的语法来声明一个存储指定类型的值的数组：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">arrayName</span><span class="p">:</span> <span class="kd">type</span><span class="p">[];</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如下所示，声明了一个 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/3-string.html">字符串</a> 数组：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">skills</span><span class="p">:</span> <span class="kr">string</span><span class="p">[];</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>你可以通过下面的方式往数组中添加一个或多个字符串：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nx">skills</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Problem Solving</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">skills</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Programming</span><span class="dl">'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>也可以使用 <code class="language-plaintext highlighter-rouge">push()</code> 方法往数组中添加元素：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">skills</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="dl">'</span><span class="s1">Software Design</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面的例子中，声明并把一个字符串数组赋值给了 <code class="language-plaintext highlighter-rouge">skills</code> 变量：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">skills</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Problem Sovling</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Software Design</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Programming</span><span class="dl">'</span><span class="p">];</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，TypeScript <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/15-type-inference.html">推断</a> <code class="language-plaintext highlighter-rouge">skills</code> 数组是一个字符串数组，它相当于：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">skills</span><span class="p">:</span> <span class="kr">string</span><span class="p">[];</span>
<span class="nx">skills</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Problem Sovling</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Software Design</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Programming</span><span class="dl">'</span><span class="p">];</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>当给数组指定了类型，TypeScript 会阻止你向数组中添加不兼容的值，下面的例子会抛出一个错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">skills</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>因为我们尝试往字符串数组中添加一个数值。</p>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>Argument of <span class="nb">type</span> <span class="s1">'number'</span> is not assignable to parameter of <span class="nb">type</span> <span class="s1">'string'</span><span class="nb">.</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>当从一个数组中提取元素的时候，TypeScript 会执行 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/15-type-inference.html">类型推断</a> 的操作，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">skill</span> <span class="o">=</span> <span class="nx">skills</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">skill</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>string
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这个例子中，提取了 <code class="language-plaintext highlighter-rouge">skills</code> 数组中的第一个元素，把它赋值给了 <code class="language-plaintext highlighter-rouge">skill</code> 变量，由于字符串数组中的元素都是字符串，TypeScript 把 <code class="language-plaintext highlighter-rouge">skill</code> 变量的类型推断为字符串类型。</p>

<h3 id="typescript-中的数组的属性和方法">TypeScript 中的数组的属性和方法</h3>

<p>TypeScript 中的数组和 JavaScript 一样，可以访问 JavaScript 数组中的所有属性和方法，比如下面使用 <code class="language-plaintext highlighter-rouge">length</code> 属性来获取数组中元素的数量：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">series</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">series</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span> <span class="c1">// 3</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>也可以使用 JavaScript 中的数组的所有方法，比如 <code class="language-plaintext highlighter-rouge">forEach()</code>, <code class="language-plaintext highlighter-rouge">map()</code>, <code class="language-plaintext highlighter-rouge">reduce()</code> 和 <code class="language-plaintext highlighter-rouge">filter()</code>，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">series</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
<span class="kd">let</span> <span class="nx">doubleIt</span> <span class="o">=</span> <span class="nx">series</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">e</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">doubleIt</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="o">[</span> 2, 4, 6 <span class="o">]</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="存储混合类型的值">存储混合类型的值</h3>

<p>下面演示了如何声明一个同时存储字符串和数字的数组：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">scores</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Programming</span><span class="dl">'</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Software Design</span><span class="dl">'</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，TypeScript 把 <code class="language-plaintext highlighter-rouge">scores</code> 数组推断为 <code class="language-plaintext highlighter-rouge">(string | number)[]</code> 类型，它和下面的例子是等价的：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">scores</span><span class="p">:</span> <span class="p">(</span><span class="kr">string</span> <span class="o">|</span> <span class="kr">number</span><span class="p">)[];</span>
<span class="nx">scores</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Programming</span><span class="dl">'</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Software Design</span><span class="dl">'</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-7">小结</h3>

<ul>
  <li>在 TypeScript 中，数组是一个有序的数据列表，数组可以存储混合类型的值；</li>
  <li>声明指定类型的数组，你可以使用 <code class="language-plaintext highlighter-rouge">let arr: type[]</code> 这个语法。</li>
</ul>

<h2 id="元组类型">元组类型</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-tuple/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的元组类型，以及它的使用方法。</p>

<h3 id="typescript-中的元组类型介绍">TypeScript 中的元组类型介绍</h3>

<p>元组的工作机制和 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/6-array-type.html">数组类型</a> 类似，但有一些额外的条件限制：</p>

<ul>
  <li>元组中元素的数量是固定的；</li>
  <li>元素中元素的类型是已知的，并且它们不需要都相同。</li>
</ul>

<p>例如，可以用元组来表示一个由 <code class="language-plaintext highlighter-rouge">string</code> 和 <code class="language-plaintext highlighter-rouge">number</code> 类型组成的值：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">skill</span><span class="p">:</span> <span class="p">[</span><span class="kr">string</span><span class="p">,</span> <span class="kr">number</span><span class="p">];</span>
<span class="nx">skill</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Programming</span><span class="dl">'</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>元组中的值的顺序非常重要，如果把 <code class="language-plaintext highlighter-rouge">skill</code> 元组中值的顺序调整成 <code class="language-plaintext highlighter-rouge">[5, "Programming"]</code>，将会得到一个错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">skill</span><span class="p">:</span> <span class="p">[</span><span class="kr">string</span><span class="p">,</span> <span class="kr">number</span><span class="p">];</span>
<span class="nx">skill</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Programming</span><span class="dl">'</span><span class="p">];</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>error TS2322: Type <span class="s1">'string'</span> is not assignable to <span class="nb">type</span> <span class="s1">'number'</span><span class="nb">.</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>综上所述，对于有特定顺序且相互关联的数据，使用元组来存储它们是一个很好的实践方法。例如，可以使用一个元组来定义一个 <code class="language-plaintext highlighter-rouge">RGB</code> 颜色值，它总是以三个数字的形式出现：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="o">(</span>r,g,b<span class="o">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">color</span><span class="p">:</span> <span class="p">[</span><span class="kr">number</span><span class="p">,</span> <span class="kr">number</span><span class="p">,</span> <span class="kr">number</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">];</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">color[0]</code>, <code class="language-plaintext highlighter-rouge">color[1]</code> 和 <code class="language-plaintext highlighter-rouge">color[2]</code> 分别映射到 <code class="language-plaintext highlighter-rouge">Red</code>, <code class="language-plaintext highlighter-rouge">Green</code> 和 <code class="language-plaintext highlighter-rouge">Blue</code> 颜色值上。</p>

<h3 id="可选元组元素">可选元组元素</h3>

<p>从 TypeScript 3.0 开始，元组可以通过使用问号 <code class="language-plaintext highlighter-rouge">(?)</code> 后缀来指定可选元素。例如，可以使用可选的 <code class="language-plaintext highlighter-rouge">alpha</code> 通道值来定义一个 <code class="language-plaintext highlighter-rouge">RGBA</code> 元组：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">bgColor</span><span class="p">,</span> <span class="nx">headerColor</span><span class="p">:</span> <span class="p">[</span><span class="kr">number</span><span class="p">,</span> <span class="kr">number</span><span class="p">,</span> <span class="kr">number</span><span class="p">,</span> <span class="kr">number</span><span class="p">?];</span>
<span class="nx">bgColor</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">];</span>
<span class="nx">headerColor</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">];</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>注意：<code class="language-plaintext highlighter-rouge">RGBA</code> 使用 <code class="language-plaintext highlighter-rouge">red</code>, <code class="language-plaintext highlighter-rouge">green</code>, <code class="language-plaintext highlighter-rouge">blue</code> 和 <code class="language-plaintext highlighter-rouge">alpha</code> 模型定义颜色，<code class="language-plaintext highlighter-rouge">alpha</code> 指定颜色的透明度。</p>
</blockquote>

<h3 id="小结-8">小结</h3>

<ul>
  <li>元组是一个具有固定数量和已知元素类型的数组。</li>
</ul>

<h2 id="枚举类型">枚举类型</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-enum/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的枚举类型，以及如何更高效地使用它。</p>

<h3 id="什么是枚举">什么是枚举</h3>

<p>枚举是一些命名常量值的组合，<code class="language-plaintext highlighter-rouge">Enum</code> 代表枚举类型，按照下面的步骤来定义枚举：</p>

<ul>
  <li>首先，把变量名写在 <code class="language-plaintext highlighter-rouge">enum</code> 关键字之后；</li>
  <li>然后，定义枚举中的常量值。</li>
</ul>

<p>下面展示定义枚举的语法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kr">enum</span> <span class="nx">name</span> <span class="p">{</span><span class="nx">constant1</span><span class="p">,</span> <span class="nx">constant2</span><span class="p">,</span> <span class="p">...};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个语法中，<code class="language-plaintext highlighter-rouge">constant1</code> 和 <code class="language-plaintext highlighter-rouge">constant2</code> 等等被称为枚举的成员。</p>

<h3 id="typescript-中的枚举类型例子">TypeScript 中的枚举类型例子</h3>

<p>下面的例子创建一个表示一年中所有月份的枚举：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kr">enum</span> <span class="nx">Month</span> <span class="p">{</span>
  <span class="nx">Jan</span><span class="p">,</span>
  <span class="nx">Feb</span><span class="p">,</span>
  <span class="nx">Mar</span><span class="p">,</span>
  <span class="nx">Apr</span><span class="p">,</span>
  <span class="nx">May</span><span class="p">,</span>
  <span class="nx">Jun</span><span class="p">,</span>
  <span class="nx">Jul</span><span class="p">,</span>
  <span class="nx">Aug</span><span class="p">,</span>
  <span class="nx">Sep</span><span class="p">,</span>
  <span class="nx">Oct</span><span class="p">,</span>
  <span class="nx">Nov</span><span class="p">,</span>
  <span class="nx">Dec</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，枚举名为 <code class="language-plaintext highlighter-rouge">Month</code> ，它的常量值有 <code class="language-plaintext highlighter-rouge">Jan</code>, <code class="language-plaintext highlighter-rouge">Feb</code> 和 <code class="language-plaintext highlighter-rouge">Mar</code> 等等。</p>

<p>下面声明一个函数，它使用 <code class="language-plaintext highlighter-rouge">Month</code> 枚举类型作为参数 <code class="language-plaintext highlighter-rouge">month</code> 的类型：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">isItSummer</span><span class="p">(</span><span class="nx">month</span><span class="p">:</span> <span class="nx">Month</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">isSummer</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">month</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nx">Month</span><span class="p">.</span><span class="nx">Jun</span><span class="p">:</span>
    <span class="k">case</span> <span class="nx">Month</span><span class="p">.</span><span class="nx">Jul</span><span class="p">:</span>
    <span class="k">case</span> <span class="nx">Month</span><span class="p">.</span><span class="nx">Aug</span><span class="p">:</span>
      <span class="nx">isSummer</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="nl">default</span><span class="p">:</span>
      <span class="nx">isSummer</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">isSummer</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>可以这样调用这个函数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">isItSummer</span><span class="p">(</span><span class="nx">Month</span><span class="p">.</span><span class="nx">Jun</span><span class="p">));</span> <span class="c1">// true</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这个例子使用枚举中的常量值，比如 <code class="language-plaintext highlighter-rouge">Jan</code>, <code class="language-plaintext highlighter-rouge">Feb</code> 和 <code class="language-plaintext highlighter-rouge">Mar</code> 等等，而不是 <code class="language-plaintext highlighter-rouge">1</code>, <code class="language-plaintext highlighter-rouge">2</code> 和 <code class="language-plaintext highlighter-rouge">3</code> 等等这些值，使得代码更加清晰易懂。</p>

<h3 id="typescript-中的枚举是如何工作的">TypeScript 中的枚举是如何工作的</h3>

<p>在代码中使用枚举常量值是一个很好的实践方法。不过下面的例子把一个数字而不是枚举值传递给 <code class="language-plaintext highlighter-rouge">isItSummer()</code> 函数，它也能正常工作：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">isItSummer</span><span class="p">(</span><span class="mi">6</span><span class="p">));</span> <span class="c1">// true</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这个例子使用了一个数字 (<code class="language-plaintext highlighter-rouge">6</code>) 代替了 <code class="language-plaintext highlighter-rouge">Month</code> 中的枚举常量值，它也能正常工作。</p>

<p>检查下 <code class="language-plaintext highlighter-rouge">Month</code> 枚举生成的 Javascript 代码：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">Month</span><span class="p">;</span>
<span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">Month</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Month</span><span class="p">[(</span><span class="nx">Month</span><span class="p">[</span><span class="dl">'</span><span class="s1">Jan</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Jan</span><span class="dl">'</span><span class="p">;</span>
  <span class="nx">Month</span><span class="p">[(</span><span class="nx">Month</span><span class="p">[</span><span class="dl">'</span><span class="s1">Feb</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Feb</span><span class="dl">'</span><span class="p">;</span>
  <span class="nx">Month</span><span class="p">[(</span><span class="nx">Month</span><span class="p">[</span><span class="dl">'</span><span class="s1">Mar</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Mar</span><span class="dl">'</span><span class="p">;</span>
  <span class="nx">Month</span><span class="p">[(</span><span class="nx">Month</span><span class="p">[</span><span class="dl">'</span><span class="s1">Apr</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Apr</span><span class="dl">'</span><span class="p">;</span>
  <span class="nx">Month</span><span class="p">[(</span><span class="nx">Month</span><span class="p">[</span><span class="dl">'</span><span class="s1">May</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">May</span><span class="dl">'</span><span class="p">;</span>
  <span class="nx">Month</span><span class="p">[(</span><span class="nx">Month</span><span class="p">[</span><span class="dl">'</span><span class="s1">Jun</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Jun</span><span class="dl">'</span><span class="p">;</span>
  <span class="nx">Month</span><span class="p">[(</span><span class="nx">Month</span><span class="p">[</span><span class="dl">'</span><span class="s1">Jul</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span><span class="p">)]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Jul</span><span class="dl">'</span><span class="p">;</span>
  <span class="nx">Month</span><span class="p">[(</span><span class="nx">Month</span><span class="p">[</span><span class="dl">'</span><span class="s1">Aug</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span><span class="p">)]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Aug</span><span class="dl">'</span><span class="p">;</span>
  <span class="nx">Month</span><span class="p">[(</span><span class="nx">Month</span><span class="p">[</span><span class="dl">'</span><span class="s1">Sep</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span><span class="p">)]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Sep</span><span class="dl">'</span><span class="p">;</span>
  <span class="nx">Month</span><span class="p">[(</span><span class="nx">Month</span><span class="p">[</span><span class="dl">'</span><span class="s1">Oct</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9</span><span class="p">)]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Oct</span><span class="dl">'</span><span class="p">;</span>
  <span class="nx">Month</span><span class="p">[(</span><span class="nx">Month</span><span class="p">[</span><span class="dl">'</span><span class="s1">Nov</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Nov</span><span class="dl">'</span><span class="p">;</span>
  <span class="nx">Month</span><span class="p">[(</span><span class="nx">Month</span><span class="p">[</span><span class="dl">'</span><span class="s1">Dec</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">11</span><span class="p">)]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Dec</span><span class="dl">'</span><span class="p">;</span>
<span class="p">})(</span><span class="nx">Month</span> <span class="o">||</span> <span class="p">(</span><span class="nx">Month</span> <span class="o">=</span> <span class="p">{}));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>可以在控制台打印 <code class="language-plaintext highlighter-rouge">Month</code> 变量：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="rouge-code"><pre><span class="p">{</span>
  <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Jan</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Feb</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">2</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Mar</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">3</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Apr</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">4</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">May</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">5</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Jun</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">6</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Jul</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">7</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Aug</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">8</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Sep</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">9</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Oct</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">10</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Nov</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">11</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Dec</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">Jan</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">Feb</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">Mar</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="nx">Apr</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="nx">May</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
  <span class="nx">Jun</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="nx">Jul</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
  <span class="nx">Aug</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
  <span class="nx">Sep</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
  <span class="nx">Oct</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
  <span class="nx">Nov</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="nx">Dec</span><span class="p">:</span> <span class="mi">11</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>从输出中可以清楚地看到，TypeScript 枚举本质上是 JavaScript 中的对象，该对象在枚举中声明了命名属性，比如 <code class="language-plaintext highlighter-rouge">Jan</code> 是 <code class="language-plaintext highlighter-rouge">0</code>，而 <code class="language-plaintext highlighter-rouge">Feb</code> 是 <code class="language-plaintext highlighter-rouge">1</code>，也有数字键和表示命名常量的字符串值。这就是为什么你可以向接受枚举的函数传递一个数字的原因，换句话说，枚举成员既是数字也是已定义的常量值。</p>

<h3 id="指定枚举成员的数值">指定枚举成员的数值</h3>

<p>TypeScript 根据枚举定义中成员的出现顺序来定义枚举成员的数值，比如 <code class="language-plaintext highlighter-rouge">Jan</code> 是 <code class="language-plaintext highlighter-rouge">0</code> 而 <code class="language-plaintext highlighter-rouge">Feb</code> 是 <code class="language-plaintext highlighter-rouge">1</code> 等等。</p>

<p>可以显式地为枚举成员指定数值，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kr">enum</span> <span class="nx">Month</span> <span class="p">{</span>
  <span class="nx">Jan</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">Feb</span><span class="p">,</span>
  <span class="nx">Mar</span><span class="p">,</span>
  <span class="nx">Apr</span><span class="p">,</span>
  <span class="nx">May</span><span class="p">,</span>
  <span class="nx">Jun</span><span class="p">,</span>
  <span class="nx">Jul</span><span class="p">,</span>
  <span class="nx">Aug</span><span class="p">,</span>
  <span class="nx">Sep</span><span class="p">,</span>
  <span class="nx">Oct</span><span class="p">,</span>
  <span class="nx">Nov</span><span class="p">,</span>
  <span class="nx">Dec</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">Jan</code> 常量的值为 <code class="language-plaintext highlighter-rouge">1</code> 而不是 <code class="language-plaintext highlighter-rouge">0</code>，<code class="language-plaintext highlighter-rouge">Feb</code> 的值为 <code class="language-plaintext highlighter-rouge">2</code>，<code class="language-plaintext highlighter-rouge">Mar</code> 的值为 <code class="language-plaintext highlighter-rouge">3</code> 等等。</p>

<h3 id="什么时候使用枚举">什么时候使用枚举</h3>

<p>在下面情况中可以使用枚举：</p>

<ul>
  <li>有一组紧密相关且数量不多的固定值集合；</li>
  <li>这些值在编译时已知。</li>
</ul>

<p>例如，你可以使用枚举来表示审批状态：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kr">enum</span> <span class="nx">ApprovalStatus</span> <span class="p">{</span>
  <span class="nx">draft</span><span class="p">,</span>
  <span class="nx">submitted</span><span class="p">,</span>
  <span class="nx">approved</span><span class="p">,</span>
  <span class="nx">rejected</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>然后，你可以像下面这样来使用 <code class="language-plaintext highlighter-rouge">ApprovalStatus</code> 枚举：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">status</span><span class="p">:</span> <span class="nx">ApprovalStatus</span><span class="p">.</span><span class="nx">approved</span><span class="p">,</span>
  <span class="na">description</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Please approve this request</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="nx">ApprovalStatus</span><span class="p">.</span><span class="nx">approved</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// 发送邮件</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Send email to the Applicant...</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-9">小结</h3>

<ul>
  <li>TypeScript 中的枚举是一组常量值的集合；</li>
  <li>本质上，枚举是一个在枚举定义中声明了命名属性的 JavaScript 对象；</li>
  <li>如果你有一组紧密相关且数量不多的固定值集合，并且这些值在编译时已知，那么一定要使用枚举</li>
</ul>

<h2 id="any-类型">any 类型</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-any-type/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的 any 类型，以及如何在代码中正确地使用它。</p>

<h3 id="typescript-中地-any-类型介绍">TypeScript 中地 any 类型介绍</h3>

<p>有时候你需要在变量中存储一个值，但在你编写代码的时候你并不知道它的类型，这种未知的值可能来自第三方的 <code class="language-plaintext highlighter-rouge">API</code> 或者用户的输入。在这种情况下，如果你希望不进行类型检查，允许它在编译时通过检查，你可以使用 <code class="language-plaintext highlighter-rouge">any</code> 类型， <code class="language-plaintext highlighter-rouge">any</code> 类型允许你给变量赋任何类型的值：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c1">// json may come from a third-party API</span>
<span class="kd">const</span> <span class="nx">json</span> <span class="o">=</span> <span class="s2">`{"latitude": 10.11, "longitude":12.12}`</span><span class="p">;</span>

<span class="c1">// parse JSON to find location</span>
<span class="kd">const</span> <span class="nx">currentLocation</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">json</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">currentLocation</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="o">{</span> latitude: 10.11, longitude: 12.12 <span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">JSON.parse()</code> 函数返回的对象赋值给了 <code class="language-plaintext highlighter-rouge">currentLocation</code> 变量。当你访问 <code class="language-plaintext highlighter-rouge">currentLocation</code> 变量的属性的时候，TypeScript 不会做任何的类型检查：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">currentLocation</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kc">undefined</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>上面的例子中，TypeScript 编译器不会抛出任何的错误提示。</p>

<p>TypeScript 的 <code class="language-plaintext highlighter-rouge">any</code> 类型提供了一个可以与当前基于 JavaScript 的代码库一起正常工作的方案，它允许你在编译期间是否使用类型检测。因此，你可以借助 <code class="language-plaintext highlighter-rouge">any</code> 类型把基于 JavaScript 的项目平滑地过渡成为基于 TypeScript 的项目。</p>

<h3 id="typescript-隐式具有-any-类型">TypeScript 隐式具有 any 类型</h3>

<p>如果你在声明一个变量的时候没有指定类型，TypeScript 会假定变量使用的是 <code class="language-plaintext highlighter-rouge">any</code> 类型。这个特性被叫做 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/15-type-inference.html">类型推断</a>。TypeScript 基本上都会进行变量类型的推断，比如：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">result</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，TypeScript 会进行变量的类型推断，这种特性被称为隐式类型。</p>

<blockquote>
  <p>注意：要禁用 <code class="language-plaintext highlighter-rouge">any</code> 类型的隐式类型特性，你需要把 <code class="language-plaintext highlighter-rouge">tsconfig.json</code> 文件中的 <code class="language-plaintext highlighter-rouge">noImplicitAny</code> 选项的值调整为 <code class="language-plaintext highlighter-rouge">true</code>，你在后面的教程中会学习更多关于 <code class="language-plaintext highlighter-rouge">tsconfig.json</code> 配置文件的知识。</p>
</blockquote>

<h3 id="typescript-中的-any-类型-vs-对象类型">TypeScript 中的 any 类型 vs 对象类型</h3>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">result</span><span class="p">:</span> <span class="kr">any</span><span class="p">;</span>
<span class="nx">result</span> <span class="o">=</span> <span class="mf">10.123</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">());</span>
<span class="nx">result</span><span class="p">.</span><span class="nx">willExist</span><span class="p">();</span> <span class="c1">//</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">result</code> 变量的类型为 <code class="language-plaintext highlighter-rouge">any</code>类型，那么即使 <code class="language-plaintext highlighter-rouge">willExist()</code> 方法在编译时不存在，调用这个方法的时候 TypeScript 编译器也不会发出抛出任何的错误提示，因为 <code class="language-plaintext highlighter-rouge">willExist()</code> 函数可能在运行时是可用的。然而，如果把 <code class="language-plaintext highlighter-rouge">result</code> 变量的类型修改为 <code class="language-plaintext highlighter-rouge">object</code> 类型，TypeScript 编译器会抛出错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">result</span><span class="p">:</span> <span class="nx">object</span><span class="p">;</span>
<span class="nx">result</span> <span class="o">=</span> <span class="mf">10.123</span><span class="p">;</span>
<span class="nx">result</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">();</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>error TS2339: Property <span class="s1">'toFixed'</span> does not exist on <span class="nb">type</span> <span class="s1">'object'</span><span class="nb">.</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-10">小结</h3>

<ul>
  <li>TypeScript <code class="language-plaintext highlighter-rouge">any</code> 类型允许你存储任意类型的值，它告诉编译器不进行类型检查；</li>
  <li>使用 <code class="language-plaintext highlighter-rouge">any</code> 类型来存储在编译时或者 JavaScript 项目迁移成 TypeScript 项目时不知道类型的值。</li>
</ul>

<h2 id="void-类型">void 类型</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-void-type/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的 void 类型，以及如何使用它来表示不返回任何值的函数的返回类型。</p>

<h3 id="typescript-中的-void-类型介绍">TypeScript 中的 void 类型介绍</h3>

<p><code class="language-plaintext highlighter-rouge">void</code> 类型表示值没有任何类型，它有点像是 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/9-any-type.html">any 类型</a> 的反面。实际上你可以使用 <code class="language-plaintext highlighter-rouge">void</code> 类型表示不返回任何值的函数的返回类型，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">log</span><span class="p">(</span><span class="nx">message</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">messsage</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>给一个不返回任何值的函数或者方法加上返回类型是 <code class="language-plaintext highlighter-rouge">void</code> 类型，是一个很好的实践方法，你可以获取到以下好处：</p>

<ul>
  <li>提高代码的清晰度：你不用完整的读完整个函数体来判断它是否返回了什么；</li>
  <li>确保类型安全：你永远不会把一个返回类型为 <code class="language-plaintext highlighter-rouge">void</code> 类型的函数赋值给一个变量。</li>
</ul>

<p>注意你如果使用一个类型为 <code class="language-plaintext highlighter-rouge">void</code> 的变量，你只能把它赋值为 <code class="language-plaintext highlighter-rouge">undefined</code>，这种情况下 <code class="language-plaintext highlighter-rouge">void</code> 类型的值是没有任何用处的，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">useless</span><span class="p">:</span> <span class="k">void</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
<span class="nx">useless</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// error</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果没有指定 <code class="language-plaintext highlighter-rouge">--strictNullChecks</code> 标志，你可以把 <code class="language-plaintext highlighter-rouge">null</code> 赋值给 <code class="language-plaintext highlighter-rouge">useless</code> 变量。</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">useless</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// OK if --strictNullChecks is not specified</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="never-类型">never 类型</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-never-type/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的 never 类型，它不包含值。</p>

<p><code class="language-plaintext highlighter-rouge">never</code> 类型是不包含值的类型，由于这个原因，你不能给 <code class="language-plaintext highlighter-rouge">never</code> 类型的变量赋任何的值。通常，你可以使用 <code class="language-plaintext highlighter-rouge">never</code> 类型来表示总是抛出错误的函数的返回类型，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">raiseError</span><span class="p">(</span><span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">never</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面的函数的返回值被推断为 <code class="language-plaintext highlighter-rouge">never</code> 类型：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">reject</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">raiseError</span><span class="p">(</span><span class="dl">'</span><span class="s1">Rejected</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>包含死循环的函数它的返回类型也是 <code class="language-plaintext highlighter-rouge">never</code> 类型，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">loop</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">forever</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">forever()</code> 函数的返回类型是 <code class="language-plaintext highlighter-rouge">never</code> 类型。</p>

<p>如果看到一个函数的返回类型是 <code class="language-plaintext highlighter-rouge">never</code> 类型，那么要确定下这是不是你想要的结果。</p>

<p>当你使用 <a href="https://cody1991.github.io/TypeScript-Tutorial/7-advanced-types/2-type-guards.html">类型保护</a> 来收缩变量的类型，导致有些条件判断再也不能为真的时候，也可以得到 <code class="language-plaintext highlighter-rouge">never</code> 类型。如下所示，不使用 <code class="language-plaintext highlighter-rouge">never</code> 类型的话，下面的函数会抛出错误，因为不是所有代码中的路径都有返回值：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">string</span> <span class="o">|</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>为了使代码变得有效，你可以返回一个返回类型为 <code class="language-plaintext highlighter-rouge">never</code> 类型的函数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">string</span> <span class="o">|</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// make the function valid</span>
  <span class="k">return</span> <span class="nx">neverOccur</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">neverOccur</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Never!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="小结-11">小结</h4>

<ul>
  <li><code class="language-plaintext highlighter-rouge">never</code> 类型不包含值；</li>
  <li><code class="language-plaintext highlighter-rouge">never</code> 类型表示总是抛出错误的或包含死循环的函数的返回类型。</li>
</ul>

<h2 id="联合类型">联合类型</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-union-type/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的联合类型，它允许你在变量中存储一个或多个不同类型的值。</p>

<h3 id="typescript-中的联合类型介绍">TypeScript 中的联合类型介绍</h3>

<p>有时候你会遇到这样一个函数，它希望接受数字或字符串的值作为参数，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">any</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">b</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">b</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Parameters must be numbers or strings</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，如果两个参数都是数字，<code class="language-plaintext highlighter-rouge">add</code> 函数会计算它们的和，而如果两个参数都是字符串，<code class="language-plaintext highlighter-rouge">add</code> 函数会把它们拼接成一个字符串，如果参数既不都是数字也都不是字符串，<code class="language-plaintext highlighter-rouge">add()</code> 函数会抛出一个错误提示。</p>

<p><code class="language-plaintext highlighter-rouge">add()</code> 函数的问题是它的参数类型是 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/9-any-type.html">any 类型</a>，这意味着可以使用既不都是数字也不都是字符串的参数来调用它，TypeScript 能接受这种情况。代码可以编译成功，但是在运行的时候会抛出错误：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">add</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>为了解决这个问题，你可以使用 TypeScript 中的联合类型，联合类型允许把多个类型组合成一个类型来使用。<code class="language-plaintext highlighter-rouge">result</code> 变量的类型是 <code class="language-plaintext highlighter-rouge">number</code> 类型或者 <code class="language-plaintext highlighter-rouge">string</code> 类型，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">result</span><span class="p">:</span> <span class="kr">number</span> <span class="o">|</span> <span class="kr">string</span><span class="p">;</span>
<span class="nx">result</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="c1">// OK</span>
<span class="nx">result</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hi</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// also OK</span>
<span class="nx">result</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// a boolean value, not OK</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>联合类型描述的值可以是几种类型中的一种，但不仅仅只能是两种。比如 <code class="language-plaintext highlighter-rouge">number | string | boolean</code> 也是一个值的类型，它可以是数字，字符串或者布尔值。回到 <code class="language-plaintext highlighter-rouge">add()</code> 函数的例子，你可以把它的参数的类型从 <code class="language-plaintext highlighter-rouge">any</code> 类型修改为联合类型：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span> <span class="o">|</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">number</span> <span class="o">|</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">b</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">b</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Parameters must be numbers or strings</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-12">小结</h3>

<ul>
  <li>TypeScript 中的联合类型允许你在变量中存储一个或多个不同类型的值。</li>
</ul>

<h2 id="类型别名">类型别名</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-type-aliases/">原文地址</a></p>

<p>在本教程中，你将学习如果使用类型别名为类型起新的名字。</p>

<h3 id="typescript-中的类型别名介绍">TypeScript 中的类型别名介绍</h3>

<p>类型别名允许你为现有的类型指定新的名字，类型别名的语法如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">alias</span> <span class="o">=</span> <span class="nx">existingType</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>现有的类型可以是任何 TypeScript 中有效的类型。下面的例子使用类型别名，为 <code class="language-plaintext highlighter-rouge">string</code> 类型指定了新的名字 <code class="language-plaintext highlighter-rouge">chars</code>：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">chars</span> <span class="o">=</span> <span class="kr">string</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">messsage</span><span class="p">:</span> <span class="nx">chars</span><span class="p">;</span> <span class="c1">// same as string type</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>给 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/13-type-aliases.html">联合类型</a> 创建类型别名是非常有用的，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">alphanumeric</span> <span class="o">=</span> <span class="kr">string</span> <span class="o">|</span> <span class="kr">number</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">input</span><span class="p">:</span> <span class="nx">alphanumeric</span><span class="p">;</span>
<span class="nx">input</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span> <span class="c1">// valid</span>
<span class="nx">input</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hi</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// valid</span>
<span class="nx">input</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// Compiler error</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="字符串字面量类型">字符串字面量类型</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-string-literal-types/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的字符串字面量类型，它指定了类型可接受的字符串字面量。</p>

<p>字符串字面量类型允许你定义一种类型，它只接受一个指定的字符串字面量。下面的例子定义了一个字符串字面量类型，它只接受 <code class="language-plaintext highlighter-rouge">'click'</code> 字符串字面量：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">click</span><span class="p">:</span> <span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">click</code> 变量是一个只接受 <code class="language-plaintext highlighter-rouge">'click'</code> 字符串的字符串字面量类型，如果你把字符串 <code class="language-plaintext highlighter-rouge">click</code> 赋值给 <code class="language-plaintext highlighter-rouge">click</code> 变量，它是合法的：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">click</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// valid</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>但如果把另外一个字符串赋值给 <code class="language-plaintext highlighter-rouge">click</code> 变量，TypeScript 编译器会抛出一个错误提示，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">click</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">dblclick</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// compiler error</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>Type <span class="s1">'"dblclick"'</span> is not assignable to <span class="nb">type</span> <span class="s1">'"click"'</span><span class="nb">.</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>使用字符串字面量类型来限制变量中可能出现的字符串字面量是非常有用的。</p>

<p>字符串字面量类型可以与 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/12-union-type.html">联合类型</a> 结合起来使用，为变量定义一组有限的、可选的字符串字面量集合：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">mouseEvent</span><span class="p">:</span> <span class="dl">'</span><span class="s1">click</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">dblclick</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">mouseup</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">mousedown</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">mouseEvent</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// valid</span>
<span class="nx">mouseEvent</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">dblclick</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// valid</span>
<span class="nx">mouseEvent</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">mouseup</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// valid</span>
<span class="nx">mouseEvent</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">mousedown</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// valid</span>
<span class="nx">mouseEvent</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">mouseover</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// compiler error</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在多个位置使用同一个字符串字面量类型显得非常冗余，你可以使用 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/13-type-aliases.html">类型别名</a> 来避免这种情况的发生，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">MouseEvent</span><span class="p">:</span> <span class="dl">'</span><span class="s1">click</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">dblclick</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">mouseup</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">mousedown</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">mouseEvent</span><span class="p">:</span> <span class="nx">MouseEvent</span><span class="p">;</span>
<span class="nx">mouseEvent</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// valid</span>
<span class="nx">mouseEvent</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">dblclick</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// valid</span>
<span class="nx">mouseEvent</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">mouseup</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// valid</span>
<span class="nx">mouseEvent</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">mousedown</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// valid</span>
<span class="nx">mouseEvent</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">mouseover</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// compiler error</span>

<span class="kd">let</span> <span class="nx">anotherEvent</span><span class="p">:</span> <span class="nx">MouseEvent</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-13">小结</h3>

<ul>
  <li>TypeScript 中的字符串字面量类型指定了类型可接受的字符串字面量；</li>
  <li>字符串字面量类型与联合类型和类型别名结合起来使用，可以指定接受一组有限的、可选的字符串字面量集合。</li>
</ul>

<h1 id="section-3-控制流语句">Section 3. 控制流语句</h1>

<h2 id="if-else">if else</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-if-else/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的 if else 语句。</p>

<h3 id="typescript-中的-if-语句">TypeScript 中的 if 语句</h3>

<p><code class="language-plaintext highlighter-rouge">if</code> 语句根据条件的真假来决定是否执行语句，如果条件为真，那么 <code class="language-plaintext highlighter-rouge">if</code> 语句会执行语句体中的语句：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">if</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// if-statement</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面的例子演示了如果 <code class="language-plaintext highlighter-rouge">counter</code> 变量的值小于 <code class="language-plaintext highlighter-rouge">max</code> 变量的值，如何使用 <code class="language-plaintext highlighter-rouge">if</code> 语句来增加 <code class="language-plaintext highlighter-rouge">counter</code> 变量的值：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">max</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">counter</span> <span class="o">&lt;</span> <span class="nx">max</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">counter</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">counter</span><span class="p">);</span> <span class="c1">// 1</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>1
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，因为 <code class="language-plaintext highlighter-rouge">counter</code> 变量初始值为 <code class="language-plaintext highlighter-rouge">0</code>，它比 <code class="language-plaintext highlighter-rouge">max</code> 常量的值小，所以表达式 <code class="language-plaintext highlighter-rouge">counter &lt; max</code> 的值为 <code class="language-plaintext highlighter-rouge">true</code>，因此 <code class="language-plaintext highlighter-rouge">if</code> 语句会执行 <code class="language-plaintext highlighter-rouge">counter++</code>。让我们把 <code class="language-plaintext highlighter-rouge">counter</code> 变量的值初始化为 <code class="language-plaintext highlighter-rouge">100</code>：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">max</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">counter</span> <span class="o">&lt;</span> <span class="nx">max</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">counter</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">counter</span><span class="p">);</span> <span class="c1">// 100</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>100
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，表达式 <code class="language-plaintext highlighter-rouge">counter &lt; max</code> 计算结果为 <code class="language-plaintext highlighter-rouge">false</code>，所以 <code class="language-plaintext highlighter-rouge">if</code> 语句不会执行 <code class="language-plaintext highlighter-rouge">counter++</code> ，因此输出结果为 <code class="language-plaintext highlighter-rouge">100</code>。</p>

<h3 id="typescript-中的-if-else-语句">TypeScript 中的 if else 语句</h3>

<p>如果想在条件语句计算结果为 <code class="language-plaintext highlighter-rouge">false</code> 的时候执行另外一些语句，可以使用 <code class="language-plaintext highlighter-rouge">if else</code> 语句：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="k">if</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// if-statements</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="c1">// else statements;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面演示了一个使用 <code class="language-plaintext highlighter-rouge">if else</code> 语句的例子：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">max</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">counter</span> <span class="o">&lt;</span> <span class="nx">max</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">counter</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">counter</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">counter</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>1
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">counter &lt; max</code> 表达式计算结果为 <code class="language-plaintext highlighter-rouge">false</code> ，所以 <code class="language-plaintext highlighter-rouge">else</code> 分支中的语句会执行，即把 <code class="language-plaintext highlighter-rouge">counter</code> 变量的值设置为 <code class="language-plaintext highlighter-rouge">1</code>。</p>

<h4 id="三元运算符-">三元运算符 ?:</h4>

<p>在实践中，如果只是一个简单的条件判断，你可以使用三元运算符 <code class="language-plaintext highlighter-rouge">?:</code> 代替 <code class="language-plaintext highlighter-rouge">if else</code> 语句，让代码看起来更加简短易懂，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">max</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>

<span class="nx">counter</span> <span class="o">&lt;</span> <span class="nx">max</span> <span class="p">?</span> <span class="nx">counter</span><span class="o">++</span> <span class="p">:</span> <span class="p">(</span><span class="nx">counter</span> <span class="o">=</span> <span class="mi">1</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">counter</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="if-else-if-else-语句">if else if else 语句</h3>

<p>想要执行多条件分支的语句，可以使用 <code class="language-plaintext highlighter-rouge">if</code> <code class="language-plaintext highlighter-rouge">else if</code> <code class="language-plaintext highlighter-rouge">else</code> 语句。<code class="language-plaintext highlighter-rouge">if</code> <code class="language-plaintext highlighter-rouge">else if</code> <code class="language-plaintext highlighter-rouge">else</code> 语句可以有一个或者多个的 <code class="language-plaintext highlighter-rouge">else if</code> 分支，但只会有一个 <code class="language-plaintext highlighter-rouge">else</code> 分支，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">discount</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">itemCount</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">itemCount</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">itemCount</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">discount</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="c1">// 5% discount</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">itemCount</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="nx">itemCount</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">discount</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="c1">// 10% discount</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">discount</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span> <span class="c1">// 15%</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`You got </span><span class="p">${</span><span class="nx">discount</span><span class="p">}</span><span class="s2">% discount. `</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>0
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这个例子根据 <code class="language-plaintext highlighter-rouge">items</code> 变量的值，使用 <code class="language-plaintext highlighter-rouge">if</code> <code class="language-plaintext highlighter-rouge">else if</code> <code class="language-plaintext highlighter-rouge">else</code> 语句来确定折扣：</p>

<ul>
  <li>如果 <code class="language-plaintext highlighter-rouge">items</code> 变量的值小于或者等于 <code class="language-plaintext highlighter-rouge">5</code> 的时候，那么折扣是 <code class="language-plaintext highlighter-rouge">5%</code>，<code class="language-plaintext highlighter-rouge">if</code> 分支的语句执行；</li>
  <li>如果 <code class="language-plaintext highlighter-rouge">items</code> 变量的值小于等于 <code class="language-plaintext highlighter-rouge">10</code> 的时候，那么折扣是 <code class="language-plaintext highlighter-rouge">10%</code>，<code class="language-plaintext highlighter-rouge">else if</code> 分支的语句执行；</li>
  <li>当 <code class="language-plaintext highlighter-rouge">items</code> 变量的值大于 <code class="language-plaintext highlighter-rouge">10</code> 的时候，那么折扣是 <code class="language-plaintext highlighter-rouge">15%</code>，<code class="language-plaintext highlighter-rouge">else</code> 分支的语句执行。</li>
</ul>

<p>在本例中，假设了 <code class="language-plaintext highlighter-rouge">items</code> 变量的值总是大于 <code class="language-plaintext highlighter-rouge">0</code>，如果 <code class="language-plaintext highlighter-rouge">items</code> 变量的值小于 <code class="language-plaintext highlighter-rouge">0</code> 或者大于 <code class="language-plaintext highlighter-rouge">10</code> 的时候，折扣都是 <code class="language-plaintext highlighter-rouge">10%</code>。出于使代码更具有健壮性，可以在 <code class="language-plaintext highlighter-rouge">else</code> 分支前新增一个 <code class="language-plaintext highlighter-rouge">else if</code> 分支，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">discount</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">itemCount</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">itemCount</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">itemCount</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">discount</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="c1">// 5% discount</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">itemCount</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="nx">itemCount</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">discount</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="c1">// 10% discount</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">discount</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">discount</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span> <span class="c1">// 15%</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">The number of items cannot be negative!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`You got </span><span class="p">${</span><span class="nx">discount</span><span class="p">}</span><span class="s2">% discount. `</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在本例中，只有当 <code class="language-plaintext highlighter-rouge">items</code> 变量的值大于 <code class="language-plaintext highlighter-rouge">10</code> 的时候，折扣是 <code class="language-plaintext highlighter-rouge">10%</code>，第二个 <code class="language-plaintext highlighter-rouge">else if</code> 分支的语句执行。如果 <code class="language-plaintext highlighter-rouge">items</code> 变量的值小于 <code class="language-plaintext highlighter-rouge">0</code>，<code class="language-plaintext highlighter-rouge">else</code> 分支执行。</p>

<h3 id="小结-14">小结</h3>

<ul>
  <li>使用 <code class="language-plaintext highlighter-rouge">if</code> 语句来根据条件的真假来决定是否执行语句；</li>
  <li>使用 <code class="language-plaintext highlighter-rouge">else</code> 分支当你想在条件为 <code class="language-plaintext highlighter-rouge">false</code> 的时候执行某些代码，而使用三元运算符 <code class="language-plaintext highlighter-rouge">?:</code> 代替<code class="language-plaintext highlighter-rouge">if else</code> 语句是一个很好的实践方式；</li>
  <li>使用 <code class="language-plaintext highlighter-rouge">if</code> <code class="language-plaintext highlighter-rouge">else if</code> <code class="language-plaintext highlighter-rouge">else</code> 语句执行多条件分支的语句。</li>
</ul>

<h2 id="switch-case">switch case</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-switch-case/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的 switch case 语句</p>

<h3 id="typescript-中的-switch-case-语句">TypeScript 中的 switch case 语句</h3>

<p>下面展示了 <code class="language-plaintext highlighter-rouge">switch case</code> 语句的语法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="k">switch</span> <span class="p">(</span><span class="nx">expression</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="nx">value1</span><span class="p">:</span>
    <span class="c1">// statement 1</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="nx">value2</span><span class="p">:</span>
    <span class="c1">// statement 2</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="nx">valueN</span><span class="p">:</span>
    <span class="c1">// statement N</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="nl">default</span><span class="p">:</span>
    <span class="c1">//</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它是这样工作的：</p>

<ul>
  <li>首先，<code class="language-plaintext highlighter-rouge">switch case</code> 语句计算 <code class="language-plaintext highlighter-rouge">expression</code> 的值;</li>
  <li>然后，它搜索第一个计算出来的值 (<code class="language-plaintext highlighter-rouge">value1</code>, <code class="language-plaintext highlighter-rouge">value2</code> 和 <code class="language-plaintext highlighter-rouge">valueN</code> 等等) 与 <code class="language-plaintext highlighter-rouge">expression</code> 计算出来的值相同的 <code class="language-plaintext highlighter-rouge">case</code> 从句。</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">switch case</code> 语句会执行第一个匹配的 <code class="language-plaintext highlighter-rouge">case</code> 从句中的语句。如果没有发现匹配的 <code class="language-plaintext highlighter-rouge">case</code> 从句，<code class="language-plaintext highlighter-rouge">switch case</code> 语句会寻找可选的 <code class="language-plaintext highlighter-rouge">default</code> 从句，如果 <code class="language-plaintext highlighter-rouge">default</code> 从句可用，它会执行 <code class="language-plaintext highlighter-rouge">default</code> 从句中的语句。</p>

<p>与每个 <code class="language-plaintext highlighter-rouge">case</code> 从句相关联的 <code class="language-plaintext highlighter-rouge">break</code> 语句保证当 <code class="language-plaintext highlighter-rouge">case</code> 从句中的语句执行完毕的时候，从 <code class="language-plaintext highlighter-rouge">switch case</code> 语句中跳出。如果匹配的 <code class="language-plaintext highlighter-rouge">case</code> 从句没有 <code class="language-plaintext highlighter-rouge">break</code> 语句，程序会继续 <code class="language-plaintext highlighter-rouge">switch case</code> 语句后面的语句。</p>

<p>按照惯例， <code class="language-plaintext highlighter-rouge">default</code> 从句是 <code class="language-plaintext highlighter-rouge">switch case</code> 语句的最后一个从句，但这不是强制要求的。</p>

<h3 id="switch-case-语句例子">switch case 语句例子</h3>

<p>让我们看几个 <code class="language-plaintext highlighter-rouge">switch case</code> 语句的例子</p>

<h4 id="1-一个简单的-switch-case-例子">1) 一个简单的 switch case 例子</h4>

<p>下面展示了一个简单的 <code class="language-plaintext highlighter-rouge">switch case</code> 例子，它会基于 <code class="language-plaintext highlighter-rouge">targetId</code> 的值来展示不同的信息：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">targetId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">btnDelete</span><span class="dl">'</span><span class="p">;</span>

<span class="k">switch</span> <span class="p">(</span><span class="nx">targetId</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="dl">'</span><span class="s1">btnUpdate</span><span class="dl">'</span><span class="p">:</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Update</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="dl">'</span><span class="s1">btnDelete</span><span class="dl">'</span><span class="p">:</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Delete</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="dl">'</span><span class="s1">btnNew</span><span class="dl">'</span><span class="p">:</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">New</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>Delete
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">targetId</code> 赋值为 <code class="language-plaintext highlighter-rouge">btnDelete</code>。<code class="language-plaintext highlighter-rouge">switch case</code> 语句将 <code class="language-plaintext highlighter-rouge">targetId</code> 与一组值进行比较，因为 <code class="language-plaintext highlighter-rouge">targetId</code> 匹配了 <code class="language-plaintext highlighter-rouge">'btnDelete'</code>，对应的 <code class="language-plaintext highlighter-rouge">case</code> 从句中的语句会被执行。</p>

<h4 id="2-case-分组案例">2) case 分组案例</h4>

<p>如果你希望一段代码被多个 <code class="language-plaintext highlighter-rouge">case</code> 共享，你可以对它们进行分组，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="rouge-code"><pre><span class="c1">// change the month and year</span>
<span class="kd">let</span> <span class="nx">month</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="nx">year</span> <span class="o">=</span> <span class="mi">2020</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">day</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">switch</span> <span class="p">(</span><span class="nx">month</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
  <span class="k">case</span> <span class="mi">3</span><span class="p">:</span>
  <span class="k">case</span> <span class="mi">5</span><span class="p">:</span>
  <span class="k">case</span> <span class="mi">7</span><span class="p">:</span>
  <span class="k">case</span> <span class="mi">8</span><span class="p">:</span>
  <span class="k">case</span> <span class="mi">10</span><span class="p">:</span>
  <span class="k">case</span> <span class="mi">12</span><span class="p">:</span>
    <span class="nx">day</span> <span class="o">=</span> <span class="mi">31</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="mi">4</span><span class="p">:</span>
  <span class="k">case</span> <span class="mi">6</span><span class="p">:</span>
  <span class="k">case</span> <span class="mi">9</span><span class="p">:</span>
  <span class="k">case</span> <span class="mi">11</span><span class="p">:</span>
    <span class="nx">day</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
    <span class="c1">// leap year</span>
    <span class="k">if</span> <span class="p">((</span><span class="nx">year</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">year</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">==</span> <span class="mi">0</span><span class="p">))</span> <span class="o">||</span> <span class="nx">year</span> <span class="o">%</span> <span class="mi">400</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">day</span> <span class="o">=</span> <span class="mi">29</span><span class="p">;</span>
    <span class="k">else</span> <span class="nx">day</span> <span class="o">=</span> <span class="mi">28</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="nl">default</span><span class="p">:</span>
    <span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Invalid month</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`The month </span><span class="p">${</span><span class="nx">month</span><span class="p">}</span><span class="s2"> in </span><span class="p">${</span><span class="nx">year</span><span class="p">}</span><span class="s2"> has </span><span class="p">${</span><span class="nx">day</span><span class="p">}</span><span class="s2"> days`</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>The month 2 <span class="k">in </span>2020 has 29 days
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这个案例返回指定年份及月份下对应的天数：</p>

<ul>
  <li>如果月份是 <code class="language-plaintext highlighter-rouge">1</code> <code class="language-plaintext highlighter-rouge">3</code> <code class="language-plaintext highlighter-rouge">5</code> <code class="language-plaintext highlighter-rouge">7</code> <code class="language-plaintext highlighter-rouge">8</code> <code class="language-plaintext highlighter-rouge">10</code> 或者 <code class="language-plaintext highlighter-rouge">12</code>，返回的天数为 <code class="language-plaintext highlighter-rouge">31</code>；</li>
  <li>如果月份是 <code class="language-plaintext highlighter-rouge">4</code> <code class="language-plaintext highlighter-rouge">6</code> <code class="language-plaintext highlighter-rouge">9</code> 或者 <code class="language-plaintext highlighter-rouge">11</code>，返回的天数为 <code class="language-plaintext highlighter-rouge">30</code> 天</li>
  <li>如果月份是 <code class="language-plaintext highlighter-rouge">2</code> 并且是闰年的话，返回 <code class="language-plaintext highlighter-rouge">29</code> 天，否则返回 <code class="language-plaintext highlighter-rouge">28</code> 天。</li>
</ul>

<h2 id="for">for</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-for/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的 for 语句，它可以重复执行一段代码。</p>

<h3 id="typescript-中的-for-语句介绍">TypeScript 中的 for 语句介绍</h3>

<p>下面是 TypeScript 中 <code class="language-plaintext highlighter-rouge">for</code> 循环语句的语法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">for</span> <span class="p">(</span><span class="nx">initialization</span><span class="p">;</span> <span class="nx">condition</span><span class="p">;</span> <span class="nx">expression</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// statement</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">for</code> 循环语句被圆括号包裹起来，由分号 (<code class="language-plaintext highlighter-rouge">;</code>) 分隔的三个可选表达式组成：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">initialization</code> - 在循环前执行的表达式，通常会在 <code class="language-plaintext highlighter-rouge">initialization</code> 中初始循环计数器的值；</li>
  <li><code class="language-plaintext highlighter-rouge">condition</code> – 在每次循环迭代结束的时候执行的表达式，如果 <code class="language-plaintext highlighter-rouge">condition</code> 计算结果为 <code class="language-plaintext highlighter-rouge">true</code>，<code class="language-plaintext highlighter-rouge">for</code> 循环语句会继续执行循环体中的语句；</li>
  <li><code class="language-plaintext highlighter-rouge">expression</code> – 在执行 <code class="language-plaintext highlighter-rouge">condition</code> 语句前执行的表达式，通常会在 <code class="language-plaintext highlighter-rouge">expression</code> 中更新循环计算器的值。</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">for</code> 循环语句中的三个表达式都是可选的，这意味着可以这样使用它，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">for</span> <span class="p">(;;)</span> <span class="p">{</span>
  <span class="c1">// do something</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在实践中，如果你知道循环执行多少次，你应该使用 <code class="language-plaintext highlighter-rouge">for</code> 循环，如果你需要根据循环次数以外的条件判断是否停止循环的时候，使用 <code class="language-plaintext highlighter-rouge">while</code> 循环语句。</p>

<p>TypeScript 允许你完全省略 <code class="language-plaintext highlighter-rouge">for</code> 循环语句的循环体，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">for</span> <span class="p">(</span><span class="nx">initialization</span><span class="p">;</span> <span class="nx">condition</span><span class="p">;</span> <span class="nx">expression</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>但在实践中很少这样来使用它，它使得代码难以阅读和维护。</p>

<h3 id="循环语句例子">循环语句例子</h3>

<p>让我们看几个使用 TypeScript 中的 <code class="language-plaintext highlighter-rouge">for</code> 循环语句的例子：</p>

<h4 id="1-简单的-for-循环语句例子">1) 简单的 for 循环语句例子</h4>

<p>下面的例子使用 <code class="language-plaintext highlighter-rouge">for</code> 循环语句输出从 <code class="language-plaintext highlighter-rouge">0</code> 到 <code class="language-plaintext highlighter-rouge">9</code> 之间的 <code class="language-plaintext highlighter-rouge">10</code> 个数字：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Output:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>0
1
2
3
4
5
6
7
8
9
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它是这样工作的：</p>

<ul>
  <li>首先，声明了 <code class="language-plaintext highlighter-rouge">i</code> 变量，把它的值初始化为 <code class="language-plaintext highlighter-rouge">0</code>；</li>
  <li>检查 <code class="language-plaintext highlighter-rouge">i</code> 的值是否比 <code class="language-plaintext highlighter-rouge">10</code> 小，如果是的话把它的值输出到控制台，并给 <code class="language-plaintext highlighter-rouge">i</code> 变量加一；</li>
  <li>最后，循环第二步直到 <code class="language-plaintext highlighter-rouge">i</code> 的值等于 <code class="language-plaintext highlighter-rouge">10</code>，结束循环。</li>
</ul>

<h4 id="2-for-循环语句例子可选表达式">2) for 循环语句例子：可选表达式</h4>

<p>下面的例子和上面的例子有着相同的输出结果，但是下面的 <code class="language-plaintext highlighter-rouge">for</code> 循环语句没有 <code class="language-plaintext highlighter-rouge">initialization</code> 表达式：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>和 <code class="language-plaintext highlighter-rouge">initialization</code> 表达式一样，你也可以省略 <code class="language-plaintext highlighter-rouge">condition</code> 表达式。但是必须使用 <code class="language-plaintext highlighter-rouge">if</code> 或者 <code class="language-plaintext highlighter-rouge">break</code> 语句，在满足一些条件的时候终止循环，否则你将创建一个死循环语句，导致程序重复执行直至崩溃：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面的例子演示了一个省略了三个表达式的 <code class="language-plaintext highlighter-rouge">for</code> 循环语句：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(;;)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
  <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>0
1
2
3
4
5
6
7
8
9
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它是这样工作的：</p>

<ul>
  <li>首先，在进入 <code class="language-plaintext highlighter-rouge">for</code> 循环语句前声明了一个 <code class="language-plaintext highlighter-rouge">i</code> 循环计数器，并把它的值初始化为 <code class="language-plaintext highlighter-rouge">0</code>；</li>
  <li>然后，在每次循环迭代中，把 <code class="language-plaintext highlighter-rouge">i</code> 输出到控制台中并将它的值加一，判断如果 <code class="language-plaintext highlighter-rouge">i</code> 的值大于 <code class="language-plaintext highlighter-rouge">9</code> 的话，跳出循环语句。</li>
</ul>

<h3 id="小结-15">小结</h3>

<ul>
  <li>使用 TypeScript 中的 <code class="language-plaintext highlighter-rouge">for</code> 循环语句来重复执行一段代码。</li>
</ul>

<h2 id="while">while</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-while/">原文地址</a></p>

<p>在本教程中，你将学习如何使用 TypeScript 中的 while 语句创建循环语句。</p>

<h3 id="typescript-中的-while-语句介绍">TypeScript 中的 while 语句介绍</h3>

<p><code class="language-plaintext highlighter-rouge">while</code> 语句允许你创建一个循环，只要条件为 <code class="language-plaintext highlighter-rouge">true</code> 的时候就会执行给定的代码。下面是 TypeScript 中的 <code class="language-plaintext highlighter-rouge">while</code> 语句的语法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">while</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// do something</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">while</code> 语句会在每次循环迭代前计算 <code class="language-plaintext highlighter-rouge">condition</code> 的值：</p>

<ul>
  <li>如果 <code class="language-plaintext highlighter-rouge">condition</code> 的值为 <code class="language-plaintext highlighter-rouge">true</code> ，<code class="language-plaintext highlighter-rouge">while</code> 语句将执行其循环体中的代码；</li>
  <li>如果 <code class="language-plaintext highlighter-rouge">condition</code> 计算结果为 <code class="language-plaintext highlighter-rouge">false</code> ，跳出循环，执行 <code class="language-plaintext highlighter-rouge">while</code> 循环语句后面的语句。</li>
</ul>

<p>由于 <code class="language-plaintext highlighter-rouge">while</code> 语句是在执行循环体前计算 <code class="language-plaintext highlighter-rouge">condition</code> 的值，它也被称为预测循环。</p>

<p>可以使用 <code class="language-plaintext highlighter-rouge">if</code> 和 <code class="language-plaintext highlighter-rouge">break</code> 语句，在某些条件成立的时候，中断循环：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="k">while</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// do something</span>
  <span class="c1">// ...</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">anotherCondition</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果希望执行特定次数的循环，可以使用 TypeScript 中的 <code class="language-plaintext highlighter-rouge">for</code> 循环语句。</p>

<h3 id="while-语句例子">while 语句例子</h3>

<p>让我们看几个 TypeScript 中的 <code class="language-plaintext highlighter-rouge">while</code> 语句的案例。</p>

<h4 id="一个简单的-while-语句案例">一个简单的 while 语句案例</h4>

<p>下面的例子使用 <code class="language-plaintext highlighter-rouge">while</code> 语句来判断当 <code class="language-plaintext highlighter-rouge">counter</code> 小于 <code class="language-plaintext highlighter-rouge">5</code> 的时候，把它的值输出到控制台上：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">while</span> <span class="p">(</span><span class="nx">counter</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">counter</span><span class="p">);</span>
  <span class="nx">counter</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>0
1
2
3
4
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它是这样工作的：</p>

<ul>
  <li>首先，声明 <code class="language-plaintext highlighter-rouge">counter</code> 变量，并把它的值初始化为 <code class="language-plaintext highlighter-rouge">0</code>；</li>
  <li>然后，在进入循环之前检查一下 <code class="language-plaintext highlighter-rouge">counter</code> 的值是否小于 <code class="language-plaintext highlighter-rouge">5</code>，如果是的话输出 <code class="language-plaintext highlighter-rouge">counter</code> 的值，并把它的值加一；</li>
  <li>最后，当 <code class="language-plaintext highlighter-rouge">counter</code> 小于 <code class="language-plaintext highlighter-rouge">5</code> 的时候，重复执行上面的步骤。</li>
</ul>

<h4 id="while-语句项目实战">while 语句项目实战</h4>

<p>假设 <code class="language-plaintext highlighter-rouge">HTML</code> 文档中有以下元素列表：</p>

<pre><code class="language-HTML">&lt;ul id="list"&gt;
  &lt;li&gt;Item 1&lt;/li&gt;
  &lt;li&gt;Item 2&lt;/li&gt;
  &lt;li&gt;Item 3&lt;/li&gt;
  &lt;li&gt;Item 4&lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<p>下面的例子展示了如果使用 <code class="language-plaintext highlighter-rouge">while</code> 语句移除 <code class="language-plaintext highlighter-rouge">&lt;ul&gt;</code> 元素上所有的 <code class="language-plaintext highlighter-rouge">&lt;li&gt;</code> 元素：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">list</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#list</span><span class="dl">'</span><span class="p">);</span>

<span class="k">while</span> <span class="p">(</span><span class="nx">list</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">list</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">list</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它是这样工作的：</p>

<ul>
  <li>首先，通过 <code class="language-plaintext highlighter-rouge">id</code> 变量和 <code class="language-plaintext highlighter-rouge">querySelector()</code> 方法查找出 <code class="language-plaintext highlighter-rouge">&lt;ul&gt;</code> 元素；</li>
  <li>接下来，检查 <code class="language-plaintext highlighter-rouge">list</code> 元素的 <code class="language-plaintext highlighter-rouge">firstChild</code> 第一个子节点是否存在，如果存在则把它删除。当第一个子节点被删除的时候，下一个子节点将自动提升成第一个子节点。因此，使用这个 <code class="language-plaintext highlighter-rouge">while</code> 循环语句可以删除掉 <code class="language-plaintext highlighter-rouge">list</code> 元素上的所有子节点。</li>
</ul>

<h3 id="小结-16">小结</h3>

<ul>
  <li>使用 TypeScript 中的 <code class="language-plaintext highlighter-rouge">while</code> 语句来创建一个只要条件为 <code class="language-plaintext highlighter-rouge">true</code> 的时候就会一直执行的循环。</li>
</ul>

<h2 id="do-while">do while</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-do-while/">原文地址</a></p>

<p>在本教程中，你将学习如何使用 TypeScript 中的 do while 语句创建一个只有当条件为 <code class="language-plaintext highlighter-rouge">false</code> 的时候才会停止的循环语句。</p>

<h3 id="typescript-中的-do-while-语句介绍">TypeScript 中的 do while 语句介绍</h3>

<p>下面是 <code class="language-plaintext highlighter-rouge">do while</code> 语句的语法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">do</span> <span class="p">{</span>
  <span class="c1">// do something</span>
<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nx">condition</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">do while</code> 语句会一直执行循环体中的代码，直到 <code class="language-plaintext highlighter-rouge">condition</code> 计算值为 <code class="language-plaintext highlighter-rouge">false</code> 的时候。<code class="language-plaintext highlighter-rouge">do while</code> 语句至少执行一次它的循环体，和 <code class="language-plaintext highlighter-rouge">while</code> 语句不同，<code class="language-plaintext highlighter-rouge">do while</code> 语句会在每次循环迭代结束后才计算 <code class="language-plaintext highlighter-rouge">condition</code> 是否符合要求，因此它也被称为后测循环。</p>

<h3 id="typescript-中的-do-while-语句案例">TypeScript 中的 do while 语句案例</h3>

<p>下面的例子使用 <code class="language-plaintext highlighter-rouge">do while</code> 语句把 <code class="language-plaintext highlighter-rouge">0</code> 到 <code class="language-plaintext highlighter-rouge">9</code> 之间的数字输出到控制台中：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">do</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
  <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>0
1
2
3
4
5
6
7
8
9
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它是这样工作的：</p>

<ul>
  <li>首先，声明变量 <code class="language-plaintext highlighter-rouge">i</code>，在进入循环值前把它的值初始化为 <code class="language-plaintext highlighter-rouge">0</code>；</li>
  <li>接下来，把 <code class="language-plaintext highlighter-rouge">i</code> 输出到控制台并且加一。然后检查它的值是否小于 <code class="language-plaintext highlighter-rouge">10</code>，如果是的话，继续执行循环直到 <code class="language-plaintext highlighter-rouge">i</code> 的值大于或者等于 <code class="language-plaintext highlighter-rouge">10</code>。</li>
</ul>

<h2 id="break">break</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-break/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的 break 语句，它可以用来中断循环和中断 <code class="language-plaintext highlighter-rouge">switch</code> 语句。</p>

<h3 id="使用-break-语句终止循环">使用 break 语句终止循环</h3>

<p><code class="language-plaintext highlighter-rouge">break</code> 语句允许你终止一个循环，把程序的控制流传递到循环后的语句，可以在 <a href="https://cody1991.github.io/TypeScript-Tutorial/3-control-flow-statements/3-for.html">for</a>，<a href="https://cody1991.github.io/TypeScript-Tutorial/3-control-flow-statements/4-while.html">while</a> 和 <a href="https://cody1991.github.io/TypeScript-Tutorial/3-control-flow-statements/5-do-while.html">do while</a> 语句中使用 <code class="language-plaintext highlighter-rouge">break</code> 语句。下面的例子展示了如何在 <code class="language-plaintext highlighter-rouge">for</code> 循环中使用 <code class="language-plaintext highlighter-rouge">break</code> 语句：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">products</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">phone</span><span class="dl">'</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="mi">700</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">tablet</span><span class="dl">'</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="mi">900</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">laptop</span><span class="dl">'</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="mi">1200</span> <span class="p">},</span>
<span class="p">];</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">products</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">products</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">price</span> <span class="o">==</span> <span class="mi">900</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// show the products</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">products</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="o">{</span> name: <span class="s1">'tablet'</span>, price: 900 <span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它是这样工作的：</p>

<ul>
  <li>首先初始化一个带有名字和价格属性的 <code class="language-plaintext highlighter-rouge">products</code> 变量列表；</li>
  <li>然后，查找价格为 <code class="language-plaintext highlighter-rouge">900</code> 的产品，当找到该产品的时候，使用 <code class="language-plaintext highlighter-rouge">break</code> 语句中断循环；</li>
  <li>最后，我们把符合要求的产品输出到控制台中。</li>
</ul>

<h3 id="使用-break-语句中断-switch-语句">使用 break 语句中断 switch 语句</h3>

<p>下面的例子返回了指定产品的折扣，它使用 <code class="language-plaintext highlighter-rouge">break</code> 语句中断 <a href="https://cody1991.github.io/TypeScript-Tutorial/3-control-flow-statements/2-switch-case.html">switch</a> 语句：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">products</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">phone</span><span class="dl">'</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="mi">700</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">tablet</span><span class="dl">'</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="mi">900</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">laptop</span><span class="dl">'</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="mi">1200</span> <span class="p">},</span>
<span class="p">];</span>

<span class="kd">let</span> <span class="nx">discount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">product</span> <span class="o">=</span> <span class="nx">products</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

<span class="k">switch</span> <span class="p">(</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="dl">'</span><span class="s1">phone</span><span class="dl">'</span><span class="p">:</span>
    <span class="nx">discount</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="dl">'</span><span class="s1">tablet</span><span class="dl">'</span><span class="p">:</span>
    <span class="nx">discount</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="dl">'</span><span class="s1">laptop</span><span class="dl">'</span><span class="p">:</span>
    <span class="nx">discount</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`There is a </span><span class="p">${</span><span class="nx">discount</span><span class="p">}</span><span class="s2">% on </span><span class="p">${</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">.`</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>注意，除了循环语句和 <code class="language-plaintext highlighter-rouge">switch</code> 语句外，<code class="language-plaintext highlighter-rouge">break</code> 语句也可以用于中断带有标签的语句，但是它很少在实践中使用，所以在本教程中不进行更多的讨论。</p>
</blockquote>

<h2 id="continue">continue</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-continue/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的 continue 语句。</p>

<p><code class="language-plaintext highlighter-rouge">continue</code> 语句用于辅助控制循环，比如 <a href="https://cody1991.github.io/TypeScript-Tutorial/3-control-flow-statements/3-for.html">for</a> 循环，<a href="https://cody1991.github.io/TypeScript-Tutorial/3-control-flow-statements/4-while.html">while</a> 循环，或者 <a href="https://cody1991.github.io/TypeScript-Tutorial/3-control-flow-statements/5-do-while.html">do while</a> 循环。<code class="language-plaintext highlighter-rouge">continue</code> 语句会跳到当前循环的末尾，然后开始下一个循环迭代。</p>

<h3 id="在-for-循环中使用-continue-语句">在 for 循环中使用 continue 语句</h3>

<p>下面的例子演示了如何在 <code class="language-plaintext highlighter-rouge">for</code> 循环中使用 <code class="language-plaintext highlighter-rouge">continue</code> 语句：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="mi">9</span><span class="p">;</span> <span class="nx">index</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// if index is odd, skip it</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>

  <span class="c1">// the following code will be skipped for odd numbers</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>0
2
4
6
8
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中：</p>

<ul>
  <li>首先，循环 <code class="language-plaintext highlighter-rouge">0</code> 到 <code class="language-plaintext highlighter-rouge">9</code> 这几个数字；</li>
  <li>然后，当数字是奇数的时候，使用 <code class="language-plaintext highlighter-rouge">continue</code> 语句跳过把数字输出到控制台的操作，而当数字是偶数的时候，把它输出到控制台中。</li>
</ul>

<h3 id="在-while-循环中使用-continue-语句">在 while 循环中使用 continue 语句</h3>

<p>下面的例子展示如何在 <code class="language-plaintext highlighter-rouge">while</code> 循环中使用 <code class="language-plaintext highlighter-rouge">continue</code> 语句，它和上面的例子的返回结果是一样：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">index</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

<span class="k">while</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&lt;</span> <span class="mi">9</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">index</span> <span class="o">=</span> <span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>0
2
4
6
8
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="在-do-while-循环中使用-continue-语句">在 do while 循环中使用 continue 语句</h3>

<p>下面的例子展示如何在 <code class="language-plaintext highlighter-rouge">do while</code> 循环中使用 <code class="language-plaintext highlighter-rouge">continue</code> 语句，它返回 <code class="language-plaintext highlighter-rouge">9</code> 到 <code class="language-plaintext highlighter-rouge">99</code> 之间存在的偶数的数量：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">do</span> <span class="p">{</span>
  <span class="nx">index</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
  <span class="nx">count</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&lt;</span> <span class="mi">99</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">count</span><span class="p">);</span> <span class="c1">// 45</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="section-4-函数">Section 4. 函数</h1>

<h2 id="函数">函数</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-functions/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的函数以及如何给函数添加类型注释。</p>

<h3 id="typescript-中的函数介绍">TypeScript 中的函数介绍</h3>

<p>TypeScript 中的函数是一段可读，可维护和可复用的代码块，和 JavaScript 一样，可以使用 <code class="language-plaintext highlighter-rouge">function</code> 关键字来声明 TypeScript 中的函数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">name</span><span class="p">(</span><span class="nx">parameter</span><span class="p">:</span> <span class="kd">type</span><span class="p">,</span> <span class="nx">parameter</span><span class="p">:</span> <span class="kd">type</span><span class="p">,</span> <span class="p">...):</span> <span class="nx">returnType</span> <span class="p">{</span>
  <span class="c1">// do something</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>和 JavaScript 不一样的是，TypeScript 允许为函数的参数和返回值添加 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/1-type-annotations.html">类型注释</a>，看看下面的 <code class="language-plaintext highlighter-rouge">add()</code> 函数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">add()</code> 函数接受两个 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/2-number.html">数字类型</a> 的参数。当你调用 <code class="language-plaintext highlighter-rouge">add()</code> 函数的时候，TypeScript 编译器会检查每个传递给函数的参数，保证它们都是数字类型的值。在 <code class="language-plaintext highlighter-rouge">add()</code> 函数的例子中，你只能传递数字类型的参数给它，不能是其他任何类型的值。下面的例子会抛出错误提示，因为它向 <code class="language-plaintext highlighter-rouge">add()</code> 函数传递了两个字符串类型的参数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="nx">add</span><span class="p">(</span><span class="dl">'</span><span class="s1">10</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">20</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>error TS2345: Argument of <span class="nb">type</span> <span class="s1">'"10"'</span> is not assignable to parameter of <span class="nb">type</span> <span class="s1">'number'</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>括号后面的 <code class="language-plaintext highlighter-rouge">: number</code> 表示返回值的类型，在本例中 <code class="language-plaintext highlighter-rouge">add()</code> 函数返回 <code class="language-plaintext highlighter-rouge">number</code> 类型的值。当函数有返回类型的时候，TypeScript 编译器会根据返回类型检查每个 <code class="language-plaintext highlighter-rouge">return</code> 语句，确保返回值都是兼容的。如果函数不返回值，使用 <code class="language-plaintext highlighter-rouge">void</code> 类型作为返回类型，<code class="language-plaintext highlighter-rouge">void</code> 关键字表示该函数不返回任何值，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">echo</span><span class="p">(</span><span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">());</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">void</code> 类型阻止函数内的代码返回值，也阻止调用函数的地方把函数的返回赋值给变量。</p>

<p>当没有注释返回值的类型的时候，TypeScript 会尝试推断它的类型，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，TypeScript 编译器尝试把 <code class="language-plaintext highlighter-rouge">add()</code> 函数的返回值的类型推断为 <code class="language-plaintext highlighter-rouge">number</code> 类型，这是符合预期的。但是，如果函数有多个分支返回不同类型的值的时候，TypeScript 编译器可能推断出返回值的类型为 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/12-union-type.html">联合类型</a> 或者 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/9-any-type.html">any 类型</a>。因此，尽可能给函数添加类型注释。</p>

<h3 id="小结-17">小结</h3>

<ul>
  <li>给函数的参数和返回值添加类型注释保证调用代码的内联性，以及在函数体中进行类型检查。</li>
</ul>

<h2 id="函数类型">函数类型</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-function-types/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的函数类型，使用它为函数定义类型。</p>

<h3 id="typescript-中的函数类型介绍">TypeScript 中的函数类型介绍</h3>

<p>一个函数类型由两个部分组成：参数类型和返回类型。声明一个函数类型的时候，使用下面的语法来指定这两个部分：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="p">(</span><span class="nx">parameter</span><span class="p">:</span> <span class="kd">type</span><span class="p">,</span> <span class="nx">parameter</span><span class="p">:</span> <span class="kd">type</span><span class="p">,</span> <span class="p">...)</span> <span class="o">=&gt;</span> <span class="kd">type</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面的例子声明了一个函数类型，它接受两个数字类型的参数以及返回一个数字类型的值：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">add</span><span class="p">:</span> <span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">y</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="kr">number</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中：</p>

<ul>
  <li>函数类型接受两个参数：<code class="language-plaintext highlighter-rouge">x</code> 和 <code class="language-plaintext highlighter-rouge">y</code>，它们都是 <code class="language-plaintext highlighter-rouge">number</code> 类型的值；</li>
  <li>返回值的类型是 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/2-number.html">数字类型</a> ，它跟在参数列表和返回类型之间的胖箭头 (<code class="language-plaintext highlighter-rouge">=&gt;</code>) 后面。</li>
</ul>

<blockquote>
  <p>注意，参数的名字 (<code class="language-plaintext highlighter-rouge">x</code> 和 <code class="language-plaintext highlighter-rouge">y</code>) 只是方便阅读，可以使用其他参数名字。</p>
</blockquote>

<p>为一个变量添加函数类型注释后，可以把有相同类型的函数赋值给这个变量。TypeScript 编译器会检查参数的数量和类型以及返回类型是否匹配。下面的例子展示如何把一个函数赋值给 <code class="language-plaintext highlighter-rouge">add</code> 变量：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">y</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>同样的，可以像下面这样声明一个变量，同时把函数赋值给它：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">add</span><span class="p">:</span> <span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="kr">number</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">y</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果赋值了另外一个类型与 <code class="language-plaintext highlighter-rouge">add</code> 函数类型不匹配的函数，TypeScript 会抛出错误提示，如下所示，把一个类型不匹配的函数重新赋值给了 <code class="language-plaintext highlighter-rouge">add</code> 函数变量：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">y</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">y</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="函数类型推断">函数类型推断</h3>

<p>当在等式的一边有类型的时候，TypeScript 编译器可以推断出函数的类型，这种形式的 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/15-type-inference.html">类型推断</a> 被称为上下文类型，如下所示：</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/TypeScript-Function-Type-Example.6rkmnr74nik0.png" alt="TypeScript-Function-Type-Example" /></p>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">add</code> 函数被推断为 <code class="language-plaintext highlighter-rouge">(x: number, y:number) =&gt; number</code> 类型。</p>

<p>通过类型推断，可以免去一些类型注释的工作，显著减少代码数。</p>

<h2 id="可选参数">可选参数</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-optional-parameters/">原文地址</a></p>

<p>在本教程中，你将学习如何使用 TypeScript 中的函数的可选参数。</p>

<p>在 JavaScript 中，即使函数指定了参数，也可以在调用它的时候不传入任何参数，因为 JavaScript 默认支持可选参数。而在 TypeScript 中，编译器会检查每个函数的调用情况，并在以下情况中抛出错误提示：</p>

<ul>
  <li>实参的数量和函数中指定的形参的数量不同；</li>
  <li>或者实参的类型和函数形参的类型不兼容。</li>
</ul>

<p>因为编译器会彻查传递给函数的参数，我们可以使用可选参数告诉编译器参数是可选的，在不存在的情况下不发出错误提示。</p>

<p>要使函数的参数是可选的，可以在参数名后面添加 <code class="language-plaintext highlighter-rouge">?</code> 符号，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">multiply</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">c</span><span class="p">?:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">c</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">undefined</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">c</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它是这样工作的：</p>

<ul>
  <li>首先，在 <code class="language-plaintext highlighter-rouge">c</code> 参数后面添加 <code class="language-plaintext highlighter-rouge">?</code> 符号；</li>
  <li>然后，通过表达式 <code class="language-plaintext highlighter-rouge">typeof c !== 'undefined'</code> 检查 <code class="language-plaintext highlighter-rouge">c</code> 参数是否传递给了函数。</li>
</ul>

<blockquote>
  <p>注意：如果你用表达式 <code class="language-plaintext highlighter-rouge">if(c)</code> 来检查参数是否被初始化，你会发现空字符串和 <code class="language-plaintext highlighter-rouge">0</code> 也被视为 <code class="language-plaintext highlighter-rouge">undefined</code>，这种判断是有问题的。</p>
</blockquote>

<p>可选参数必须出现在参数列表中必选参数的后面。例如，如果你把 <code class="language-plaintext highlighter-rouge">b</code> 设置为可选参数，而 <code class="language-plaintext highlighter-rouge">c</code> 是必须参数，TypeScript 编译器会抛出一个错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">multiply</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">b</span><span class="p">?:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">c</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">c</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">undefined</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">c</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>error TS1016: A required parameter cannot follow an optional parameter.
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-18">小结</h3>

<ul>
  <li>使用 <code class="language-plaintext highlighter-rouge">parameter?: type</code> 语法把参数设置为可选的；</li>
  <li>使用 <code class="language-plaintext highlighter-rouge">typeof(parameter) !== 'undefined'</code> 表达式来检查可选参数是否初始化了。</li>
</ul>

<h2 id="默认参数">默认参数</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-default-parameters/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的默认参数</p>

<h3 id="typescript-中的默认参数介绍">TypeScript 中的默认参数介绍</h3>

<p>JavaScript 自 ES2015 (或者称 ES6) 以来，开始支持 <a href="https://zh.javascript.info/function-basics#mo-ren-zhi">默认参数</a>，它的语法如下：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">name</span><span class="p">(</span><span class="nx">parameter1</span> <span class="o">=</span> <span class="nx">defaultValue1</span><span class="p">,</span> <span class="p">...)</span> <span class="p">{</span>
  <span class="c1">// do something</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在上述语法中，如果调用函数的时候不传递实参或者传递的实参值为 <code class="language-plaintext highlighter-rouge">undefined</code> ，函数会把默认的初始值赋值给缺省的形参，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">applyDiscount</span><span class="p">(</span><span class="nx">price</span><span class="p">,</span> <span class="nx">discount</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">price</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">discount</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">applyDiscount</span><span class="p">(</span><span class="mi">100</span><span class="p">));</span> <span class="c1">// 95</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">applyDiscount()</code> 函数有一个默认参数 <code class="language-plaintext highlighter-rouge">discount</code>。如果在调用 <code class="language-plaintext highlighter-rouge">applyDiscount()</code> 函数的时候没有传递值给 <code class="language-plaintext highlighter-rouge">discount</code> 行参，函数会把默认值 <code class="language-plaintext highlighter-rouge">0.05</code> 赋值给它。与 JavaScript 类似，可以在 TypeScript 中使用相同的语法来指定默认参数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>
<span class="kd">function</span> <span class="nx">name</span><span class="p">(</span><span class="nx">parameter1</span> <span class="p">:</span><span class="kd">type</span> <span class="o">=</span> <span class="nx">defaultvalue1</span><span class="p">,</span> <span class="nx">parameter2</span> <span class="p">:</span><span class="kd">type</span> <span class="o">=</span> <span class="nx">defaultvalue2</span><span class="p">,</span> <span class="p">...)</span> <span class="p">{</span>
  <span class="c1">//</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面的例子使用了 <code class="language-plaintext highlighter-rouge">applyDiscount()</code> 函数的默认参数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">applyDiscount</span><span class="p">(</span><span class="nx">price</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">discount</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">price</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">discount</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">applyDiscount</span><span class="p">(</span><span class="mi">100</span><span class="p">));</span> <span class="c1">// 95</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>注意不能在函数类型定义中包含默认参数，下面的代码讲会抛出错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">promotion</span><span class="p">:</span> <span class="p">(</span><span class="nx">price</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">discount</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="kr">number</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>error TS2371: A parameter initializer is only allowed <span class="k">in </span>a <span class="k">function </span>or constructor implementation.
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="默认参数和可选参数">默认参数和可选参数</h3>

<p>和 <a href="https://cody1991.github.io/TypeScript-Tutorial/4-functions/3-optional-parameters.html">可选参数</a> 类似，默认参数也是可选的。这意味着在调用函数的时候可以省略默认参数。另外，默认参数和可选参数可能有相同的类型，比如下面两个函数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">applyDiscount</span><span class="p">(</span><span class="nx">price</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">discount</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>和</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">applyDiscount</span><span class="p">(</span><span class="nx">price</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">discount</span><span class="p">?:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它们有着如下所示相同的类型：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="p">(</span><span class="nx">price</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">discount</span><span class="p">?:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="kr">number</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>可选参数必须在必选参数后面，但是默认参数不需要出现在必选参数后面。当默认参数出现在必选参数之前，需要显示的传递 <code class="language-plaintext highlighter-rouge">undefined</code> 来获取默认初始值的赋值。</p>

<p>下面的函数返回指定月份和年份中的天数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">getDay</span><span class="p">(</span>
  <span class="nx">year</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getFullYear</span><span class="p">(),</span>
  <span class="nx">month</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span>
<span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">day</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">month</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">case</span> <span class="mi">3</span><span class="p">:</span>
    <span class="k">case</span> <span class="mi">5</span><span class="p">:</span>
    <span class="k">case</span> <span class="mi">7</span><span class="p">:</span>
    <span class="k">case</span> <span class="mi">8</span><span class="p">:</span>
    <span class="k">case</span> <span class="mi">10</span><span class="p">:</span>
    <span class="k">case</span> <span class="mi">12</span><span class="p">:</span>
      <span class="nx">day</span> <span class="o">=</span> <span class="mi">31</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">4</span><span class="p">:</span>
    <span class="k">case</span> <span class="mi">6</span><span class="p">:</span>
    <span class="k">case</span> <span class="mi">9</span><span class="p">:</span>
    <span class="k">case</span> <span class="mi">11</span><span class="p">:</span>
      <span class="nx">day</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
      <span class="c1">// leap year</span>
      <span class="k">if</span> <span class="p">((</span><span class="nx">year</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">year</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">==</span> <span class="mi">0</span><span class="p">))</span> <span class="o">||</span> <span class="nx">year</span> <span class="o">%</span> <span class="mi">400</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">day</span> <span class="o">=</span> <span class="mi">29</span><span class="p">;</span>
      <span class="k">else</span> <span class="nx">day</span> <span class="o">=</span> <span class="mi">28</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="nl">default</span><span class="p">:</span>
      <span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Invalid month</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">day</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，如果没有给 <code class="language-plaintext highlighter-rouge">year</code> 传递实参或者 <code class="language-plaintext highlighter-rouge">undefined</code> 值，<code class="language-plaintext highlighter-rouge">year</code> 默认值是当前年份。下面的例子使用 <code class="language-plaintext highlighter-rouge">getDay()</code> 函数来获取 2019 年 2 月的天数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">day</span> <span class="o">=</span> <span class="nx">getDay</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">day</span><span class="p">);</span> <span class="c1">// 28</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>为了获取今年 2 月份的天数，需要如下所示把 <code class="language-plaintext highlighter-rouge">undefined</code> 值传递给 <code class="language-plaintext highlighter-rouge">year</code> 参数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">day</span> <span class="o">=</span> <span class="nx">getDay</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">day</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-19">小结</h3>

<ul>
  <li>如果你想要设置参数的默认初始值，使用默认参数的语法 <code class="language-plaintext highlighter-rouge">parameter:=defaultValue</code>；</li>
  <li>默认参数是可选的；</li>
  <li>要使用形参的默认初始值，在调用函数的时候忽略实参或者把 <code class="language-plaintext highlighter-rouge">undefined</code> 值传递给对应的参数。</li>
</ul>

<h2 id="rest-参数">Rest 参数</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-rest-parameters/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的剩余参数，它允许你把不限数量的参数表示为一个数组参数。</p>

<p>Rest 参数允许函数接受零个或者多个指定类型的参数，在 TypeScript 中， Rest 参数遵守下面的规则：</p>

<ul>
  <li>一个函数只有一个 Rest 参数；</li>
  <li>Rest 参数出现在参数列表的最后面；</li>
  <li>Rest 参数的类型是 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/9-any-type.html">数组类型</a>。</li>
</ul>

<p>要声明一个 Rest 参数，可以在参数名前加上三个点，并使用数组类型作为它的类型注释：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">fn</span><span class="p">(...</span><span class="nx">rest</span><span class="p">:</span> <span class="kd">type</span><span class="p">[])</span> <span class="p">{</span>
  <span class="c1">//...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面的例子演示了如何使用 Rest 参数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">getTotal</span><span class="p">(...</span><span class="nx">numbers</span><span class="p">:</span> <span class="kr">number</span><span class="p">[]):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">numbers</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">num</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">total</span> <span class="o">+=</span> <span class="nx">num</span><span class="p">));</span>
  <span class="k">return</span> <span class="nx">total</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中， <code class="language-plaintext highlighter-rouge">getTotal()</code> 函数计算传递给它的所有参数的总和。由于 <code class="language-plaintext highlighter-rouge">numbers</code> 参数是一个 Rest 参数，你可以传递一个或者多个数字，来计算它们的总和：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">getTotal</span><span class="p">());</span> <span class="c1">// 0</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">getTotal</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">));</span> <span class="c1">// 30</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">getTotal</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">));</span> <span class="c1">// 60</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="函数重载">函数重载</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-function-overloadings/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的函数重载</p>

<h3 id="typescript-中的函数重载介绍">TypeScript 中的函数重载介绍</h3>

<p>在 TypeScript 中，函数重载允许你建立某个函数参数类型和返回类型之间的关系。</p>

<blockquote>
  <p>注意 TypeScript 的函数重载不同于其他静态类型语言，如 <code class="language-plaintext highlighter-rouge">C#</code> 和 <code class="language-plaintext highlighter-rouge">Java</code> 支持的函数重载。</p>
</blockquote>

<p>让我们看几个简单的例子：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">addNumbers</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">addStrings</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="kr">string</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">addNumbers()</code> 函数返回两数之和；</li>
  <li><code class="language-plaintext highlighter-rouge">addStrings()</code> 函数返回两个字符串连接后的结果。</li>
</ul>

<p>可以使用 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/12-union-type.html">联合类型</a> 来定义一个函数参数和返回值的类型范围：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span> <span class="o">|</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">number</span> <span class="o">|</span> <span class="kr">string</span><span class="p">):</span> <span class="kr">number</span> <span class="o">|</span> <span class="kr">string</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">b</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">b</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>然后，联合类型不能精确地表示参数类型和返回值类型之间的关系。<code class="language-plaintext highlighter-rouge">add()</code> 函数告诉编译器它将接受数字或者字符串参数，返回一个数字或者字符串。但是它无法描述在参数都为数字的时候返回数字，当参数都是字符串的时候返回字符串。为了更好地描述函数使用的类型之间的关系，TypeScript 支持函数重载，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="kr">string</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">any</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">any</span><span class="p">):</span> <span class="kr">any</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，我们为 <code class="language-plaintext highlighter-rouge">add()</code> 函数添加了两个函数重载，第一个函数重载告诉编译器参数都是数字的时候，<code class="language-plaintext highlighter-rouge">add()</code> 函数应该返回一个数字。第二个函数重载有着类似的行为，不过换成了针对字符串类型的参数。</p>

<p>每个函数重载定义了 <code class="language-plaintext highlighter-rouge">add()</code> 函数支持的类型组合，描述了参数类型和它返回值类型之间的映射关系。现在当你调用 <code class="language-plaintext highlighter-rouge">add()</code> 函数的时候，代码编辑器会提示有一个可用的重载函数，如下所示：</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/typescript-function-overloadings.36nbxumle820.png" alt="typescript-function-overloadings" /></p>

<h3 id="数函数重载中使用可选参数">数函数重载中使用可选参数</h3>

<p>当你使用函数重载的时候，函数的参数数量必须相同，如果有一个函数重载的参数比另外一个函数重载的参数多的话，你必须把多出来的参数设置为可选参数，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">sum</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">sum</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">c</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">sum</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">c</span><span class="p">?:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">c</span><span class="p">)</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">+</span> <span class="nx">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">sum()</code> 函数接受两个或者三个类型为数字的参数，第三个参数是可选的，如果没有把它设置为可选参数，编译器将抛出错误提示。</p>

<h3 id="方法重载">方法重载</h3>

<p>当一个函数是一个类的属性的时候，它被称为方法，TypeScript 也支持方法重载，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Counter</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">current</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">count</span><span class="p">():</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nx">count</span><span class="p">(</span><span class="nx">target</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span><span class="p">[];</span>
  <span class="nx">count</span><span class="p">(</span><span class="nx">target</span><span class="p">?:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="o">|</span> <span class="kr">number</span><span class="p">[]</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">values</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">start</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">current</span><span class="p">;</span> <span class="nx">start</span> <span class="o">&lt;=</span> <span class="nx">target</span><span class="p">;</span> <span class="nx">start</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">values</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">start</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">target</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">values</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="o">++</span><span class="k">this</span><span class="p">.</span><span class="nx">current</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">count()</code> 函数可以返回一个数字或者一个数组，这取决于传递给它的参数的数量。</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">counter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Counter</span><span class="p">();</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">counter</span><span class="p">.</span><span class="nx">count</span><span class="p">());</span> <span class="c1">// return a number</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">counter</span><span class="p">.</span><span class="nx">count</span><span class="p">(</span><span class="mi">20</span><span class="p">));</span> <span class="c1">// return an array</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>1
<span class="o">[</span>
   1,  2,  3,  4,  5,  6,  7,
   8,  9, 10, 11, 12, 13, 14,
  15, 16, 17, 18, 19, 20
<span class="o">]</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-20">小结</h3>

<ul>
  <li>TypeScript 中的函数重载允许你描述函数的参数类型和返回类型之间的关系。</li>
</ul>

<h1 id="section-5-类">Section 5. 类</h1>

<h2 id="类">类</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-class/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的类。</p>

<h3 id="typescript-中的类介绍">TypeScript 中的类介绍</h3>

<p>JavaScript 不像其他编程语言，如 <code class="language-plaintext highlighter-rouge">Java</code> 和 <code class="language-plaintext highlighter-rouge">C#</code> ，有类的概念，在 ES5 中，你可以通过构造函数和 <a href="https://zh.javascript.info/prototype-inheritance">原型继承</a> 来创建一个“类”。比如要创建一个有 <code class="language-plaintext highlighter-rouge">ssn</code>，<code class="language-plaintext highlighter-rouge">firstName</code> 和 <code class="language-plaintext highlighter-rouge">lastName</code> 三个属性的 <code class="language-plaintext highlighter-rouge">Person</code> 类，你可以使用如下所示的构造函数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">Person</span><span class="p">(</span><span class="nx">ssn</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">ssn</span> <span class="o">=</span> <span class="nx">ssn</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="nx">firstName</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="nx">lastName</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>接下来，定义一个原型方法，通过连接 <code class="language-plaintext highlighter-rouge">firstName</code> 和 <code class="language-plaintext highlighter-rouge">lastName</code> 属性值的方式来获得人名全称：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nx">Person</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getFullName</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>然后可以通过 <code class="language-plaintext highlighter-rouge">Person</code> “类”创建一个新的对象：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">'</span><span class="s1">171-28-0926</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">getFullName</span><span class="p">());</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它会在控制台上打印出下面的信息：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>John Doe
</pre></td></tr></tbody></table></code></pre></div></div>

<p><a href="https://zh.javascript.info/class">ES6 允许你定义一个类</a>，它是创建对应的构造函数和原型继承的语法糖：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="nx">ssn</span><span class="p">;</span>
  <span class="nx">firstName</span><span class="p">;</span>
  <span class="nx">lastName</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="nx">ssn</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ssn</span> <span class="o">=</span> <span class="nx">ssn</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="nx">firstName</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="nx">lastName</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在上面类的语法中，构造函数已经被明确定义在类中。接下来增加 <code class="language-plaintext highlighter-rouge">getFullName()</code> 方法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="nx">ssn</span><span class="p">;</span>
  <span class="nx">firstName</span><span class="p">;</span>
  <span class="nx">lastName</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="nx">ssn</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ssn</span> <span class="o">=</span> <span class="nx">ssn</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="nx">firstName</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="nx">lastName</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">getFullName</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>使用 <code class="language-plaintext highlighter-rouge">Person</code> 类和使用 <code class="language-plaintext highlighter-rouge">Person</code> 构造函数创建的对象是一样的：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">'</span><span class="s1">171-28-0926</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">getFullName</span><span class="p">());</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>TypeScript 中的类给它的属性和方法增加了 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/1-type-annotations.html">类型注释</a>。下面演示了 TypeScript 中的 <code class="language-plaintext highlighter-rouge">Person</code> 类的使用方法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="nl">ssn</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="nx">ssn</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ssn</span> <span class="o">=</span> <span class="nx">ssn</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="nx">firstName</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="nx">lastName</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">getFullName</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>当你给类的属性，构造函数和方法增加类型注释，TypeScript 编译器会进行对应的类型检查。例如，你不能把 <code class="language-plaintext highlighter-rouge">ssn</code> 初始化为一个 <code class="language-plaintext highlighter-rouge">number</code> 类型的值，下面的代码会抛出错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="mi">171280926</span><span class="p">,</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-21">小结</h3>

<ul>
  <li>在 TypeScript 中使用 <code class="language-plaintext highlighter-rouge">class</code> 关键字定义类；</li>
  <li>TypeScript 给 ES6 类的语法添加类型注释，让类的使用更具有健壮性。</li>
</ul>

<h2 id="访问修饰符">访问修饰符</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-access-modifiers/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的访问修饰符。</p>

<p>访问修饰符改变 <a href="https://cody1991.github.io/TypeScript-Tutorial/5-classes/1-class.html">类</a> 中属性和方法的可见性，TypeScript 提供了三个访问修饰符：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">private</code></li>
  <li><code class="language-plaintext highlighter-rouge">protected</code></li>
  <li><code class="language-plaintext highlighter-rouge">public</code></li>
</ul>

<p>注意，TypeScript 在编译时而不是在运行时控制属性和方法的可见性。</p>

<h3 id="private-修饰符">private 修饰符</h3>

<p><code class="language-plaintext highlighter-rouge">private</code> 修饰符限制了属性和方法只在当前类中可见，这意味着当给方法或属性添加了 <code class="language-plaintext highlighter-rouge">private</code> 修饰符后，只能在当前类中访问，在当前类外访问私有属性和方法都会在编译时抛出错误提示。</p>

<p>下面的例子演示如何给 <code class="language-plaintext highlighter-rouge">Person</code> 类中的 <code class="language-plaintext highlighter-rouge">snn</code>, <code class="language-plaintext highlighter-rouge">firstName</code> 和 <code class="language-plaintext highlighter-rouge">lastName</code> 属性增加 <code class="language-plaintext highlighter-rouge">private</code> 修饰符：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">ssn</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">private</span> <span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">private</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>添加了 <code class="language-plaintext highlighter-rouge">private</code> 修饰符以后，你可以在构造函数或者 <code class="language-plaintext highlighter-rouge">Person</code> 类的方法中访问 <code class="language-plaintext highlighter-rouge">ssn</code> 属性，比如：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">ssn</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">private</span> <span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">private</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="nx">ssn</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ssn</span> <span class="o">=</span> <span class="nx">ssn</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="nx">firstName</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="nx">lastName</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">getFullName</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面尝试在 <code class="language-plaintext highlighter-rouge">Person</code> 类外访问 <code class="language-plaintext highlighter-rouge">ssn</code> 属性：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">'</span><span class="s1">153-07-3130</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">ssn</span><span class="p">);</span> <span class="c1">// compile error</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="public-修饰符">public 修饰符</h3>

<p><code class="language-plaintext highlighter-rouge">public</code> 修饰符允许在任何位置访问类的属性和方法，如果没有给属性和方法指定任何的修饰符，默认是 <code class="language-plaintext highlighter-rouge">public</code> 修饰符。</p>

<p>下面显示地为 <code class="language-plaintext highlighter-rouge">Person</code> 类中的 <code class="language-plaintext highlighter-rouge">getFullName()</code> 方法添加 <code class="language-plaintext highlighter-rouge">public</code> 修饰符：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="c1">// ...</span>
  <span class="k">public</span> <span class="nx">getFullName</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它的效果和省略 <code class="language-plaintext highlighter-rouge">public</code> 关键字是一样的。</p>

<h3 id="protected-修饰符">protected 修饰符</h3>

<p><code class="language-plaintext highlighter-rouge">protected</code> 修饰符允许一个类的属性和方法在当前类或者当前类的子类中被访问。当一个类（子类）从另外一个类（父类）继承时，它是父类的子类。如果你尝试从其他任何地方访问 <code class="language-plaintext highlighter-rouge">protected</code> 属性，TypeScript 编译器将抛出错误提示。</p>

<p>通过 <code class="language-plaintext highlighter-rouge">protected</code> 关键字给方法和属性添加 <code class="language-plaintext highlighter-rouge">protected</code> 修饰符，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="k">protected</span> <span class="nx">ssn</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="c1">// other code</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">ssn</code> 属性现在是受保护的，在 <code class="language-plaintext highlighter-rouge">Person</code> 类和任何继承 <code class="language-plaintext highlighter-rouge">Person</code> 类的子类中都可以访问它，可以从 <a href="https://zh.javascript.info/class-inheritance">类继承</a> 中学到更多关于继承的知识。</p>

<p><code class="language-plaintext highlighter-rouge">Person</code> 类声明了两个私有属性和一个受保护的属性，构造函数使用接受到的三个参数对它们进行初始化。</p>

<p>为了让代码看起来更加简单，TypeScript 允许你在构造函数中同时声明和初始化属性，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span>
    <span class="k">protected</span> <span class="nx">ssn</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ssn</span> <span class="o">=</span> <span class="nx">ssn</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="nx">firstName</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="nx">lastName</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">getFullName</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>当你考虑属性和方法的可见性，最好给它们添加最低可见性的访问修饰符，即 <code class="language-plaintext highlighter-rouge">private</code> 修饰符。</p>

<h3 id="小结-22">小结</h3>

<ul>
  <li>TypeScript 给属性和方法提供了三种访问修饰符：<code class="language-plaintext highlighter-rouge">private</code>, <code class="language-plaintext highlighter-rouge">protected</code> 和 <code class="language-plaintext highlighter-rouge">public</code> 修饰符；</li>
  <li><code class="language-plaintext highlighter-rouge">private</code> 修饰符只有在当前类中可以访问；</li>
  <li><code class="language-plaintext highlighter-rouge">protected</code> 修饰符允许在当前类和当前类的子类中可以访问；</li>
  <li><code class="language-plaintext highlighter-rouge">public</code> 修饰符在任何地方都可以访问。</li>
</ul>

<h2 id="只读属性">只读属性</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-readonly/">原文地址</a></p>

<p>在本教程中，你将学习如何使用 TypeScript 中的只读访问修饰符，它可以把类的属性标记为不可变属性。</p>

<p>TypeScript 提供了只读访问修饰符允许你把类的属性标记为不可变属性。只能在下面两个位置中给属性添加只读属性：</p>

<ul>
  <li>属性定义的地方；</li>
  <li>当前类的构造函数中。</li>
</ul>

<p>要将属性标记为不可变属性，你需要使用 <code class="language-plaintext highlighter-rouge">readonly</code> 关键字，下面演示了如何在 <code class="language-plaintext highlighter-rouge">Person</code> 类中声明只读属性：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="k">readonly</span> <span class="nx">birthDate</span><span class="p">:</span> <span class="nb">Date</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="nx">birthDate</span><span class="p">:</span> <span class="nb">Date</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">birthDate</span> <span class="o">=</span> <span class="nx">birthDate</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">birthdate</code> 是一个只读属性，它在 <code class="language-plaintext highlighter-rouge">Person</code> 类的构造函数中进行初始化。下面尝试给 <code class="language-plaintext highlighter-rouge">birthDate</code> 属性重新赋值，抛出如下所示的错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">1990</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">25</span><span class="p">));</span>
<span class="nx">person</span><span class="p">.</span><span class="nx">birthDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">1991</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">25</span><span class="p">);</span> <span class="c1">// Compile error</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>和其他 <a href="https://cody1991.github.io/TypeScript-Tutorial/5-classes/2-access-modifiers.html">访问修饰符</a> 一样，你可以在构造函数中同时声明和初始化只读属性，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">readonly</span> <span class="nx">birthDate</span><span class="p">:</span> <span class="nb">Date</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">birthDate</span> <span class="o">=</span> <span class="nx">birthDate</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="readonly-vs-const">Readonly vs const</h3>

<p>下面列出了 <code class="language-plaintext highlighter-rouge">readonly</code> 和 <code class="language-plaintext highlighter-rouge">const</code> 之间不同点：</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th><code class="language-plaintext highlighter-rouge">readonly</code></th>
      <th><code class="language-plaintext highlighter-rouge">const</code></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>用于</td>
      <td>类的属性</td>
      <td>变量</td>
    </tr>
    <tr>
      <td>初始化</td>
      <td>声明属性的时候或者在当前类构造函数中</td>
      <td>声明变量的时候</td>
    </tr>
  </tbody>
</table>

<h3 id="小结-23">小结</h3>

<ul>
  <li>使用只读访问修饰符把类的属性标记为不可变属性；</li>
  <li>只读访问修饰必须在声明属性的时候或者在当前类构造函数中进行初始化。</li>
</ul>

<h2 id="getter--setter">Getter / Setter</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-getters-setters/">原文地址</a></p>

<p>在本教程中，你将学习如何使用 TypeScript 中的 getter 方法和 setter 方法。</p>

<h3 id="typescript-中的-getter-和-setter-方法介绍">TypeScript 中的 getter 和 setter 方法介绍</h3>

<p>下面展示了一个简单的 <code class="language-plaintext highlighter-rouge">Person</code> 类，它只有三个属性：<code class="language-plaintext highlighter-rouge">age</code>, <code class="language-plaintext highlighter-rouge">firstName</code> 和 <code class="language-plaintext highlighter-rouge">lastName</code>。</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="k">public</span> <span class="nx">age</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="k">public</span> <span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">public</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>要访问 <code class="language-plaintext highlighter-rouge">Person</code> 类的属性，可以这么做：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>
<span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">26</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>假设你将一个来自用户输入的值赋值给 <code class="language-plaintext highlighter-rouge">age</code> 属性：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">inputAge</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">inputAge</code> 变量可以是任意数字，为了保证年龄的有效性，可以在赋值前进行检查：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">if</span> <span class="p">(</span><span class="nx">inputAge</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">inputAge</span> <span class="o">&lt;</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">inputAge</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>但是到处使用这个检查语句的话是冗余乏味的，为了避免重复检查，可以使用 <code class="language-plaintext highlighter-rouge">getter</code> 和 <code class="language-plaintext highlighter-rouge">setter</code> 方法，<code class="language-plaintext highlighter-rouge">getter</code> 和 <code class="language-plaintext highlighter-rouge">setter</code> 方法可以控制类属性的访问方式。对于每个属性来说：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">getter</code> 方法返回属性的值，<code class="language-plaintext highlighter-rouge">getter</code> 方法也被称为 <code class="language-plaintext highlighter-rouge">accessor</code> 方法；</li>
  <li><code class="language-plaintext highlighter-rouge">setter</code> 方法更新属性的值，<code class="language-plaintext highlighter-rouge">setter</code> 方法也被称为 <code class="language-plaintext highlighter-rouge">mutator</code> 方法。</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">getter</code> 方法以 <code class="language-plaintext highlighter-rouge">get</code> 关键字开头，而 <code class="language-plaintext highlighter-rouge">setter</code> 方法以 <code class="language-plaintext highlighter-rouge">set</code> 关键字开头：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">_age</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="k">private</span> <span class="nx">_firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">private</span> <span class="nx">_lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="c1">// 译者注：原教程没有写 constructor 构造函数，TypeScript 会报错，这里补充上</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">age</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_firstName</span> <span class="o">=</span> <span class="nx">firstName</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_lastName</span> <span class="o">=</span> <span class="nx">lastName</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="kd">get</span> <span class="nx">age</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_age</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="kd">set</span> <span class="nx">age</span><span class="p">(</span><span class="nx">theAge</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">theAge</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">theAge</span> <span class="o">&gt;=</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">The age is invalid</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_age</span> <span class="o">=</span> <span class="nx">theAge</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="nx">getFullName</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">_firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">_lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它是这样工作的：</p>

<ul>
  <li>首先，把 <code class="language-plaintext highlighter-rouge">age</code>, <code class="language-plaintext highlighter-rouge">firstName</code> 和 <code class="language-plaintext highlighter-rouge">lastName</code> 属性的访问修饰符从 <code class="language-plaintext highlighter-rouge">public</code> 更改为 <code class="language-plaintext highlighter-rouge">private</code>；</li>
  <li>接下来，把 <code class="language-plaintext highlighter-rouge">age</code> 属性更改为 <code class="language-plaintext highlighter-rouge">_age</code>；</li>
  <li>第三，为 <code class="language-plaintext highlighter-rouge">_age</code> 属性添加 <code class="language-plaintext highlighter-rouge">getter</code> 和 <code class="language-plaintext highlighter-rouge">setter</code> 方法，在 <code class="language-plaintext highlighter-rouge">setter</code> 方法中，在用户输入的年龄变量值赋值给 <code class="language-plaintext highlighter-rouge">_age</code> 属性之前，检查变量值是否有效的。</li>
</ul>

<p>现在，你可以通过下面的方式访问 <code class="language-plaintext highlighter-rouge">age</code> 的 <code class="language-plaintext highlighter-rouge">setter</code> 方法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>
<span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>注意，调用 <code class="language-plaintext highlighter-rouge">setter</code> 方法不像常规的方法调用一样，方法名没有加上括号。当你调用 <code class="language-plaintext highlighter-rouge">person.age</code> 的时候，<code class="language-plaintext highlighter-rouge">age</code> 的 <code class="language-plaintext highlighter-rouge">setter</code> 方法会被调用，如果你设置了一个无效的 <code class="language-plaintext highlighter-rouge">age</code> 值，<code class="language-plaintext highlighter-rouge">setter</code> 方法会抛出错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>Error: The age is invalid
</pre></td></tr></tbody></table></code></pre></div></div>

<p>当你访问 <code class="language-plaintext highlighter-rouge">person.age</code> 的时候，<code class="language-plaintext highlighter-rouge">age</code> 的 <code class="language-plaintext highlighter-rouge">getter</code> 方法会被调用：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面给 <code class="language-plaintext highlighter-rouge">firstName</code> 和 <code class="language-plaintext highlighter-rouge">lastName</code> 属性添加了 <code class="language-plaintext highlighter-rouge">getter</code> 和 <code class="language-plaintext highlighter-rouge">setter</code> 方法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">_age</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="k">private</span> <span class="nx">_firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">private</span> <span class="nx">_lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="c1">// 译者注：原教程没有写 constructor 构造函数，TypeScript 会报错，这里补充上</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">age</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_firstName</span> <span class="o">=</span> <span class="nx">firstName</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_lastName</span> <span class="o">=</span> <span class="nx">lastName</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="kd">get</span> <span class="nx">age</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_age</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="kd">set</span> <span class="nx">age</span><span class="p">(</span><span class="nx">theAge</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">theAge</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">theAge</span> <span class="o">&gt;=</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">The age is invalid</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_age</span> <span class="o">=</span> <span class="nx">theAge</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="kd">get</span> <span class="nx">firstName</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_firstName</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="kd">set</span> <span class="nx">firstName</span><span class="p">(</span><span class="nx">theFirstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">theFirstName</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Invalid first name.</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_firstName</span> <span class="o">=</span> <span class="nx">theFirstName</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="kd">get</span> <span class="nx">lastName</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_lastName</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="kd">set</span> <span class="nx">lastName</span><span class="p">(</span><span class="nx">theLastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">theLastName</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Invalid last name.</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_lastName</span> <span class="o">=</span> <span class="nx">theLastName</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="nx">getFullName</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="更多的-getter--setter-方法案例">更多的 getter / setter 方法案例</h3>

<p>正如从代码中所看到的，在给属性赋值之前使用 <code class="language-plaintext highlighter-rouge">setter</code> 方法进行数据验证是非常有用的，此外你还可以进行其他复杂的逻辑处理。</p>

<p>下面演示了如何创建 <code class="language-plaintext highlighter-rouge">fullName</code> 的 <code class="language-plaintext highlighter-rouge">getter</code> 和 <code class="language-plaintext highlighter-rouge">setter</code> 方法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="c1">// ... other code</span>
  <span class="k">public</span> <span class="kd">get</span> <span class="nx">fullName</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="kd">set</span> <span class="nx">fullName</span><span class="p">(</span><span class="nx">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">parts</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Invalid name format: first last</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它是这样工作的：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">getter</code> 方法返回 <code class="language-plaintext highlighter-rouge">firstName</code> 和 <code class="language-plaintext highlighter-rouge">lastName</code> 拼接后的字符串；</li>
  <li><code class="language-plaintext highlighter-rouge">setter</code> 方法接受一个字符串作为 <code class="language-plaintext highlighter-rouge">fullName</code> 变量，它的格式如下：第一个部分的字符串赋值给 <code class="language-plaintext highlighter-rouge">firstName</code> 属性，第二个部分的字符串赋值给 <code class="language-plaintext highlighter-rouge">lastName</code> 属性。</li>
</ul>

<p>现在，你可以像普通的类属性一样访问 <code class="language-plaintext highlighter-rouge">fullName</code> 的 <code class="language-plaintext highlighter-rouge">setter</code> 和 <code class="language-plaintext highlighter-rouge">getter</code> 属性：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>
<span class="nx">person</span><span class="p">.</span><span class="nx">fullname</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">John Doe</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">fullName</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-24">小结</h3>

<ul>
  <li>使用 TypeScript 中的 <code class="language-plaintext highlighter-rouge">getter</code> / <code class="language-plaintext highlighter-rouge">setter</code> 方法来控制类属性的访问方式；</li>
  <li><code class="language-plaintext highlighter-rouge">getter</code> / <code class="language-plaintext highlighter-rouge">setter</code> 方法也被称为 <code class="language-plaintext highlighter-rouge">accessor</code> / <code class="language-plaintext highlighter-rouge">mutator</code> 方法。</li>
</ul>

<h2 id="类继承">类继承</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-inheritance/">原文地址</a></p>

<p>在本教程中，你将了解 TypeScript 中继承的概念，以及如何使用它来复用其他类的功能。</p>

<h3 id="typescript-中的继承介绍">TypeScript 中的继承介绍</h3>

<p><a href="https://cody1991.github.io/TypeScript-Tutorial/5-classes/1-class.html">类</a> 可以让其他的类复用它的属性和方法，这在 TypeScript 中被称为继承。继承其他类的属性和方法的类被称为子类，被继承的类被称为父类，这些名字来自自然中孩子继承父母基因的说法。继承让你可以复用现有类的功能，而不需要重写一遍。</p>

<p>JavaScript 使用 <a href="https://cody1991.github.io/TypeScript-Tutorial/5-classes/1-class.html">原型继承</a> 的方式实现类，而非 <code class="language-plaintext highlighter-rouge">Java</code> 和 <code class="language-plaintext highlighter-rouge">C#</code> 语言的类继承方式。 <code class="language-plaintext highlighter-rouge">ES6</code> 引入的 <a href="https://cody1991.github.io/TypeScript-Tutorial/5-classes/1-class.html">类</a> 语法是 JavaScript 原型继承的语法糖，TypeScript 也支持这种语法。</p>

<p>假设有下面一个 <code class="language-plaintext highlighter-rouge">Person</code> 类：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="k">private</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="nx">firstName</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="nx">lastName</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">getFullName</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">describe</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`This is </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">.`</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>使用 <code class="language-plaintext highlighter-rouge">extends</code> 关键字继承其它类，比如下面的 <code class="language-plaintext highlighter-rouge">Employee</code> 类继承了 <code class="language-plaintext highlighter-rouge">Person</code> 类：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Employee</span> <span class="kd">extends</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="c1">//..</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">Employee</code> 是子类，而 <code class="language-plaintext highlighter-rouge">Person</code>是父类。</p>

<h3 id="构造函数">构造函数</h3>

<p>因为 <code class="language-plaintext highlighter-rouge">Person</code> 类中有一个初始化 <code class="language-plaintext highlighter-rouge">firstName</code> 和 <code class="language-plaintext highlighter-rouge">lastName</code> 属性的构造函数，你需要在 <code class="language-plaintext highlighter-rouge">Employee</code> 类的构造函数中调用父类的构造函数来初始化这些属性。要在子类的构造函数中调用父类的构造函数，可以使用 <code class="language-plaintext highlighter-rouge">super()</code> 语法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Employee</span> <span class="kd">extends</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="k">private</span> <span class="nx">jobTitle</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// call the constructor of the Person class:</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">jobTitle</span> <span class="o">=</span> <span class="nx">jobTitle</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面创建了一个 <code class="language-plaintext highlighter-rouge">Employee</code> 类的实例：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">employee</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Employee</span><span class="p">(</span><span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Front-end Developer</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>因为 <code class="language-plaintext highlighter-rouge">Employee</code> 类继承了 <code class="language-plaintext highlighter-rouge">Person</code> 类的方法和属性，你可以在 <code class="language-plaintext highlighter-rouge">employee</code> 对象上调用 <code class="language-plaintext highlighter-rouge">getFullName()</code> 和 <code class="language-plaintext highlighter-rouge">describe()</code> 方法，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">employee</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Employee</span><span class="p">(</span><span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Web Developer</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">employee</span><span class="p">.</span><span class="nx">getFullName</span><span class="p">());</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">employee</span><span class="p">.</span><span class="nx">describe</span><span class="p">());</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>John Doe
This is John Doe.
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="方法重载-1">方法重载</h3>

<p>当你调用 <code class="language-plaintext highlighter-rouge">employee</code> 对象上的 <code class="language-plaintext highlighter-rouge">employee.describe()</code> 方法的时候，<code class="language-plaintext highlighter-rouge">Person</code> 类的 <code class="language-plaintext highlighter-rouge">describe()</code> 方法会被执行，显示 <code class="language-plaintext highlighter-rouge">This is John Doe</code> 信息。如果 <code class="language-plaintext highlighter-rouge">Employee</code> 类想要有属于自己的 <code class="language-plaintext highlighter-rouge">describe()</code> 方法，可以在 <code class="language-plaintext highlighter-rouge">Employee</code> 类中定义 <code class="language-plaintext highlighter-rouge">describe()</code> 方法，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Employee</span> <span class="kd">extends</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="k">private</span> <span class="nx">jobTitle</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">jobTitle</span> <span class="o">=</span> <span class="nx">jobTitle</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">describe</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">super</span><span class="p">.</span><span class="nx">describe</span><span class="p">()</span> <span class="o">+</span> <span class="s2">`I'm a </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">jobTitle</span><span class="p">}</span><span class="s2">.`</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在 <code class="language-plaintext highlighter-rouge">describe()</code> 方法中，我们使用 <code class="language-plaintext highlighter-rouge">super.methodInParentClass()</code> 的语法调用父类的 <code class="language-plaintext highlighter-rouge">describe()</code> 方法。如果你在 <code class="language-plaintext highlighter-rouge">employee</code> 对象上调用 <code class="language-plaintext highlighter-rouge">describe()</code> 方法，<code class="language-plaintext highlighter-rouge">Employee</code> 类的 <code class="language-plaintext highlighter-rouge">describe()</code> 方法会被调用：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">employee</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Employee</span><span class="p">(</span><span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Web Developer</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">employee</span><span class="p">.</span><span class="nx">describe</span><span class="p">());</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>This is John Doe.I<span class="s1">'m a Web Developer.
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-25">小结</h3>

<ul>
  <li>使用 <code class="language-plaintext highlighter-rouge">extends</code> 关键字允许一个类继承另外一个类；</li>
  <li>在子类的构造函数中使用 <code class="language-plaintext highlighter-rouge">super</code> 方法调用父类的构造函数，在子类的方法中使用 <code class="language-plaintext highlighter-rouge">super.methodInParentClass()</code> 语法调用父类的 <code class="language-plaintext highlighter-rouge">methodInParentClass()</code> 方法。</li>
</ul>

<h2 id="静态属性和方法">静态属性和方法</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-static-methods-and-properties/">原文地址</a></p>

<p>在本教程中，你将了解 TypeScript 中的静态属性和方法。</p>

<h3 id="静态属性">静态属性</h3>

<p>与实例属性不同，静态属性是类所有实例之间共享的属性。要声明静态属性，可以使用 <code class="language-plaintext highlighter-rouge">static</code> 关键字，要访问静态属性，可以使用 <code class="language-plaintext highlighter-rouge">className.propertyName</code> 语法，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Employee</span> <span class="p">{</span>
  <span class="k">static</span> <span class="nx">headcount</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span>
    <span class="k">private</span> <span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">jobTitle</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="nx">Employee</span><span class="p">.</span><span class="nx">headcount</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在本例中，<code class="language-plaintext highlighter-rouge">headcount</code> 是一个初始值为 <code class="language-plaintext highlighter-rouge">0</code> 的静态属性，每创建一个新的实例，它的值就会加一。下面的例子创建了两个 <code class="language-plaintext highlighter-rouge">Employee</code> 实例，打印 <code class="language-plaintext highlighter-rouge">headcount</code> 属性的值，返回了预期中的 <code class="language-plaintext highlighter-rouge">2</code>：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">john</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Employee</span><span class="p">(</span><span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Front-end Developer</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">jane</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Employee</span><span class="p">(</span><span class="dl">'</span><span class="s1">Jane</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Back-end Developer</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Employee</span><span class="p">.</span><span class="nx">headcount</span><span class="p">);</span> <span class="c1">// 2</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="静态方法">静态方法</h3>

<p>与静态属性一样，静态方法也是类所有实例之间共享的方法，要声明一个静态方法，需要在方法名前添加 <code class="language-plaintext highlighter-rouge">static</code> 关键字，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Employee</span> <span class="p">{</span>
  <span class="k">private</span> <span class="k">static</span> <span class="nx">headcount</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span>
    <span class="k">private</span> <span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">jobTitle</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="nx">Employee</span><span class="p">.</span><span class="nx">headcount</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="k">static</span> <span class="nx">getHeadcount</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Employee</span><span class="p">.</span><span class="nx">headcount</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中：</p>

<ul>
  <li>首先，将 <code class="language-plaintext highlighter-rouge">headcount</code> 静态属性的访问修饰符从 <code class="language-plaintext highlighter-rouge">public</code> 更改为 <code class="language-plaintext highlighter-rouge">private</code>，这样在该类之外就不能修改它的值，除非创建一个新的 <code class="language-plaintext highlighter-rouge">Employee</code> 实例；</li>
  <li>然后，添加 <code class="language-plaintext highlighter-rouge">getHeadcount()</code> 静态方法，该方法返回 <code class="language-plaintext highlighter-rouge">headcount</code> 静态属性的值。</li>
</ul>

<p>你可以使用 <code class="language-plaintext highlighter-rouge">className.staticMethod()</code> 的语法来调用静态方法，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">john</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Employee</span><span class="p">(</span><span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Front-end Developer</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">jane</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Employee</span><span class="p">(</span><span class="dl">'</span><span class="s1">Jane</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Back-end Developer</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Employee</span><span class="p">.</span><span class="nx">getHeadcount</span><span class="p">);</span> <span class="c1">// 2</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>实际上，你会发现比如 <code class="language-plaintext highlighter-rouge">Math</code> 对象有很多的静态属性和方法，比如 <code class="language-plaintext highlighter-rouge">PI</code> 和 <code class="language-plaintext highlighter-rouge">E</code> 等等的静态属性， <code class="language-plaintext highlighter-rouge">abs()</code> 和 <code class="language-plaintext highlighter-rouge">round()</code> 等等的静态方法。</p>

<h3 id="小结-26">小结</h3>

<ul>
  <li>静态属性和静态方法是类所有实例之间共享的；</li>
  <li>在一个属性或者方法名前面添加 <code class="language-plaintext highlighter-rouge">static</code> 关键字，可以使其成为静态属性或者静态方法。</li>
</ul>

<h2 id="抽象方法">抽象方法</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-abstract-classes/">原文地址</a></p>

<p>在本教程中，你将了解 TypeScript 中的抽象类。</p>

<h3 id="typescript-中的抽象类介绍">TypeScript 中的抽象类介绍</h3>

<p>抽象类通常用于定义要扩展的派生类的共同行为，和常规的 <a href="https://cody1991.github.io/TypeScript-Tutorial/5-classes/1-class.html">类</a> 不同的是，抽象类不能直接实例化。要声明一个抽象类，可以使用 <code class="language-plaintext highlighter-rouge">abstract</code> 关键字：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">abstract</span> <span class="kd">class</span> <span class="nx">Employee</span> <span class="p">{</span>
  <span class="c1">//...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>通常，一个抽象类包含一个或者多个的抽象方法。抽象方法不包含具体的实现，它只定义方法的签名，不包括方法体，而抽象方法必须在派生类中实现。</p>

<p>下面是一个拥有 <code class="language-plaintext highlighter-rouge">getSalary()</code> 抽象方法的 <code class="language-plaintext highlighter-rouge">Employee</code> 抽象类：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kd">abstract</span> <span class="kd">class</span> <span class="nx">Employee</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="k">private</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{}</span>
  <span class="kd">abstract</span> <span class="nx">getSalary</span><span class="p">():</span> <span class="kr">number</span><span class="p">;</span>
  <span class="kd">get</span> <span class="nx">fullName</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">compensationStatement</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">fullName</span><span class="p">}</span><span class="s2"> makes </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">getSalary</span><span class="p">()}</span><span class="s2"> a month.`</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在 <code class="language-plaintext highlighter-rouge">Employee</code> 类中：</p>

<ul>
  <li>构造函数声明了 <code class="language-plaintext highlighter-rouge">firstName</code> 和 <code class="language-plaintext highlighter-rouge">lastName</code> 属性；</li>
  <li><code class="language-plaintext highlighter-rouge">getSalary()</code> 方法是一个抽象方法，派生类将根据雇员的类型来实现具体的逻辑；</li>
  <li><code class="language-plaintext highlighter-rouge">getFullName()</code> 和 <code class="language-plaintext highlighter-rouge">compensationStatement()</code> 方法有具体的实现，注意 <code class="language-plaintext highlighter-rouge">compensationStatement()</code> 方法会调用 <code class="language-plaintext highlighter-rouge">getSalary()</code> 方法。</li>
</ul>

<p>因为 <code class="language-plaintext highlighter-rouge">Employee</code> 是抽象类，不能使用它创建实例，下面的语句会抛出错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">employee</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Employee</span><span class="p">(</span><span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>error TS2511: Cannot create an instance of an abstract class.
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面的 <code class="language-plaintext highlighter-rouge">FullTimeEmployee</code> 类继承了 <code class="language-plaintext highlighter-rouge">Employee</code> 抽象类：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">FullTimeEmployee</span> <span class="kd">extends</span> <span class="nx">Employee</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="k">private</span> <span class="nx">salary</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">getSalary</span><span class="p">():</span> <span class="kr">number</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">salary</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个 <code class="language-plaintext highlighter-rouge">FullTimeEmployee</code> 类中，构造函数定义了 <code class="language-plaintext highlighter-rouge">salary</code> 属性。因为 <code class="language-plaintext highlighter-rouge">getSalary()</code> 是 <code class="language-plaintext highlighter-rouge">Employee</code> 类的抽象方法，<code class="language-plaintext highlighter-rouge">FullTimeEmployee</code> 类需要去实现这个方法。在这个例子中，这个方法没有做任何处理，直接返回 <code class="language-plaintext highlighter-rouge">salary</code> 变量的值来表示报酬的值。</p>

<p>下面的 <code class="language-plaintext highlighter-rouge">Contractor</code> 类继承了 <code class="language-plaintext highlighter-rouge">Employee</code> 抽象类：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Contractor</span> <span class="kd">extends</span> <span class="nx">Employee</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span>
    <span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
    <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">rate</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">hours</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">getSalary</span><span class="p">():</span> <span class="kr">number</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">rate</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">hours</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在 <code class="language-plaintext highlighter-rouge">Contractor</code> 类中，构造函数定义了了 <code class="language-plaintext highlighter-rouge">rate</code> 和 <code class="language-plaintext highlighter-rouge">hours</code> 属性，<code class="language-plaintext highlighter-rouge">getSalary()</code> 方法把 <code class="language-plaintext highlighter-rouge">rate</code> 和 <code class="language-plaintext highlighter-rouge">hours</code> 相乘的结果来表示报酬的值。</p>

<p>下面的例子创建了一个 <code class="language-plaintext highlighter-rouge">FullTimeEmployee</code> 类的实例和一个 <code class="language-plaintext highlighter-rouge">Contractor</code> 类的实例，然后在控制台上分别展示了它们的报酬信息：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">john</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FullTimeEmployee</span><span class="p">(</span><span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span> <span class="mi">12000</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">jane</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contractor</span><span class="p">(</span><span class="dl">'</span><span class="s1">Jane</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">160</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">john</span><span class="p">.</span><span class="nx">compensationStatement</span><span class="p">());</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">jane</span><span class="p">.</span><span class="nx">compensationStatement</span><span class="p">());</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>John Doe makes 12000 a month.
Jane Doe makes 16000 a month.
</pre></td></tr></tbody></table></code></pre></div></div>

<p>当想在一些有相互关系的类之间共享代码，使用抽象类是一个很好的方式。</p>

<h3 id="小结-27">小结</h3>

<ul>
  <li>抽象类不能被实例化；</li>
  <li>一个抽象类至少有一个抽象方法；</li>
  <li>使用抽象类的时候，需要继承它的同时实现类中所有的抽象方法。</li>
</ul>

<h1 id="section-6-接口">Section 6. 接口</h1>

<h2 id="接口">接口</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-interface/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的接口，以及如何使用它们执行类型检查。</p>

<h3 id="typescript-中的接口介绍">TypeScript 中的接口介绍</h3>

<p>TypeScript 中的接口制定代码中的约束，也为类型检查提供显式的名称。让我们从一个简单的例子开始：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">getFullName</span><span class="p">(</span><span class="nx">person</span><span class="p">:</span> <span class="p">{</span> <span class="nl">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">lastName</span><span class="p">:</span> <span class="kr">string</span> <span class="p">})</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="nx">person</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">person</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">getFullName</span><span class="p">(</span><span class="nx">person</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>John Doe
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，TypeScript 编译器检查传递给 <code class="language-plaintext highlighter-rouge">getFullName()</code> 函数的参数，如果参数有 <code class="language-plaintext highlighter-rouge">firstName</code> 和 <code class="language-plaintext highlighter-rouge">lastName</code> 这两个字符串类型的属性，那么可以通过 TypeScript 的类型检查，否则会抛出错误提示。</p>

<p>通过代码可以清楚的发现，函数参数的 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/1-type-annotations.html">类型注释</a> 让我们的代码变得难以阅读。为了解决这个问题，TypeScript 引入了接口的概念。</p>

<p>下面定义了一个 <code class="language-plaintext highlighter-rouge">Person</code> 接口，它有两个类型为字符串的属性：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="nl">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>按照惯例，接口名字都使用驼峰式，即使用大写字母分隔命名中的单词，比如 <code class="language-plaintext highlighter-rouge">Person</code>, <code class="language-plaintext highlighter-rouge">UserProfile</code> 和 <code class="language-plaintext highlighter-rouge">FullName</code>。</p>

<p>定义好 <code class="language-plaintext highlighter-rouge">Person</code> 接口之后你可以把它作为类型使用，也可以使用它为函数参数添加注释：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">getFullName</span><span class="p">(</span><span class="nx">person</span><span class="p">:</span> <span class="nx">Person</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="nx">person</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">person</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">john</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">getFullName</span><span class="p">(</span><span class="nx">john</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>现在的代码比之前容易阅读很多。</p>

<p><code class="language-plaintext highlighter-rouge">getFullName()</code> 函数接受任何具有 <code class="language-plaintext highlighter-rouge">firstName</code> 和 <code class="language-plaintext highlighter-rouge">lastName</code> 两个字符串类型的属性的对象作为参数，而它也不需要恰好只有这两个属性，如下所示，定义了一个具有四个属性的对象：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">jane</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Jane</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">middleName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">K.</span><span class="dl">'</span>
  <span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">age</span><span class="p">:</span> <span class="mi">22</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>因为 <code class="language-plaintext highlighter-rouge">jane</code> 对象具有 <code class="language-plaintext highlighter-rouge">firstName</code> 和 <code class="language-plaintext highlighter-rouge">lastName</code> 两个字符串类型的属性，你可以把它传入到 <code class="language-plaintext highlighter-rouge">getFullName()</code> 函数中，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">fullName</span> <span class="o">=</span> <span class="nx">getFullName</span><span class="p">(</span><span class="nx">jane</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">fullName</span><span class="p">);</span> <span class="c1">// Jane Doe</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="可选属性">可选属性</h3>

<p>接口可以拥有可选属性，要声明一个可选属性，你需要在属性名后添加 (<code class="language-plaintext highlighter-rouge">?</code>) 符号，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="nl">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">middleName</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">Person</code> 接口有两个必选属性和一个可选属性。下面的例子演示了 <code class="language-plaintext highlighter-rouge">Person</code> 接口如何在 <code class="language-plaintext highlighter-rouge">getFullName()</code> 函数中使用：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">getFullName</span><span class="p">(</span><span class="nx">person</span><span class="p">:</span> <span class="nx">Person</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">middleName</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="nx">person</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">person</span><span class="p">.</span><span class="nx">middleName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">person</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="nx">person</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">person</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="只读属性-1">只读属性</h3>

<p>如果属性只有在对象创建的时候可以被修改，可以在属性名前面加上 <code class="language-plaintext highlighter-rouge">readonly</code> 关键字：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">Person</span> <span class="p">{</span>
  <span class="k">readonly</span> <span class="nx">ssn</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">person</span><span class="p">:</span> <span class="nx">Person</span><span class="p">;</span>
<span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">ssn</span><span class="p">:</span> <span class="dl">'</span><span class="s1">171-28-0926</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">ssn</code> 属性不能被修改：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">person</span><span class="p">.</span><span class="nx">ssn</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">171-28-0000</span><span class="dl">'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>error TS2540: Cannot assign to <span class="s1">'ssn'</span> because it is a read-only property.
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="函数类型-1">函数类型</h3>

<p>除了描述对象的属性外，接口也可以描述 <a href="https://cody1991.github.io/TypeScript-Tutorial/4-functions/2-function-types.html">函数类型</a>。要描述函数类型的话，你需要将接口赋值成以下形式：</p>

<ul>
  <li>包含类型的参数列表</li>
  <li>包含返回类型</li>
</ul>

<p>如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">StringFormat</span> <span class="p">{</span>
  <span class="p">(</span><span class="nx">str</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">isUpper</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">):</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>现在，你可以使用这个函数类型接口了。下面演示如何声明具有函数类型的变量，并为其赋值：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">format</span><span class="p">:</span> <span class="nx">StringFormat</span><span class="p">;</span>

<span class="nx">format</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">str</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">isUpper</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">isUpper</span> <span class="p">?</span> <span class="nx">str</span><span class="p">.</span><span class="nx">toLocaleUpperCase</span><span class="p">()</span> <span class="p">:</span> <span class="nx">str</span><span class="p">.</span><span class="nx">toLocaleLowerCase</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="dl">'</span><span class="s1">hi</span><span class="dl">'</span><span class="p">,</span> <span class="kc">true</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>HI
</pre></td></tr></tbody></table></code></pre></div></div>

<p>注意，参数名不需要匹配函数签名中的参数名字，下面的例子和上面的例子是等价的：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">format</span><span class="p">:</span> <span class="nx">StringFormat</span><span class="p">;</span>

<span class="nx">format</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">src</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">upper</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">upper</span> <span class="p">?</span> <span class="nx">src</span><span class="p">.</span><span class="nx">toLocaleUpperCase</span><span class="p">()</span> <span class="p">:</span> <span class="nx">src</span><span class="p">.</span><span class="nx">toLocaleLowerCase</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="dl">'</span><span class="s1">hi</span><span class="dl">'</span><span class="p">,</span> <span class="kc">true</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">StringFormat</code> 接口确保所有实现了它的函数调用方传入所需的参数：一个 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/3-string.html">字符串类型</a> 的参数和一个 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/4-boolean.html">布尔值类型</a> 的参数。</p>

<p>下面的代码也可以正常的工作，即使 <code class="language-plaintext highlighter-rouge">lowerCase</code> 函数没有第二个参数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">lowerCase</span><span class="p">:</span> <span class="nx">StringFormat</span><span class="p">;</span>
<span class="nx">lowerCase</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">str</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">str</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">lowerCase</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hi</span><span class="dl">'</span><span class="p">,</span> <span class="kc">false</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>注意，第二个参数是在调用 <code class="language-plaintext highlighter-rouge">lowerCase()</code> 函数的时候传递的。</p>

<h3 id="类类型">类类型</h3>

<p>如果你使用过 <code class="language-plaintext highlighter-rouge">Java</code> 或者 <code class="language-plaintext highlighter-rouge">C#</code> 语言，你会发现接口的主要用途是定义不相关类之间的约定。例如下面的 <code class="language-plaintext highlighter-rouge">Json</code> 接口可以由任何不相关的类实现：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">Json</span> <span class="p">{</span>
  <span class="nx">toJSON</span><span class="p">():</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面声明了一个实现 <code class="language-plaintext highlighter-rouge">Json</code> 接口的类：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span> <span class="k">implements</span> <span class="nx">Json</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="k">private</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{}</span>
  <span class="nx">toJson</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在 <code class="language-plaintext highlighter-rouge">Person</code> 类中我们实现了 <code class="language-plaintext highlighter-rouge">Json</code> 接口的 <code class="language-plaintext highlighter-rouge">toJson()</code> 方法。</p>

<p>下面的例子演示了如何使用 <code class="language-plaintext highlighter-rouge">Person</code> 类：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">toJson</span><span class="p">());</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<pre><code class="language-JSON">{"firstName":"John", "lastName":"Doe"}
</code></pre>

<h3 id="小结-28">小结</h3>

<ul>
  <li>接口制定代码中的约束，也为类型检查提供显式的名称；</li>
  <li>接口可以有很多的可选属性和只读属性；</li>
  <li>接口可以作为函数类型来使用；</li>
  <li>接口经常被用作类类型来建立不相关类之间的约定。</li>
</ul>

<h2 id="扩展接口">扩展接口</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-extend-interface/">原文地址</a></p>

<p>在本教程中，你讲学习如何扩展接口，这样可以把一个接口的属性和方法复制到另外一个接口中。</p>

<h3 id="扩展一个接口的接口">扩展一个接口的接口</h3>

<p>假设有一个名为 <code class="language-plaintext highlighter-rouge">Mailable</code> 的 <a href="https://cody1991.github.io/TypeScript-Tutorial/6-interfaces/1-interface.html">接口</a>，它包含 <code class="language-plaintext highlighter-rouge">send()</code> 和 <code class="language-plaintext highlighter-rouge">queue()</code> 两个方法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">Mailable</span> <span class="p">{</span>
  <span class="nx">send</span><span class="p">(</span><span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nx">queue</span><span class="p">(</span><span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">boolean</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>然后你有很多 <a href="https://cody1991.github.io/TypeScript-Tutorial/5-classes/1-class.html">类</a> 已经实现了 <code class="language-plaintext highlighter-rouge">Mailable</code> 接口。现在，你想要在 <code class="language-plaintext highlighter-rouge">Mailable</code> 接口上添加一个新的方法， 表示它会延时发送邮件，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">later</span><span class="p">(</span><span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">after</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="k">void</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>给 <code class="language-plaintext highlighter-rouge">Mailable</code> 接口直接添加 <code class="language-plaintext highlighter-rouge">later()</code> 方法会破坏当前的代码，造成前后不兼容的问题。为了避免这个问题，你可以创建一个新的接口来扩展 <code class="language-plaintext highlighter-rouge">Mailable</code> 接口：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">FutureMailable</span> <span class="kd">extends</span> <span class="nx">Mailable</span> <span class="p">{</span>
  <span class="nx">later</span><span class="p">(</span><span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">after</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">boolean</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>使用 <code class="language-plaintext highlighter-rouge">extends</code> 关键字按照下面的语法来扩展一个接口：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">A</span> <span class="p">{</span>
  <span class="nx">a</span><span class="p">():</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">B</span> <span class="kd">extends</span> <span class="nx">A</span> <span class="p">{</span>
  <span class="nx">b</span><span class="p">():</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>接口 <code class="language-plaintext highlighter-rouge">B</code> 扩展了接口 <code class="language-plaintext highlighter-rouge">A</code>，它有两个方法 <code class="language-plaintext highlighter-rouge">a()</code> 和 <code class="language-plaintext highlighter-rouge">b()</code>。与类相似，<code class="language-plaintext highlighter-rouge">FutureMailable</code> 接口从 <code class="language-plaintext highlighter-rouge">Mailable</code> 接口继承了 <code class="language-plaintext highlighter-rouge">send()</code> 和 <code class="language-plaintext highlighter-rouge">queue()</code> 方法。</p>

<p>下面的例子演示如何实现 <code class="language-plaintext highlighter-rouge">FutureMailable</code> 接口：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Mail</span> <span class="k">implements</span> <span class="nx">FutureMailable</span> <span class="p">{</span>
  <span class="nx">later</span><span class="p">(</span><span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">after</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Send email to </span><span class="p">${</span><span class="nx">email</span><span class="p">}</span><span class="s2"> in </span><span class="p">${</span><span class="nx">after</span><span class="p">}</span><span class="s2"> ms.`</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">send</span><span class="p">(</span><span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Sent email to </span><span class="p">${</span><span class="nx">email</span><span class="p">}</span><span class="s2"> after </span><span class="p">${</span><span class="nx">after</span><span class="p">}</span><span class="s2"> ms. `</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">queue</span><span class="p">(</span><span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Queue an email to </span><span class="p">${</span><span class="nx">email</span><span class="p">}</span><span class="s2">.`</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="扩展多个接口的接口">扩展多个接口的接口</h3>

<p>一个接口可以扩展多个接口，创建所有接口的组合，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">C</span> <span class="p">{</span>
  <span class="nx">c</span><span class="p">():</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">D</span> <span class="kd">extends</span> <span class="nx">B</span><span class="p">,</span> <span class="nx">C</span> <span class="p">{</span>
  <span class="nx">d</span><span class="p">():</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，接口 <code class="language-plaintext highlighter-rouge">D</code> 扩展了 <code class="language-plaintext highlighter-rouge">B</code> 和 <code class="language-plaintext highlighter-rouge">C</code> 接口，所以 <code class="language-plaintext highlighter-rouge">D</code> 接口有 <code class="language-plaintext highlighter-rouge">B</code> 和 <code class="language-plaintext highlighter-rouge">C</code> 接口的所有方法： <code class="language-plaintext highlighter-rouge">a()</code>, <code class="language-plaintext highlighter-rouge">b()</code> 和 <code class="language-plaintext highlighter-rouge">c()</code> 方法。</p>

<h3 id="扩展类的接口">扩展类的接口</h3>

<p>TypeScript 中允许接口扩展类，在这种情况下，接口会继承类的属性和方法，此外，接口可以继承类的私有成员和受保护成员，而不仅仅是公共成员。这意味着，当接口扩展具有私有成员和保护成员的类的时候，该接口只能有该接口所扩展的类或该类的子类中实现。</p>

<p>通过这种做法，可以把接口的使用范围限制为接口所继承的类或该类的子类，如果试图从一个不是接口继承的类或该类的子类来实现接口，则会抛出错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Control</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">state</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">StatefulControl</span> <span class="kd">extends</span> <span class="nx">Control</span> <span class="p">{</span>
  <span class="nx">enable</span><span class="p">():</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">Button</span> <span class="kd">extends</span> <span class="nx">Control</span> <span class="k">implements</span> <span class="nx">StatefulControl</span> <span class="p">{</span>
  <span class="nx">enable</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nx">TextBox</span> <span class="kd">extends</span> <span class="nx">Control</span> <span class="k">implements</span> <span class="nx">StatefulControl</span> <span class="p">{</span>
  <span class="nx">enable</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nx">Label</span> <span class="kd">extends</span> <span class="nx">Control</span> <span class="p">{}</span>

<span class="c1">// Error: cannot implement</span>
<span class="kd">class</span> <span class="nx">Chart</span> <span class="k">implements</span> <span class="nx">StatefulControl</span> <span class="p">{</span>
  <span class="nx">enable</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-29">小结</h3>

<ul>
  <li>接口可以扩展一个或多个现有的接口；</li>
  <li>接口也可以扩展类，如果类包含私有成员或者受保护成员，则接口只能由该类或该类的子类实现。</li>
</ul>

<h1 id="section-7-高级类型">Section 7. 高级类型</h1>

<h2 id="交叉类型">交叉类型</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-intersection-types/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的交叉类型。</p>

<h3 id="typescript-中的交叉类型介绍">TypeScript 中的交叉类型介绍</h3>

<p>交叉类型指的是通过组合多个现有类型创建而来的新的类型，新的类型具有现有类型的所有属性。</p>

<p>使用 <code class="language-plaintext highlighter-rouge">&amp;</code> 操作符来表示组合类型，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">typeAB</span> <span class="o">=</span> <span class="nx">typeA</span> <span class="o">&amp;</span> <span class="nx">typeB</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">typeAB</code> 会有 <code class="language-plaintext highlighter-rouge">typeA</code> 和 <code class="language-plaintext highlighter-rouge">typeB</code> 的所有属性。</p>

<p>注意，联合类型使用 <code class="language-plaintext highlighter-rouge">|</code> 操作符，定义一个可以保存 <code class="language-plaintext highlighter-rouge">typeA</code> 或者 <code class="language-plaintext highlighter-rouge">typeB</code> 类型的值。</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">varName</span> <span class="o">=</span> <span class="nx">typeA</span> <span class="o">|</span> <span class="nx">typeB</span><span class="p">;</span> <span class="c1">// union type</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>假设你有三个接口：<code class="language-plaintext highlighter-rouge">BusinessPartner</code>, <code class="language-plaintext highlighter-rouge">Identity</code> 和 <code class="language-plaintext highlighter-rouge">Contact</code>：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">BusinessPartner</span> <span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">credit</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">Identity</span> <span class="p">{</span>
  <span class="nl">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">Contact</span> <span class="p">{</span>
  <span class="nl">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">phone</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面定义了两个交叉类型：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">Employee</span> <span class="o">=</span> <span class="nx">Identity</span> <span class="o">&amp;</span> <span class="nx">Contact</span><span class="p">;</span>
<span class="kd">type</span> <span class="nx">Customer</span> <span class="o">=</span> <span class="nx">BusinessPartner</span> <span class="o">&amp;</span> <span class="nx">Contact</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">Employee</code> 类包含 <code class="language-plaintext highlighter-rouge">Identity</code> 和 <code class="language-plaintext highlighter-rouge">Contact</code> 类型中的所有属性：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">Employee</span> <span class="o">=</span> <span class="nx">Identity</span> <span class="o">&amp;</span> <span class="nx">Contact</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">e</span><span class="p">:</span> <span class="nx">Employee</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">id</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John Doe</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">john.doe@example.com</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">phone</span><span class="p">:</span> <span class="dl">'</span><span class="s1">(408)-897-5684</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">Customer</code> 类型包含 <code class="language-plaintext highlighter-rouge">BusinessPartner</code> 和 <code class="language-plaintext highlighter-rouge">Contact</code> 类型中的所有属性：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">Customer</span> <span class="o">=</span> <span class="nx">BusinessPartner</span> <span class="o">&amp;</span> <span class="nx">Contact</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">c</span><span class="p">:</span> <span class="nx">Customer</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ABC Inc.</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">credit</span><span class="p">:</span> <span class="mi">1000000</span><span class="p">,</span>
  <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">sales@abcinc.com</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">phone</span><span class="p">:</span> <span class="dl">'</span><span class="s1">(408)-897-5735</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>之后，如果你想实现销售员工，你可以创建一个新的交叉类型，它包含 <code class="language-plaintext highlighter-rouge">Identity</code>, <code class="language-plaintext highlighter-rouge">Contact</code> 和 <code class="language-plaintext highlighter-rouge">BusinessPartner</code> 三个接口中的所有属性：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">Employee</span> <span class="o">=</span> <span class="nx">Identity</span> <span class="o">&amp;</span> <span class="nx">BusinessPartner</span> <span class="o">&amp;</span> <span class="nx">Contact</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">e</span><span class="p">:</span> <span class="nx">Employee</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">id</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John Doe</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">john.doe@example.com</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">phone</span><span class="p">:</span> <span class="dl">'</span><span class="s1">(408)-897-5684</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">credit</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>注意 <code class="language-plaintext highlighter-rouge">BusinessPartner</code> 和 <code class="language-plaintext highlighter-rouge">Identity</code> 有相同类型的 <code class="language-plaintext highlighter-rouge">name</code> 属性，如果它们类型不同，编译器会抛出一个错误提示。</p>

<h3 id="类型顺序">类型顺序</h3>

<p>类型交叉中的类型的顺序并不重要，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">typeAB</span> <span class="o">=</span> <span class="nx">typeA</span> <span class="o">&amp;</span> <span class="nx">typeB</span><span class="p">;</span>
<span class="kd">type</span> <span class="nx">typeBA</span> <span class="o">=</span> <span class="nx">typeB</span> <span class="o">&amp;</span> <span class="nx">typeA</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">typeAB</code> 和 <code class="language-plaintext highlighter-rouge">typeBA</code> 有着相同的属性，它们是等价的。</p>

<h3 id="小结-30">小结</h3>

<ul>
  <li>交叉类型可以结合两个或者更多的类型，创建具有所有类型的属性的新类型；</li>
  <li>类型交叉中的类型的顺序并不重要。</li>
</ul>

<h2 id="类型保护">类型保护</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-type-guards/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的类型保护</p>

<p>类型保护允许你使用 <a href="https://cody1991.github.io/TypeScript-Tutorial/3-control-flow-statements/1-if-else.html">条件代码块</a> 来限定变量的类型范围</p>

<h3 id="typeof">typeof</h3>

<p>让我们看看下面的例子：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">alphanumeric</span> <span class="o">=</span> <span class="kr">string</span> <span class="o">|</span> <span class="kr">number</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="nx">alphanumeric</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="nx">alphanumeric</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">b</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">b</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span>
    <span class="dl">'</span><span class="s1">Invalid arguments. Both arguments must be either numbers or strings.</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它是如何工作的：</p>

<ul>
  <li>属性，定义了 <code class="language-plaintext highlighter-rouge">alphanumeric</code> 类型，它可以保存 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/3-string.html">字符串类型</a> 或者 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/2-number.html">数字类型</a> 值</li>
  <li>接下来，定义了 <code class="language-plaintext highlighter-rouge">add()</code> 函数，它把类型为 <code class="language-plaintext highlighter-rouge">alphanumeric</code> 的 <code class="language-plaintext highlighter-rouge">a</code> 变量与 <code class="language-plaintext highlighter-rouge">b</code> 变量进行相加</li>
  <li>然后使用 <code class="language-plaintext highlighter-rouge">typeof</code> 操作符检查两个参数的类型是否都为 <code class="language-plaintext highlighter-rouge">number</code> 类型，如果是的话，使用 <code class="language-plaintext highlighter-rouge">+</code> 操作符计算参数之和</li>
  <li>再然后使用 <code class="language-plaintext highlighter-rouge">typeof</code> 操作符检查两个参数的类型是否都为 <code class="language-plaintext highlighter-rouge">string</code> 类型，如果是的话，把两个字符串参数拼接起来</li>
  <li>最后，如果两个参数不都全是数字或者字符串的话，抛出错误提示</li>
</ul>

<p>在这个例子中，TypeScript 直到如何在条件代码块中使用 <code class="language-plaintext highlighter-rouge">typeof</code> 操作符，在下面的 <a href="https://cody1991.github.io/TypeScript-Tutorial/3-control-flow-statements/1-if-else.html">if</a> 块中，TypeScript 认为 <code class="language-plaintext highlighter-rouge">a</code> 和 <code class="language-plaintext highlighter-rouge">b</code> 都是数字类型</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">b</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>类似地，在下面的 <code class="language-plaintext highlighter-rouge">if</code> 代码块中，TypeScript 将 <code class="language-plaintext highlighter-rouge">a</code> 和 <code class="language-plaintext highlighter-rouge">b</code> 作为字符串处理，因此，你可以把它们拼接成一个字符串：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">b</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="instanceof">instanceof</h3>

<p>与 <code class="language-plaintext highlighter-rouge">typeof</code> 操作符类型，TypeScript 也知道 <code class="language-plaintext highlighter-rouge">instanceof</code> 操作符的使用，例如：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Customer</span> <span class="p">{</span>
  <span class="nx">isCreditAllowed</span><span class="p">():</span> <span class="nx">boolean</span> <span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">Supplier</span> <span class="p">{</span>
  <span class="nx">isInShortList</span><span class="p">():</span> <span class="nx">boolean</span> <span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">BusinessPartner</span> <span class="o">=</span> <span class="nx">Customer</span> <span class="o">|</span> <span class="nx">Supplier</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">signContract</span><span class="p">(</span><span class="nx">partner</span><span class="p">:</span> <span class="nx">BusinessPartner</span><span class="p">):</span> <span class="kr">string</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">partner</span> <span class="k">instanceof</span> <span class="nx">Customer</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">message</span> <span class="o">=</span> <span class="nx">partner</span><span class="p">.</span><span class="nx">isCreditAllowed</span><span class="p">()</span>
      <span class="p">?</span> <span class="dl">'</span><span class="s1">Sign a new contract with the customer</span><span class="dl">'</span>
      <span class="p">:</span> <span class="dl">'</span><span class="s1">Credit issue</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">partner</span> <span class="k">instanceof</span> <span class="nx">Supplier</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">message</span> <span class="o">=</span> <span class="nx">partner</span><span class="p">.</span><span class="nx">isInShortList</span><span class="p">()</span>
      <span class="p">?</span> <span class="dl">'</span><span class="s1">Sign a new contract the supplier</span><span class="dl">'</span>
      <span class="p">:</span> <span class="dl">'</span><span class="s1">Need to evaluate further</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">message</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它是如何工作的：</p>

<ul>
  <li>首先，声明了 <code class="language-plaintext highlighter-rouge">Customer</code> 和 <code class="language-plaintext highlighter-rouge">Supplier</code> 两个类</li>
  <li>第二， 创建一个类型别名 <code class="language-plaintext highlighter-rouge">BusinessPartner</code>，它是<code class="language-plaintext highlighter-rouge">Customer</code> 和 <code class="language-plaintext highlighter-rouge">Supplier</code> 的联合类型</li>
  <li>第三，定义一个函数 <code class="language-plaintext highlighter-rouge">signContract()</code>，它接受一个类型为 <code class="language-plaintext highlighter-rouge">BusinessPartner</code> 的参数</li>
  <li>最后，检查 <code class="language-plaintext highlighter-rouge">partner</code> 是否是 <code class="language-plaintext highlighter-rouge">Customer</code> 或者 <code class="language-plaintext highlighter-rouge">Supplier</code> 类的实例，然后进行对应的逻辑处理</li>
</ul>

<p>在下面的 <code class="language-plaintext highlighter-rouge">if</code> 代码块中，TypeScript 通过 <code class="language-plaintext highlighter-rouge">instanceof</code> 操作符知道 <code class="language-plaintext highlighter-rouge">partner</code> 是 <code class="language-plaintext highlighter-rouge">Customer</code> 类型的一个实例：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="k">if</span> <span class="p">(</span><span class="nx">partner</span> <span class="k">instanceof</span> <span class="nx">Customer</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">message</span> <span class="o">=</span> <span class="nx">partner</span><span class="p">.</span><span class="nx">isCreditAllowed</span><span class="p">()</span>
    <span class="p">?</span> <span class="dl">'</span><span class="s1">Sign a new contract with the customer</span><span class="dl">'</span>
    <span class="p">:</span> <span class="dl">'</span><span class="s1">Credit issue</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>同样的方式，在下面的 <code class="language-plaintext highlighter-rouge">if</code> 代码块中，TypeScript 知道 <code class="language-plaintext highlighter-rouge">partner</code> 是 <code class="language-plaintext highlighter-rouge">Supplier</code> 类型的一个实例：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="k">if</span> <span class="p">(</span><span class="nx">partner</span> <span class="k">instanceof</span> <span class="nx">Supplier</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">message</span> <span class="o">=</span> <span class="nx">partner</span><span class="p">.</span><span class="nx">isInShortList</span><span class="p">()</span>
    <span class="p">?</span> <span class="dl">'</span><span class="s1">Sign a new contract with the supplier</span><span class="dl">'</span>
    <span class="p">:</span> <span class="dl">'</span><span class="s1">Need to evaluate further</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>当 <code class="language-plaintext highlighter-rouge">if</code> 代码块限定了一种类型，TypeScript 知道在 <code class="language-plaintext highlighter-rouge">else</code> 里面会是另外一种类型，例如：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">signContract</span><span class="p">(</span><span class="nx">partner</span><span class="p">:</span> <span class="nx">BusinessPartner</span><span class="p">):</span> <span class="kr">string</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">partner</span> <span class="k">instanceof</span> <span class="nx">Customer</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">message</span> <span class="o">=</span> <span class="nx">partner</span><span class="p">.</span><span class="nx">isCreditAllowed</span><span class="p">()</span>
      <span class="p">?</span> <span class="dl">'</span><span class="s1">Sign a new contract with the customer</span><span class="dl">'</span>
      <span class="p">:</span> <span class="dl">'</span><span class="s1">Credit issue</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// must be Supplier</span>
    <span class="nx">message</span> <span class="o">=</span> <span class="nx">partner</span><span class="p">.</span><span class="nx">isInShortList</span><span class="p">()</span>
      <span class="p">?</span> <span class="dl">'</span><span class="s1">Sign a new contract with the supplier</span><span class="dl">'</span>
      <span class="p">:</span> <span class="dl">'</span><span class="s1">Need to evaluate further</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">message</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="in">in</h3>

<p><code class="language-plaintext highlighter-rouge">in</code> 操作符判断对象上是否存在某个属性来进行安全检查，你也可以将它用作类型保护，例如：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">signContract</span><span class="p">(</span><span class="nx">partner</span><span class="p">:</span> <span class="nx">BusinessPartner</span><span class="p">):</span> <span class="kr">string</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="dl">'</span><span class="s1">isCreditAllowed</span><span class="dl">'</span> <span class="k">in</span> <span class="nx">partner</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">message</span> <span class="o">=</span> <span class="nx">partner</span><span class="p">.</span><span class="nx">isCreditAllowed</span><span class="p">()</span>
      <span class="p">?</span> <span class="dl">'</span><span class="s1">Sign a new contract with the customer</span><span class="dl">'</span>
      <span class="p">:</span> <span class="dl">'</span><span class="s1">Credit issue</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// must be Supplier</span>
    <span class="nx">message</span> <span class="o">=</span> <span class="nx">partner</span><span class="p">.</span><span class="nx">isInShortList</span><span class="p">()</span>
      <span class="p">?</span> <span class="dl">'</span><span class="s1">Sign a new contract the supplier </span><span class="dl">'</span>
      <span class="p">:</span> <span class="dl">'</span><span class="s1">Need to evaluate further</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">message</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="用户定义的类型保护">用户定义的类型保护</h3>

<p>用户定义的类型保护允许你使用函数的时候定义类型保护或者帮助 TypeScript 推断类型</p>

<p>用户定义的类型保护函数是一个简单返回 <code class="language-plaintext highlighter-rouge">arg is aType</code> 判断的函数，比如：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">isCustomer</span><span class="p">(</span><span class="nx">partner</span><span class="p">:</span> <span class="kr">any</span><span class="p">):</span> <span class="nx">partner</span> <span class="k">is</span> <span class="nx">Customer</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">partner</span> <span class="k">instanceof</span> <span class="nx">Customer</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">isCustomer()</code> 是一个用户定义的类型保护函数，现在你可以按照下面的例子来使用它：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">signContract</span><span class="p">(</span><span class="nx">partner</span><span class="p">:</span> <span class="nx">BusinessPartner</span><span class="p">):</span> <span class="kr">string</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">isCustomer</span><span class="p">(</span><span class="nx">partner</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">message</span> <span class="o">=</span> <span class="nx">partner</span><span class="p">.</span><span class="nx">isCreditAllowed</span><span class="p">()</span>
      <span class="p">?</span> <span class="dl">'</span><span class="s1">Sign a new contract with the customer</span><span class="dl">'</span>
      <span class="p">:</span> <span class="dl">'</span><span class="s1">Credit issue</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">message</span> <span class="o">=</span> <span class="nx">partner</span><span class="p">.</span><span class="nx">isInShortList</span><span class="p">()</span>
      <span class="p">?</span> <span class="dl">'</span><span class="s1">Sign a new contract with the supplier</span><span class="dl">'</span>
      <span class="p">:</span> <span class="dl">'</span><span class="s1">Need to evaluate further</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">message</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-31">小结</h3>

<ul>
  <li>类型保护限定了条件代码块中变量的类型</li>
  <li>使用 <code class="language-plaintext highlighter-rouge">typeof</code> 和 <code class="language-plaintext highlighter-rouge">instanceof</code> 操作符在条件代码块中的实现类型保护</li>
</ul>

<h2 id="类型转换">类型转换</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/type-casting/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的类型转换，它允许你将变量从一种类型转换到另外一种类型</p>

<p>JavaScript 没有类型转换的概念，因为变量具有动态类型的特性，而 TypeScript 中的变量都有类型，类型转换允许你将变量从一种类型转换到另外一种类型</p>

<p>TypeScript 中你可以使用 <code class="language-plaintext highlighter-rouge">as</code> 关键字或者 <code class="language-plaintext highlighter-rouge">&lt;&gt;</code> 操作符进行类型转换</p>

<h3 id="使用-as-关键字进行类型转换">使用 as 关键字进行类型转换</h3>

<p>下面使用 <a href="https://zh.javascript.info/searching-elements-dom#querySelector">querySelector()</a> 方法选择第一个输入元素：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">input</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">input["type="text"]</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>因为 <code class="language-plaintext highlighter-rouge">document.querySelector()</code> 方法的返回类型是 <code class="language-plaintext highlighter-rouge">Element</code> 类型，下面的代码会导致编译错误：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>因为 <code class="language-plaintext highlighter-rouge">Element</code> 类型不存在 <code class="language-plaintext highlighter-rouge">value</code> 属性，这个属性只存在 <code class="language-plaintext highlighter-rouge">HTMLInputElement</code> 类型上</p>

<p>为了解决这个问题，你可以使用类型转换，即使用关键字 <code class="language-plaintext highlighter-rouge">as</code> 把 <code class="language-plaintext highlighter-rouge">Element</code> 类型转换为 <code class="language-plaintext highlighter-rouge">HTMLInputElement</code> 类型，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">input</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">input[type="text"]</span><span class="dl">'</span><span class="p">)</span> <span class="k">as</span> <span class="nx">HTMLInputElement</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>现在，<code class="language-plaintext highlighter-rouge">input</code> 变量的类型是 <code class="language-plaintext highlighter-rouge">HTMLInputElement</code>，所以访问它的 <code class="language-plaintext highlighter-rouge">value</code> 属性不会导致任何错误，下面的代码可以正常工作：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>另外一种把 <code class="language-plaintext highlighter-rouge">Element</code> 类型转换为 <code class="language-plaintext highlighter-rouge">HTMLInputElement</code> 类型来访问属性的方法如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">enteredText</span> <span class="o">=</span> <span class="p">(</span><span class="nx">input</span> <span class="k">as</span> <span class="nx">HTMLInputElement</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>注意 <code class="language-plaintext highlighter-rouge">HTMLInputElement</code> 方法扩展了 <code class="language-plaintext highlighter-rouge">HTMLElement</code> 类型，而 <code class="language-plaintext highlighter-rouge">HTMLElement</code> 类型扩展了 <code class="language-plaintext highlighter-rouge">Element</code> 类型。把 <code class="language-plaintext highlighter-rouge">HTMLElement</code> 类型转换为 <code class="language-plaintext highlighter-rouge">HTMLInputElement</code> 类型被称为向下转换</p>

<p>也可以如下进行向下转换：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">el</span><span class="p">:</span> <span class="nx">HTMLElement</span><span class="p">;</span>
<span class="nx">el</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">HTMLInputElement</span><span class="p">();</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">el</code> 变量的类型是 <code class="language-plaintext highlighter-rouge">HTMLElement</code> 类型，你可以给它指定一个 <code class="language-plaintext highlighter-rouge">HTMLInputElement</code> 类型的实例，因为 <code class="language-plaintext highlighter-rouge">HTMLInputElement</code> 类型是 <code class="language-plaintext highlighter-rouge">HTMLElement</code> 类型的子类</p>

<p>将类型从 <code class="language-plaintext highlighter-rouge">typeA</code> 转换为 <code class="language-plaintext highlighter-rouge">typeB</code> 的语法如下：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">a</span><span class="p">:</span> <span class="nx">typeA</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span> <span class="k">as</span> <span class="nx">typeB</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="使用--操作符进行类型转换">使用 &lt;&gt; 操作符进行类型转换</h3>

<p>除了 <code class="language-plaintext highlighter-rouge">as</code> 关键词，你可以使用 <code class="language-plaintext highlighter-rouge">&lt;&gt;</code> 操作符进行类型转换，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">input</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">HTMLInputElement</span><span class="o">&gt;</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">input[type="text"]</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>使用 <code class="language-plaintext highlighter-rouge">&lt;&gt;</code> 操作符进行类型转换的语法是：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">a</span><span class="p">:</span> <span class="nx">typeA</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">b</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">typeB</span><span class="o">&gt;</span><span class="nx">a</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-32">小结</h3>

<ul>
  <li>类型转换允许你将变量从一种类型转换到另外一种类型</li>
  <li>使用 <code class="language-plaintext highlighter-rouge">as</code> 关键字或者 <code class="language-plaintext highlighter-rouge">&lt;&gt;</code> 操作符进行类型转换</li>
</ul>

<h2 id="类型断言">类型断言</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/type-assertions/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的类型断言</p>

<h3 id="typescript-中的类型断言介绍">TypeScript 中的类型断言介绍</h3>

<p>类型断言让 TypeScript 编译器将某个值视为指定的类型，它使用 <code class="language-plaintext highlighter-rouge">as</code> 关键字来做到这点：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">expression</span> <span class="k">as</span> <span class="nx">targetType</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>类型断言也被称为类型收缩，它允许你从 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/12-union-type.html">联合类型</a> 收缩类型范围。让我们看下下面简单的函数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">getNetPrice</span><span class="p">(</span>
  <span class="nx">price</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span>
  <span class="nx">discount</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span>
  <span class="nx">format</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">,</span>
<span class="p">):</span> <span class="kr">number</span> <span class="o">|</span> <span class="kr">string</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">netPrice</span> <span class="o">=</span> <span class="nx">price</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">discount</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">format</span> <span class="p">?</span> <span class="s2">`$</span><span class="p">${</span><span class="nx">netPrice</span><span class="p">}</span><span class="s2">`</span> <span class="p">:</span> <span class="nx">netPrice</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">getNetPrice()</code> 函数接受 <code class="language-plaintext highlighter-rouge">price</code>, <code class="language-plaintext highlighter-rouge">discount</code> 和 <code class="language-plaintext highlighter-rouge">format</code> 三个参数，返回一个联合类型为 <code class="language-plaintext highlighter-rouge">number | string</code> 的值</p>

<p>如果 <code class="language-plaintext highlighter-rouge">format</code> 的值为 <code class="language-plaintext highlighter-rouge">true</code>，<code class="language-plaintext highlighter-rouge">getNetPrice()</code> 函数以字符串形式返回格式化后的净价格，否则以数字的形式返回净价格</p>

<p>下面使用 <code class="language-plaintext highlighter-rouge">as</code> 关键字告诉编译器，赋值给 <code class="language-plaintext highlighter-rouge">netPrice</code> 的值是一个字符串：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">netPrice</span> <span class="o">=</span> <span class="nx">getNetPrice</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span> <span class="k">as</span> <span class="kr">string</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">netPrice</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nv">$95</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>同样的，下面的例子使用 <code class="language-plaintext highlighter-rouge">as</code> 关键字告诉编译器，赋值给 <code class="language-plaintext highlighter-rouge">netPrice</code> 的值是一个数字：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">netPrice</span> <span class="o">=</span> <span class="nx">getNetPrice</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span> <span class="k">as</span> <span class="kr">number</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">netPrice</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>95
</pre></td></tr></tbody></table></code></pre></div></div>

<p>注意类型断言不做任何 <a href="https://cody1991.github.io/TypeScript-Tutorial/7-advanced-types/3-casting.html">类型转换</a> 的事情，它只是告诉编译器为了类型检查的目的，应该使用哪种类型应用于该值</p>

<h3 id="可选的类型断言语法">可选的类型断言语法</h3>

<p>你也可以使用尖括号语法 <code class="language-plaintext highlighter-rouge">&lt;&gt;</code> 来断言一个类型，比如：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="o">&lt;</span><span class="nx">targetType</span><span class="o">&gt;</span><span class="nx">value</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>例如：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">netPrice</span> <span class="o">=</span> <span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;</span><span class="nx">getNetPrice</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>注意你不能在 React 等库中使用尖括号语法 <code class="language-plaintext highlighter-rouge">&lt;&gt;</code>，出于这个原因，你应该进行类型断言的时候都是用 <code class="language-plaintext highlighter-rouge">as</code> 关键字</p>

<h3 id="小结-33">小结</h3>

<ul>
  <li>类型断言告诉编译器把一个值视为指定的类型</li>
  <li>类型断言不做任何转型转换的事情</li>
  <li>类型断言使用 <code class="language-plaintext highlighter-rouge">as</code> 关键字或尖括号 <code class="language-plaintext highlighter-rouge">&lt;&gt;</code> 的语法</li>
</ul>

<h1 id="section-8-泛型">Section 8. 泛型</h1>

<h2 id="泛型">泛型</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-generics/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的泛型，它允许你使用类型作为形式参数</p>

<h3 id="typescript-中的泛型介绍">TypeScript 中的泛型介绍</h3>

<p>TypeScript 中的泛型允许你编写可重用的泛型函数，泛型 <a href="https://cody1991.github.io/TypeScript-Tutorial/8-generics/3-generic-classes.html">类</a> 和 泛型 <a href="https://cody1991.github.io/TypeScript-Tutorial/8-generics/4-generic-interfaces.html">接口</a>，在这个教程中，你将专注于通用函数的开发</p>

<p>通过一个简单的例子可以更加容易地解释 TypeScript 中的泛型概念</p>

<p>假设你需要开发一个函数，它返回一个 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/2-number.html">数字</a> <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/6-array-type.html">数组</a> 中的一个随即元素</p>

<p>下面的 <code class="language-plaintext highlighter-rouge">getRandomNumberElement()</code> 函数接受一个数字数组作为参数，并从数组中返回一个随机元素：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">getRandomNumberElement</span><span class="p">(</span><span class="nx">items</span><span class="p">:</span> <span class="kr">number</span><span class="p">[]):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">randomIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">items</span><span class="p">[</span><span class="nx">randomIndex</span><span class="p">];</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>为了获取数组中的随即元素，你需要：</p>

<ul>
  <li>先找到随机索引</li>
  <li>根据随机索引获得随机元素</li>
</ul>

<p>要找到数组的随机索引，我们使用 <code class="language-plaintext highlighter-rouge">Math.random()</code> 函数，它会返回 <code class="language-plaintext highlighter-rouge">0</code> 和 <code class="language-plaintext highlighter-rouge">1</code> 之间的随机数，将它和数组的长度进行相乘，再把它传递给 <code class="language-plaintext highlighter-rouge">Math.floor()</code> 函数得到随机索引</p>

<p>下面展示了如何使用 <code class="language-plaintext highlighter-rouge">getRandomNumberElement()</code> 函数</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">];</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">getRandomNumberElement</span><span class="p">(</span><span class="nx">numbers</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>假设你需要从一个 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/3-string.html">字符串</a> 数组中获得随机元素，你可能想到开发一个新的函数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">getRandomStringElement</span><span class="p">(</span><span class="nx">items</span><span class="p">:</span> <span class="kr">string</span><span class="p">[]):</span> <span class="kr">string</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">randomIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">items</span><span class="p">[</span><span class="nx">randomIndex</span><span class="p">];</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">getRandomStringElement()</code> 函数的逻辑和 <code class="language-plaintext highlighter-rouge">getRandomNumberElement()</code> 函数的逻辑相同</p>

<p>下面展示了如何使用 <code class="language-plaintext highlighter-rouge">getRandomStringElement()</code> 函数</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">colors</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">red</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">green</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">blue</span><span class="dl">'</span><span class="p">];</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">getRandomStringElement</span><span class="p">(</span><span class="nx">colors</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>稍后你可能需要获取对象数组中的随机元素，每次你想从新的类型数组中获得一个随机元素时，创建一个新的函数的方法不具有可扩展性</p>

<h4 id="使用-any-类型">使用 any 类型</h4>

<p>这个问题的一个解决方案是把数组参数的类型设置为 <code class="language-plaintext highlighter-rouge">any[]</code>，通过这么处理，你只需要编写一个用于任何类型的数组的函数</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">getRandomAnyElement</span><span class="p">(</span><span class="nx">items</span><span class="p">:</span> <span class="kr">any</span><span class="p">[]):</span> <span class="kr">any</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">randomIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">items</span><span class="p">[</span><span class="nx">randomIndex</span><span class="p">];</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">getRandomAnyElement()</code> 函数适用于 <code class="language-plaintext highlighter-rouge">any</code> 类型的数组，包括数字，字符串，对象等等</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">];</span>
<span class="kd">let</span> <span class="nx">colors</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">red</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">green</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">blue</span><span class="dl">'</span><span class="p">];</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">getRandomAnyElement</span><span class="p">(</span><span class="nx">numbers</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">getRandomAnyElement</span><span class="p">(</span><span class="nx">colors</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这个解决方法是有效的，但是它有一个缺点：无法强制指定返回元素的类型，换句话说，它不是类型安全的</p>

<p>在保留类型的同时避免代码重复的更好的解决方法是使用泛型</p>

<h4 id="typescript-泛型可以帮上忙">TypeScript 泛型可以帮上忙</h4>

<p>下面是一个泛型函数，它从类型为 <code class="language-plaintext highlighter-rouge">T</code> 的数组中返回随机元素：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">getRandomElement</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">items</span><span class="p">:</span> <span class="nx">T</span><span class="p">[]):</span> <span class="nx">T</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">randomIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">items</span><span class="p">[</span><span class="nx">randomIndex</span><span class="p">];</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这个函数使用类型变量 <code class="language-plaintext highlighter-rouge">T</code>，<code class="language-plaintext highlighter-rouge">T</code> 允许你补货调用函数时提供的类型，此外，该函数使用 <code class="language-plaintext highlighter-rouge">T</code> 类型变量作为返回类型</p>

<p><code class="language-plaintext highlighter-rouge">getRandomElement()</code> 函数是通用的，因为它可以处理任何数据类型，包括字符串，数字和对象等等</p>

<p>按照惯例，我们使用 <code class="language-plaintext highlighter-rouge">T</code> 作为类型变量，然而你可以自由的使用其他字母，比如 <code class="language-plaintext highlighter-rouge">A</code>，<code class="language-plaintext highlighter-rouge">B</code> 和 <code class="language-plaintext highlighter-rouge">C</code> 等等</p>

<h3 id="调用泛型函数">调用泛型函数</h3>

<p>下面演示如何使用数字数组调用 <code class="language-plaintext highlighter-rouge">getRandomElement()</code> 函数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">];</span>
<span class="kd">let</span> <span class="nx">randomEle</span> <span class="o">=</span> <span class="nx">getRandomElement</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">numbers</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">randomEle</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这个例子中显式地将 <code class="language-plaintext highlighter-rouge">number</code> 作为 <code class="language-plaintext highlighter-rouge">T</code> 类型传递给 <code class="language-plaintext highlighter-rouge">getRandomElement()</code> 函数</p>

<p>实践中，你可以使用 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/15-type-inference.html">类型推断</a> 来推断类型。这意味着你可以让 TypeScript 编译器根据你传递的参数自动设置 <code class="language-plaintext highlighter-rouge">T</code> 的值，就像这样：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">];</span>
<span class="kd">let</span> <span class="nx">randomEle</span> <span class="o">=</span> <span class="nx">getRandomElement</span><span class="p">(</span><span class="nx">numbers</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">randomEle</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，我们没有显式地给 <code class="language-plaintext highlighter-rouge">getRandomElement()</code> 函数传递 <a href="https://cody1991.github.io/TypeScript-Tutorial/2-basic-types/2-number.html">数字类型</a>，编译器查看参数并把 <code class="language-plaintext highlighter-rouge">T</code> 设置为对应的类型</p>

<p>现在 <code class="language-plaintext highlighter-rouge">getRandomElement()</code> 函数也是类型安全的了，比如，如果你把返回值赋值给一个字符串变量，将会得到一个错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">];</span>
<span class="kd">let</span> <span class="nx">returnElem</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="nx">returnElem</span> <span class="o">=</span> <span class="nx">getRandomElement</span><span class="p">(</span><span class="nx">numbers</span><span class="p">);</span> <span class="c1">// compiler error</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="具有多个类型变量的泛型函数">具有多个类型变量的泛型函数</h3>

<p>下面演示如何使用两个类型变量 <code class="language-plaintext highlighter-rouge">U</code> 和 <code class="language-plaintext highlighter-rouge">V</code> 开发泛型函数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">merge</span><span class="o">&lt;</span><span class="nx">U</span><span class="p">,</span> <span class="nx">V</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">obj1</span><span class="p">:</span> <span class="nx">U</span><span class="p">,</span> <span class="nx">obj2</span><span class="p">:</span> <span class="nx">V</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="p">...</span><span class="nx">obj1</span><span class="p">,</span>
    <span class="p">...</span><span class="nx">obj2</span><span class="p">,</span>
  <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">merge()</code> 函数合并两个类型为 <code class="language-plaintext highlighter-rouge">U</code> 和 <code class="language-plaintext highlighter-rouge">V</code> 的对象，它将两个对象的属性组合成一个新的对象</p>

<p>类型推断将 <code class="language-plaintext highlighter-rouge">merge()</code> 函数的返回类型推断为 <code class="language-plaintext highlighter-rouge">U</code> 和 <code class="language-plaintext highlighter-rouge">V</code> 的交集类型，即 <code class="language-plaintext highlighter-rouge">U &amp; V</code></p>

<p>下面演示了如何使用 <code class="language-plaintext highlighter-rouge">merge()</code> 函数来合并两个对象：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">merge</span><span class="p">({</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span> <span class="p">},</span> <span class="p">{</span> <span class="na">jobTitle</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Frontend Developer</span><span class="dl">'</span> <span class="p">});</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="p">{</span> <span class="nl">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="nx">jobTitle</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Frontend Developer</span><span class="dl">'</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="typescript-中泛型的好处">TypeScript 中泛型的好处</h3>

<p>下面是 TypeScript 中泛型的好处：</p>

<ul>
  <li>编译时使用类型检查</li>
  <li>消除 <a href="https://cody1991.github.io/TypeScript-Tutorial/7-advanced-types/3-casting.html">类型转换</a>.</li>
  <li>允许你实现泛型算法</li>
</ul>

<h3 id="小结-34">小结</h3>

<ul>
  <li>使用 TypeScript 泛型来开发可复用的，通用的和类型安全的函数，接口和类</li>
</ul>

<h2 id="泛型约束">泛型约束</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-generic-constraints/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的通用约束</p>

<h3 id="typescript-中的通用约束介绍">TypeScript 中的通用约束介绍</h3>

<p>思考下以下例子：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">merge</span><span class="o">&lt;</span><span class="nx">U</span><span class="p">,</span> <span class="nx">V</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">obj1</span><span class="p">:</span> <span class="nx">U</span><span class="p">,</span> <span class="nx">obj2</span><span class="p">:</span> <span class="nx">V</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="p">...</span><span class="nx">obj1</span><span class="p">,</span>
    <span class="p">...</span><span class="nx">obj2</span><span class="p">,</span>
  <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">merge()</code> 是一个合并两个对象的泛型函数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">merge</span><span class="p">({</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span> <span class="p">},</span> <span class="p">{</span> <span class="na">age</span><span class="p">:</span> <span class="mi">25</span> <span class="p">});</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="p">{</span> <span class="nl">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="nx">age</span><span class="p">:</span> <span class="mi">25</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它工作地很好。<code class="language-plaintext highlighter-rouge">merge()</code> 函数接受两个对象，但它不阻止你传递一个非对象参数，就像这样：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">merge</span><span class="p">({</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span> <span class="p">},</span> <span class="mi">25</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>TypeScript 没有发出任何错误提示</p>

<p>你可能想给 <code class="language-plaintext highlighter-rouge">merge()</code> 函数添加一个约束，只能处理对象而不是处理所有的类型</p>

<p>要做到这一点，你需要列出要求，作为 <code class="language-plaintext highlighter-rouge">U</code> 和 <code class="language-plaintext highlighter-rouge">V</code> 类型的约束</p>

<p>为了表示约束，你可以使用 <code class="language-plaintext highlighter-rouge">extends</code> 关键字：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">merge</span><span class="o">&lt;</span><span class="nx">U</span> <span class="kd">extends</span> <span class="nx">object</span><span class="p">,</span> <span class="nx">V</span> <span class="kd">extends</span> <span class="nx">object</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">obj1</span><span class="p">:</span> <span class="nx">U</span><span class="p">,</span> <span class="nx">obj2</span><span class="p">:</span> <span class="nx">V</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="p">...</span><span class="nx">obj1</span><span class="p">,</span>
    <span class="p">...</span><span class="nx">obj2</span><span class="p">,</span>
  <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>因为 <code class="language-plaintext highlighter-rouge">merge()</code> 函数受到了约束，它将不再适合用于所有类型，它现在只适合用于 <code class="language-plaintext highlighter-rouge">object</code> 类型</p>

<p>下面将导致一个错误：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">merge</span><span class="p">({</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span> <span class="p">},</span> <span class="mi">25</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>Argument of <span class="nb">type</span> <span class="s1">'25'</span> is not assignable to parameter of <span class="nb">type</span> <span class="s1">'object'</span><span class="nb">.</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="在泛型约束中使用类型参数">在泛型约束中使用类型参数</h3>

<p>TypeScript 允许声明受另外一个类型参数约束的类型参数</p>

<p>下面的 <code class="language-plaintext highlighter-rouge">prop()</code> 函数接受一个对象和一个属性名，它会返回属性的值：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">prop</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="nx">K</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">obj</span><span class="p">:</span> <span class="nx">T</span><span class="p">,</span> <span class="nx">key</span><span class="p">:</span> <span class="nx">K</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>编译器会发出下面的错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>Type <span class="s1">'K'</span> cannot be used to index <span class="nb">type</span> <span class="s1">'T'</span><span class="nb">.</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>为了修正这个错误，你在 <code class="language-plaintext highlighter-rouge">K</code> 上添加一个约束来确保它是 <code class="language-plaintext highlighter-rouge">T</code> 的键，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">prop</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="nx">K</span> <span class="kd">extends</span> <span class="kr">keyof</span> <span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">obj</span><span class="p">:</span> <span class="nx">T</span><span class="p">,</span> <span class="nx">key</span><span class="p">:</span> <span class="nx">K</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果你传递给 <code class="language-plaintext highlighter-rouge">prop()</code> 函数一个 <code class="language-plaintext highlighter-rouge">obj</code> 对象上存在的属性明，编译器不会报错，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="nx">prop</span><span class="p">({</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span> <span class="p">},</span> <span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>John
</pre></td></tr></tbody></table></code></pre></div></div>

<p>然后如果你传递一个在第一个参数上不存在的键名，编译器会发出一个错误提示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="nx">prop</span><span class="p">({</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span> <span class="p">},</span> <span class="dl">'</span><span class="s1">age</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>错误提示：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>Argument of <span class="nb">type</span> <span class="s1">'"age"'</span> is not assignable to parameter of <span class="nb">type</span> <span class="s1">'"name"'</span><span class="nb">.</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-35">小结</h3>

<ul>
  <li>使用 <code class="language-plaintext highlighter-rouge">extends</code> 关键字将类型参数约束为特定类型</li>
  <li>使用 <code class="language-plaintext highlighter-rouge">extends keyof</code> 来约束类型为另外一个对象属性集合的类型</li>
</ul>

<h2 id="泛型类">泛型类</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-generic-classes/">原文地址</a></p>

<p>在本教程中，你将学习 如何开发 TypeScript 中的泛型类</p>

<h3 id="typescript-中的泛型类介绍">TypeScript 中的泛型类介绍</h3>

<p><a href="https://cody1991.github.io/TypeScript-Tutorial/8-generics/1-generics.html">泛型</a> 类的语法如下，泛型类型参数列表在尖括号 <code class="language-plaintext highlighter-rouge">&lt;&gt;</code> 中，跟着名称后面：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">className</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="c1">//...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>TypeScript 允许你在类型参数列表中有多个泛型类型类型，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">className</span><span class="o">&lt;</span><span class="nx">K</span><span class="p">,</span> <span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="c1">//...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><a href="https://cody1991.github.io/TypeScript-Tutorial/8-generics/2-generic-constraints.html">泛型约束</a> 也可以应用于类中的泛型类型：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">className</span><span class="o">&lt;</span><span class="nx">T</span> <span class="kd">extends</span> <span class="nx">TypeA</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="c1">//...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在类上放置类型参数允许你开发相同类型的方法和属性</p>

<h3 id="typescript-泛型类例子">TypeScript 泛型类例子</h3>

<p>在这个例子中，我们将开发一个 <code class="language-plaintext highlighter-rouge">Stack</code> 泛型类</p>

<p>栈是一个基于后进先出(LIFO)原则的数据结构，这就意味着你第一个放入到栈中的元素会是你从栈中最后一个获取到的元素</p>

<p>通常栈有大小限制，默认为空，栈有两个主要的操作：</p>

<ul>
  <li>Push: 将一个元素推入到栈中</li>
  <li>Pop: 从栈中弹出一个元素</li>
</ul>

<p>下面展示一个完整的栈泛型类，名为 <code class="language-plaintext highlighter-rouge">Stack&lt;T&gt;</code>：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Stack</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">private</span> <span class="na">elements</span><span class="p">:</span> <span class="nx">T</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="na">size</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{}</span>
  <span class="nx">isEmpty</span><span class="p">():</span> <span class="nx">boolean</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">isFull</span><span class="p">():</span> <span class="nx">boolean</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">size</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">push</span><span class="p">(</span><span class="na">element</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">size</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">The stack is overflow!</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">pop</span><span class="p">():</span> <span class="nx">T</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">The stack is empty!</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面创建了一个新的数字栈：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Stack</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面的函数返回两个数字 <code class="language-plaintext highlighter-rouge">low</code> 和 <code class="language-plaintext highlighter-rouge">high</code> 之间的随机数：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">randBetween</span><span class="p">(</span><span class="nx">low</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">high</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nx">high</span> <span class="o">-</span> <span class="nx">low</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nx">low</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>现在你可以使用 <code class="language-plaintext highlighter-rouge">randBetween()</code> 函数生成随机数，然后推入到 <code class="language-plaintext highlighter-rouge">numbers</code> 栈中：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Stack</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

<span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nx">numbers</span><span class="p">.</span><span class="nx">isFull</span><span class="p">())</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">randBetween</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Push </span><span class="p">${</span><span class="nx">n</span><span class="p">}</span><span class="s2"> into the stack.`</span><span class="p">);</span>
  <span class="nx">numbers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>Push 3 into the stack.
Push 2 into the stack.
Push 1 into the stack.
Push 8 into the stack.
Push 9 into the stack.
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面演示如何从栈中弹出元素，直到栈为空：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nx">numbers</span><span class="p">.</span><span class="nx">isEmpty</span><span class="p">())</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">numbers</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Pop </span><span class="p">${</span><span class="nx">n</span><span class="p">}</span><span class="s2"> from the stack.`</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>Pop 9 from the stack.
Pop 8 from the stack.
Pop 1 from the stack.
Pop 2 from the stack.
Pop 3 from the stack.
</pre></td></tr></tbody></table></code></pre></div></div>

<p>类似的，你可以创建一个字符串栈，例如：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">words</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">The quick brown fox jumps over the lazy dog</span><span class="dl">'</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">wordStack</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Stack</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">words</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>

<span class="c1">// push words into the stack</span>
<span class="nx">words</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">word</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">wordStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">word</span><span class="p">));</span>

<span class="c1">// pop words from the stack</span>
<span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nx">wordStack</span><span class="p">.</span><span class="nx">isEmpty</span><span class="p">())</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">wordStack</span><span class="p">.</span><span class="nx">pop</span><span class="p">());</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它是如何工作的：</p>

<ul>
  <li>首先，把橘子拆成单词</li>
  <li>然后，创建一个栈，大小等于单词数组的单词数</li>
  <li>第三，将单词数组中的单词推入栈中</li>
  <li>最后，将栈中的单词弹出，直到栈为空</li>
</ul>

<h2 id="泛型接口">泛型接口</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-generic-interfaces/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的泛型接口</p>

<h3 id="typescript-中的泛型接口介绍">TypeScript 中的泛型接口介绍</h3>

<p>和类一样，接口也支持泛型的，泛型接口的语法如下，泛型类型参数列表在尖括号 <code class="language-plaintext highlighter-rouge">&lt;&gt;</code> 中，跟着接口名称后面：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">interfaceName</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这使得类型参数 <code class="language-plaintext highlighter-rouge">T</code> 对接口的所有成员都可见</p>

<p>类型参数列表可以是一个或者多个类型，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">interfaceName</span><span class="o">&lt;</span><span class="nx">U</span><span class="p">,</span> <span class="nx">V</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="typescript-泛型接口例子">TypeScript 泛型接口例子：</h3>

<p>看我们看几个声明泛型接口的列子：</p>

<h4 id="1-描述对象属性的泛型接口">1) 描述对象属性的泛型接口</h4>

<p>下面展示了一个泛型接口，他包含两个键值对成员，类型分别是 <code class="language-plaintext highlighter-rouge">K</code> 和 <code class="language-plaintext highlighter-rouge">V</code></p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">Pair</span><span class="o">&lt;</span><span class="nx">K</span><span class="p">,</span> <span class="nx">V</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="na">key</span><span class="p">:</span> <span class="nx">K</span><span class="p">;</span>
  <span class="nl">value</span><span class="p">:</span> <span class="nx">V</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>现在，你可以使用 <code class="language-plaintext highlighter-rouge">Pair</code> 接口定义任意类型的键值对，比如：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">month</span><span class="p">:</span> <span class="nx">Pair</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="kr">number</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">key</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Jan</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">value</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">month</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，我们定义了一个 <code class="language-plaintext highlighter-rouge">key</code> 为字符串类型而 <code class="language-plaintext highlighter-rouge">value</code> 为数字类型的键值对</p>

<h4 id="2-描述方法的泛型接口">2) 描述方法的泛型接口</h4>

<p>下面声明了一个泛型接口，它有两个方法：<code class="language-plaintext highlighter-rouge">add()</code> 方法和 <code class="language-plaintext highlighter-rouge">remove()</code> 方法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">Collection</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="nx">add</span><span class="p">(</span><span class="na">o</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="k">void</span><span class="p">;</span>
  <span class="nx">remove</span><span class="p">(</span><span class="na">o</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">List&lt;T&gt;</code> 泛型类实现了 <code class="language-plaintext highlighter-rouge">Collection&lt;T&gt;</code> 泛型接口：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">List</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="k">implements</span> <span class="nx">Collection</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">private</span> <span class="na">items</span><span class="p">:</span> <span class="nx">T</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">add</span><span class="p">(</span><span class="na">o</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">remove</span><span class="p">(</span><span class="na">o</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">index</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>对于 <code class="language-plaintext highlighter-rouge">List&lt;T&gt;</code> 类，你可以创建任意类型的值列表，如数字或者字符串</p>

<p>比如，下面展示了如何使用 <code class="language-plaintext highlighter-rouge">List&lt;T&gt;</code> 泛型类来创建一个数字列表：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">List</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;</span><span class="p">();</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">list</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="3-描述索引类型的泛型接口">3) 描述索引类型的泛型接口</h4>

<p>下面声明了一个描述索引类型的接口：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">Options</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="p">[</span><span class="na">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">]:</span> <span class="nx">T</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">inputOptions</span><span class="p">:</span> <span class="nx">Options</span><span class="o">&lt;</span><span class="nx">boolean</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">disabled</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">visible</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="section-9-模块">Section 9. 模块</h1>

<h2 id="模块">模块</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/typescript-modules/">原文地址</a></p>

<p>在本教程中，你将学习 TypeScript 中的模块，以及如何使用它来重构你的代码</p>

<h3 id="typescript-中的模块介绍">TypeScript 中的模块介绍</h3>

<p><a href="https://zh.javascript.info/modules-intro">自从 ES6 以来，JavaScript 开始支持模块</a> ，作为语言的原生功能，TypeScript 与 JavaScript 的模块概念一致</p>

<p>TypeScript 模块可以同时包含声明和代码，模块在它自己的作用域中执行，而不是在全局作用域中。这意味着当你在一个模块中声明变量，<a href="https://cody1991.github.io/TypeScript-Tutorial/4-functions/1-functions.html">函数</a>， <a href="https://cody1991.github.io/TypeScript-Tutorial/5-classes/1-class.html">类</a> 和 <a href="https://cody1991.github.io/TypeScript-Tutorial/6-interfaces/1-interface.html">接口</a> 等等的时候，它们在模块外部是不可见的，除非你使用 <code class="language-plaintext highlighter-rouge">export</code> 语句显式地导出它们</p>

<p>另一方面，如果你想从一个模块中访问变量，函数和类等，你需要使用 <code class="language-plaintext highlighter-rouge">import</code> 语句导入它们</p>

<p>和 ES6 一样，当 TypeScript 文件包含顶级 <code class="language-plaintext highlighter-rouge">import</code> 或者 <code class="language-plaintext highlighter-rouge">export</code> 的时候，它被视为一个模块</p>

<h3 id="创建一个新的模块">创建一个新的模块</h3>

<p>下面创建了一个名为 <code class="language-plaintext highlighter-rouge">Validator.ts</code> 的新模块，声明了一个名为 <code class="language-plaintext highlighter-rouge">Validator</code> 的接口：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">export</span> <span class="kr">interface</span> <span class="nx">Validator</span> <span class="p">{</span>
  <span class="nx">isValid</span><span class="p">(</span><span class="nx">s</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">boolean</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个模块中，我们将 <code class="language-plaintext highlighter-rouge">export</code> 关键字放在 <code class="language-plaintext highlighter-rouge">interface</code> 关键字前，以便将它公开给其他模块使用</p>

<p>换句话说，如果你不是用 <code class="language-plaintext highlighter-rouge">export</code> 关键字，<code class="language-plaintext highlighter-rouge">Validator</code> 接口在 <code class="language-plaintext highlighter-rouge">Validator.ts</code> 模块中是私有的，因此，它不能被其他模块使用</p>

<h3 id="导出语句">导出语句</h3>

<p>从模块中到处声明的另外一种方法是使用 <code class="language-plaintext highlighter-rouge">export</code> 语句，比如：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">Validator</span> <span class="p">{</span>
  <span class="nx">isValid</span><span class="p">(</span><span class="nx">s</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">boolean</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="p">{</span> <span class="nx">Validator</span> <span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>TypeScript 也允许模块使用者重命名声明，就像这样：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">Validator</span> <span class="p">{</span>
  <span class="nx">isValid</span><span class="p">(</span><span class="nx">s</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">boolean</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="p">{</span> <span class="nx">Validator</span> <span class="k">as</span> <span class="nx">StringValidator</span> <span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在这个例子中，其他模块将使用 <code class="language-plaintext highlighter-rouge">Validator</code> 接口作为 <code class="language-plaintext highlighter-rouge">StringValidator</code> 接口</p>

<h3 id="导入新模块">导入新模块</h3>

<p>要使用一个模块，使用 <code class="language-plaintext highlighter-rouge">import</code> 语句，下面创建了一个使用 <code class="language-plaintext highlighter-rouge">Validator.ts</code> 模块的新模块 <code class="language-plaintext highlighter-rouge">EmailValidator.ts</code></p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="k">import</span> <span class="p">{</span> <span class="nx">Validator</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./Validator</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">EmailValidator</span> <span class="k">implements</span> <span class="nx">Validator</span> <span class="p">{</span>
  <span class="nx">isValid</span><span class="p">(</span><span class="nx">s</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">emailRegex</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">[^\s</span><span class="sr">@</span><span class="se">]</span><span class="sr">+@</span><span class="se">[^\s</span><span class="sr">@</span><span class="se">]</span><span class="sr">+</span><span class="se">\.[^\s</span><span class="sr">@</span><span class="se">]</span><span class="sr">+$/</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">emailRegex</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="p">{</span> <span class="nx">EmailValidator</span> <span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>当你倒入一个模块的时候，你可以像这样重命名它：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">import</span> <span class="p">{</span> <span class="nx">Validator</span> <span class="k">as</span> <span class="nx">StringValidator</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./Validator</span><span class="dl">'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在 <code class="language-plaintext highlighter-rouge">EmailValidator</code> 模块中，你是用 <code class="language-plaintext highlighter-rouge">Validator</code> 接口作为 <code class="language-plaintext highlighter-rouge">StringValidator</code> 接口</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="k">import</span> <span class="p">{</span> <span class="nx">Validator</span> <span class="k">as</span> <span class="nx">StringValidator</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./Validator</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">EmailValidator</span> <span class="k">implements</span> <span class="nx">StringValidator</span> <span class="p">{</span>
  <span class="nx">isValid</span><span class="p">(</span><span class="nx">s</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">emailRegex</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">[^\s</span><span class="sr">@</span><span class="se">]</span><span class="sr">+@</span><span class="se">[^\s</span><span class="sr">@</span><span class="se">]</span><span class="sr">+</span><span class="se">\.[^\s</span><span class="sr">@</span><span class="se">]</span><span class="sr">+$/</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">emailRegex</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="p">{</span> <span class="nx">EmailValidator</span> <span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面演示如何在 <code class="language-plaintext highlighter-rouge">App.ts</code> 文件中使用 <code class="language-plaintext highlighter-rouge">EmailValidator</code> 模块：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="k">import</span> <span class="p">{</span> <span class="nx">EmailValidator</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./EmailValidator</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">email</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">john.doe@typescripttutorial.net</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">validator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EmailValidator</span><span class="p">();</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">validator</span><span class="p">.</span><span class="nx">isValid</span><span class="p">(</span><span class="nx">email</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">true</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="导入类型">导入类型</h4>

<p>下面在 <code class="language-plaintext highlighter-rouge">Types.ts</code> 模块中声明了一个类型：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">export</span> <span class="kd">type</span> <span class="nx">alphanumeric</span> <span class="o">=</span> <span class="kr">string</span> <span class="o">|</span> <span class="kr">number</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>要从 <code class="language-plaintext highlighter-rouge">Types.ts</code> 模块中导入 <code class="language-plaintext highlighter-rouge">alphanumeric</code> 类型，你可以使用 <code class="language-plaintext highlighter-rouge">import type</code> 语句：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">import</span> <span class="kd">type</span> <span class="p">{</span> <span class="nx">alphanumeric</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./Types</span><span class="dl">'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>注意，TypeScript 从 3.8 版本开始支持 <code class="language-plaintext highlighter-rouge">import type</code> 语句，在 TypeScript 3.8 版本之前你需要使用 <code class="language-plaintext highlighter-rouge">import</code> 语句来代替：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">import</span> <span class="p">{</span> <span class="nx">alphanumeric</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./Types</span><span class="dl">'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="从模块中导入所有内容">从模块中导入所有内容</h4>

<p>要从模块中导入所有内容，可以使用下面的语法：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">import</span> <span class="o">*</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">module_name</span><span class="dl">'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="重新导出">重新导出</h3>

<p>下面创建了一个使用 <code class="language-plaintext highlighter-rouge">Validator.ts</code> 模块，名为 <code class="language-plaintext highlighter-rouge">ZipCodeValidator.ts</code> 的新模块：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="k">import</span> <span class="p">{</span> <span class="nx">Validator</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./Validator</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">ZipCodeValidator</span> <span class="k">implements</span> <span class="nx">Validator</span> <span class="p">{</span>
  <span class="nx">isValid</span><span class="p">(</span><span class="nx">s</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">numberRegexp</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">[</span><span class="sr">0-9</span><span class="se">]</span><span class="sr">+$/</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="nx">numberRegexp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="p">{</span> <span class="nx">ZipCodeValidator</span> <span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>你可以将 <code class="language-plaintext highlighter-rouge">EmailValidator</code> 和 <code class="language-plaintext highlighter-rouge">ZipCodeValidator</code> 模块打包到一个新的模块中，方法是使用以下语法组合导出它们所有的内容：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">export</span> <span class="o">*</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">module_name</span><span class="dl">'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面的示例演示了如何在 <code class="language-plaintext highlighter-rouge">FormValidator.ts</code> 模块中包装 <code class="language-plaintext highlighter-rouge">EmailValidator.ts</code> 和 <code class="language-plaintext highlighter-rouge">ZipCodeValidator.ts</code> 模块</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="k">export</span> <span class="o">*</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./EmailValidator</span><span class="dl">'</span><span class="p">;</span>
<span class="k">export</span> <span class="o">*</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./ZipCodeValidator</span><span class="dl">'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="默认导出">默认导出</h3>

<p>TypeScript 允许每个模块都有一个默认导出，要将导出标记为 <code class="language-plaintext highlighter-rouge">default</code> 导出，你可以使用 <code class="language-plaintext highlighter-rouge">default</code> 关键字</p>

<p>下面展示了如何将 <code class="language-plaintext highlighter-rouge">ZipCodeValidator</code> 作为默认导出：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="k">import</span> <span class="p">{</span> <span class="nx">Validator</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./Validator</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">ZipCodeValidator</span> <span class="k">implements</span> <span class="nx">Validator</span> <span class="p">{</span>
  <span class="nx">isValid</span><span class="p">(</span><span class="nx">s</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">numberRegexp</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">[</span><span class="sr">0-9</span><span class="se">]</span><span class="sr">+$/</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="nx">numberRegexp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>要导入一个默认导出，你可以使用一个不同的 <code class="language-plaintext highlighter-rouge">import</code> 语法，如下所示：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">import</span> <span class="nx">default_export</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">module_name</span><span class="dl">'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面展示了如何在 <code class="language-plaintext highlighter-rouge">App.ts</code> 文件中使用 <code class="language-plaintext highlighter-rouge">ZipCodeValidator</code> 的默认导出：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="k">import</span> <span class="nx">ZipCodeValidator</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./ZipCodeValidator</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">validator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ZipCodeValidator</span><span class="p">();</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">validator</span><span class="p">.</span><span class="nx">isValid</span><span class="p">(</span><span class="dl">'</span><span class="s1">95134</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">true</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="小结-36">小结</h3>

<ul>
  <li>TypeScript 与 ES6 module 的模块概念一致，一个模块可以同时包含声明和代码</li>
  <li>在一个模块中，变量，函数，类和接口等等都在它自己的作用域上执行，而不是全局作用域下</li>
  <li>使用 <code class="language-plaintext highlighter-rouge">export</code> 语句从模块中导出变量，函数，类，接口和类型等等</li>
  <li>使用 <code class="language-plaintext highlighter-rouge">import</code> 语句访问来自另外一个模块的导出</li>
</ul>

<h1 id="section-10-nodejs">Section 10. Node.js</h1>

<h2 id="nodejs">Node.js</h2>

<p><a href="https://www.typescripttutorial.net/typescript-tutorial/nodejs-typescript/">原文地址</a></p>

<p>在本教程中，你将学习如何搭建 Node.js 项目中的 TypeScript 自动化开发工作流</p>

<blockquote>
  <p>本教程假设你在你的系统上已经安装 Node.js 和 tsc 模块</p>
</blockquote>

<h3 id="创建项目结构">创建项目结构</h3>

<p>首先我们创建一个新的目录 <code class="language-plaintext highlighter-rouge">nodets</code>.</p>

<p>接下来，在 <code class="language-plaintext highlighter-rouge">nodets</code> 目录下面创建两个子目录，分别是 <code class="language-plaintext highlighter-rouge">build</code> 和 <code class="language-plaintext highlighter-rouge">src</code>，如下所示：</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/nodejs-typescript-directory-structure.4buzjj0j3lc0.png" alt="nodejs-typescript-directory-structure" /></p>

<p>你的 TypeScript 代码存储在 <code class="language-plaintext highlighter-rouge">src</code> 目录下</p>

<p>当 TypeScript 编译器编译了 TypeScript 源文件的时候，它会把输出文件存储在 <code class="language-plaintext highlighter-rouge">build</code> 目录中</p>

<h3 id="配置-typescript-编译器">配置 TypeScript 编译器</h3>

<p>在 macOS 和 Linux 的终端或者 Windows 上的命令提示符中，在 <code class="language-plaintext highlighter-rouge">nodets</code> 目录下运行下面的命令来创建 <code class="language-plaintext highlighter-rouge">tsconfig.json</code> 文件</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>tsc <span class="nt">--init</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>你会看到 <code class="language-plaintext highlighter-rouge">nodets</code> 目录下 <code class="language-plaintext highlighter-rouge">tsconfig.json</code> 被创建了</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/nodejs-typescript-tsconfig.json_.jn33hl2u37k.png" alt="nodejs-typescript-tsconfig.json" /></p>

<p><code class="language-plaintext highlighter-rouge">tsconfig.json</code> 文件指定目录 (<code class="language-plaintext highlighter-rouge">nodets</code>) 是 TypeScript 项目的根目录</p>

<p>当你编译 TypeScript 文件的时候，TypeScript 编译器会使用 <code class="language-plaintext highlighter-rouge">tsconfig.json</code> 中的选项来编译项目</p>

<p>现在，你可以打开 <code class="language-plaintext highlighter-rouge">tsconfig.json</code> 文件，里面有非常多的选项，在本教程中，主要关注两个选项：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">rootdir</code> – 指定 TypeScript 输入文件的根目录</li>
  <li><code class="language-plaintext highlighter-rouge">outdir</code> - 存储 JavaScript 输出文件的目录</li>
</ul>

<p>这些选项在默认情况下是被注释掉的，你需要取消它们的注释（删除行首的 <code class="language-plaintext highlighter-rouge">//</code>），并改成下面这样：</p>

<p>对于 <code class="language-plaintext highlighter-rouge">outDir</code> 选项：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="dl">"</span><span class="s2">outDir</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./build</span><span class="dl">"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>而对于 <code class="language-plaintext highlighter-rouge">rootDir</code> 选项：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="dl">"</span><span class="s2">rootDir</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./src</span><span class="dl">"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>为了验证新的配置是否正确，你可以在 <code class="language-plaintext highlighter-rouge">./src</code> 目录下创建一个名为 <code class="language-plaintext highlighter-rouge">app.ts</code> 的新文件，并敲入以下代码：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Node.js TypeScript</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/nodejs-typescript-app.ts_.6j9le5sytxs0.png" alt="nodejs-typescript-app" /></p>

<p>接下来运行下面的命令来执行 TypeScript 编译器，它会编译所有存储在 <code class="language-plaintext highlighter-rouge">src</code> 目录下的文件：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>tsc
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果配置是正确的，你将会看到 <code class="language-plaintext highlighter-rouge">./build</code> 目录下生成了 <code class="language-plaintext highlighter-rouge">app.js</code> 文件</p>

<p><img src="https://cdn.jsdelivr.net/gh/cody1991/images@master/typescript-tutorial/nodejs-typescript-app.js.4okqve6avca0.png" alt="nodejs-typescript-app" /></p>

<p>导航到 <code class="language-plaintext highlighter-rouge">build</code> 目录并执行下面的命令来运行 <code class="language-plaintext highlighter-rouge">app.js</code> 文件：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>node app.js
</pre></td></tr></tbody></table></code></pre></div></div>

<p>你会看到下面的输出：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>Node.js TypeScript
</pre></td></tr></tbody></table></code></pre></div></div>

<p>每当你修改了 TypeScript 代码的时候，你需要：</p>

<ul>
  <li>构建项目</li>
  <li>运行 JavaScript 输出文件</li>
</ul>

<p>这样很浪费时间</p>

<p>幸运的是，你可以使用一些 Node.js 模块使整个流程自动化</p>

<h3 id="安装-nodejs-模块">安装 Node.js 模块</h3>

<p><code class="language-plaintext highlighter-rouge">nodemon</code> 模块允许你在更改了 JavaScript 源代码的时候，自动重新启动应用程序</p>

<p><code class="language-plaintext highlighter-rouge">concurrently</code> 模块允许并发运行多个命令</p>

<p>首先在根目录下执行 <code class="language-plaintext highlighter-rouge">npm init</code> 命令：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>npm init <span class="nt">--yes</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>接下来，安装 <code class="language-plaintext highlighter-rouge">nodemon</code> 和 <code class="language-plaintext highlighter-rouge">concurrently</code> 模块：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">--g</span> nodemon concurrently
</pre></td></tr></tbody></table></code></pre></div></div>

<p>它需要话费一定的时间去安装，当安装完成我们可以继续下面的步骤</p>

<p>注意 <code class="language-plaintext highlighter-rouge">--g</code> 标识指示 npm 全局安装这两个模块，它允许你在其他项目中使用它们</p>

<p>接下来，打开 <code class="language-plaintext highlighter-rouge">package.json</code> 文件，你在 <code class="language-plaintext highlighter-rouge">scripts</code> 选项中会看到下面的代码：</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="err">...</span><span class="w">
</span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="s2">"echo </span><span class="se">\"</span><span class="s2">Error: no test specified</span><span class="se">\"</span><span class="s2"> &amp;&amp; exit 1"</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span><span class="err">...</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>接下来，把 <code class="language-plaintext highlighter-rouge">scripts</code> 修改成下面这样：</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="err">...</span><span class="w">
</span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"start:build"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tsc -w"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"start:run"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nodemon build/app.js"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"concurrently npm:start:*"</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span><span class="err">...</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">"start:build": "tsc -w"</code> 会监听 <code class="language-plaintext highlighter-rouge">./src</code> 下的文件变化，发生变化的时候自动重新编译它们</p>

<p><code class="language-plaintext highlighter-rouge">"start:run": "nodemon build/app.js"</code> 每当新文件产生的时候，自动运行 <code class="language-plaintext highlighter-rouge">./build</code> 目录下的 <code class="language-plaintext highlighter-rouge">app.js</code> 文件</p>

<p><code class="language-plaintext highlighter-rouge">"start": "concurrently npm:start:*"</code> 运行所有 <code class="language-plaintext highlighter-rouge">npm:start:*</code> 开头的命令，它会执行上面的 <code class="language-plaintext highlighter-rouge">start:build</code> 和 <code class="language-plaintext highlighter-rouge">start:run</code> 命令</p>

<p>因为 <code class="language-plaintext highlighter-rouge">app.js</code> 会是 Node.js 程序的入口点，你还需要把 <code class="language-plaintext highlighter-rouge">package.json</code> 文件中下面的选项修改成 <code class="language-plaintext highlighter-rouge">app.js</code></p>

<p>从：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="dl">"</span><span class="s2">main</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">index.js</span><span class="dl">"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>修改成：</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre> <span class="dl">"</span><span class="s2">main</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">app.js</span><span class="dl">"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>最后，运行下面的命令：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>npm start
</pre></td></tr></tbody></table></code></pre></div></div>

<p>为了验证配置的正确性，你可以修改一些 <code class="language-plaintext highlighter-rouge">app.ts</code> 中的代码，然后你将会在控制台看到一些输出</p>


        <hr style="visibility: hidden;" />
        <ul class="pager">
          
          <li class="previous">
            <a
              href="/Blog/2021/04/24/webpack-demo/"
              data-toggle="tooltip"
              data-placement="top"
              title="深入理解 webpack"
            >
              Previous<br />
              <span>深入理解 webpack</span>
            </a>
          </li>
           
        </ul>
        <hr style="visibility: hidden;" />

        
        <!-- disqus 评论框 start -->
        <div class="comment">
          <div id="disqus_thread" class="disqus-thread"></div>
        </div>
        <!-- disqus 评论框 end -->
         
      </div>

      <!-- Side Catalog Container -->
      
      <div
        class="col-lg-2 col-lg-offset-0 visible-lg-block sidebar-container catalog-container"
      >
        <div class="side-catalog">
          <hr class="hidden-sm hidden-xs" />
          <h5>
            <a class="catalog-toggle" href="#">CATALOG</a>
          </h5>
          <ul class="catalog-body"></ul>
        </div>
      </div>
      

      <!-- Sidebar Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"
      >
        <!-- Featured Tags -->
        


<section>
    
        <hr class="hidden-sm hidden-xs">
    
    <h5><a href="/Blog/archive/">FEATURED TAGS</a></h5>
    <div class="tags">
        
        
        
        
        
        
                <a data-sort="0074" 
                    href="/Blog/archive/?tag=Regular"
                    title="Regular"
                    rel="4">Regular</a>
        
                <a data-sort="0038" 
                    href="/Blog/archive/?tag=LeetCode"
                    title="LeetCode"
                    rel="40">LeetCode</a>
        
                <a data-sort="0068" 
                    href="/Blog/archive/?tag=Process"
                    title="Process"
                    rel="10">Process</a>
        
                <a data-sort="0071" 
                    href="/Blog/archive/?tag=browser"
                    title="browser"
                    rel="7">browser</a>
        
                <a data-sort="0076" 
                    href="/Blog/archive/?tag=JavaScript"
                    title="JavaScript"
                    rel="2">JavaScript</a>
        
                <a data-sort="0076" 
                    href="/Blog/archive/?tag=Performance"
                    title="Performance"
                    rel="2">Performance</a>
        
                <a data-sort="0076" 
                    href="/Blog/archive/?tag=V8"
                    title="V8"
                    rel="2">V8</a>
        
                <a data-sort="0076" 
                    href="/Blog/archive/?tag=Vue"
                    title="Vue"
                    rel="2">Vue</a>
        
                <a data-sort="0076" 
                    href="/Blog/archive/?tag=life"
                    title="life"
                    rel="2">life</a>
    </div>
</section>


        <!-- Friends Blog -->
        
      </div>
    </div>
  </div>
</article>

<!-- add support for mathjax by voleking-->
  
<!-- disqus 公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES * * */
  var disqus_shortname = "cody1991-blog";
  var disqus_identifier = "/2021/08/04/typescript-tutorial";
  var disqus_url = "https://cody1991.github.io/Blog/2021/08/04/typescript-tutorial/";

  (function () {
    var dsq = document.createElement("script");
    dsq.type = "text/javascript";
    dsq.async = true;
    dsq.src = "//" + disqus_shortname + ".disqus.com/embed.js";
    (
      document.getElementsByTagName("head")[0] ||
      document.getElementsByTagName("body")[0]
    ).appendChild(dsq);
  })();
</script>
<!-- disqus 公共JS代码 end -->
 
<!-- async load function -->
<script>
  function async(u, c) {
    var d = document,
      t = "script",
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener(
        "load",
        function (e) {
          c(null, e);
        },
        false
      );
    }
    s.parentNode.insertBefore(o, s);
  }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
  async(
    "//cdn.bootcdn.net/ajax/libs/anchor-js/1.1.1/anchor.min.js",
    function () {
      anchors.options = {
        visible: "hover",
        placement: "right",
        // icon: '#'
      };
      anchors
        .add()
        .remove(".intro-header h1")
        .remove(".subheading")
        .remove(".sidebar-container h5");
    }
  );
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

 <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- SNS Link -->
                


<ul class="list-inline text-center">


  
  
  <li>
    <a href="https://twitter.com/cody19910828">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a target="_blank" href="https://www.zhihu.com/people/cody1991">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa  fa-stack-1x fa-inverse">知</i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a target="_blank" href="http://weibo.com/cody1991">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a target="_blank" href="https://www.facebook.com/zexiong.tang">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a target="_blank" href="https://github.com/cody1991">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
</ul>

                <p class="copyright text-muted">
                    Copyright &copy; cody1991 2021
                    <br>
                    Powered by <a href="http://huangxuan.me">Hux Blog</a> |
                    <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="100px"
                        height="20px"
                        src="https://ghbtns.com/github-btn.html?user=huxpro&repo=huxpro.github.io&type=star&count=true">
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="//cdn.bootcdn.net/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="//cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.3.2/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/Blog/js/hux-blog.min.js "></script>

<!-- Simple Jekyll Search -->
<script src="//cdn.bootcdn.net/ajax/libs/simple-jekyll-search/1.7.12/simple-jekyll-search.min.js"></script>

<!-- Service Worker -->

<script src="/Blog/js/snackbar.js "></script>
<script src="/Blog/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
        s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->







<!--fastClick.js -->
<script>
    async("//cdn.bootcdn.net/ajax/libs/fastclick/1.0.6/fastclick.min.js", function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->



<!-- Baidu Tongji -->



<!-- Side Catalog -->

<script type="text/javascript">
    function generateCatalog(selector) {

        // interop with multilangual 
        if ('' == 'true') {
            _containerSelector = 'div.post-container.active'
        } else {
            _containerSelector = 'div.post-container'
        }

        // init
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        // clean
        $(selector).html('')

        // appending
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    // toggle side catalog
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    /*
     * Doc: https://github.com/davist11/jQuery-One-Page-Nav
     * Fork by Hux to support padding
     */
    async("//cdn.bootcdn.net/ajax/libs/jquery-one-page-nav/3.0.0/jquery.nav.min.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>



<!-- Multi-Lingual -->


<!-- Simple Jekyll Search -->
<script>
    // https://stackoverflow.com/questions/1912501/unescape-html-entities-in-javascript
    function htmlDecode(input) {
        var e = document.createElement('textarea');
        e.innerHTML = input;
        // handle case of empty input
        return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
    }

    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('search-results'),
        json: '/Blog' + '/search.json',
        searchResultTemplate: '<div class="post-preview item"><a href="{url}"><h2 class="post-title">{title}</h2><h3 class="post-subtitle">{subtitle}</h3><hr></a></div>',
        noResultsText: 'No results',
        limit: 50,
        fuzzy: false,
        // a hack to get escaped subtitle unescaped. for some reason, 
        // post.subtitle w/o escape filter nuke entire search.
        templateMiddleware: function (prop, value, template) {
            if (prop === 'subtitle' || prop === 'title') {
                if (value.indexOf("code")) {
                    return htmlDecode(value);
                } else {
                    return value;
                }
            }
        }
    });

    $(document).ready(function () {
        var $searchPage = $('.search-page');
        var $searchOpen = $('.search-icon');
        var $searchClose = $('.search-icon-close');
        var $searchInput = $('#search-input');
        var $body = $('body');

        $searchOpen.on('click', function (e) {
            e.preventDefault();
            $searchPage.toggleClass('search-active');
            var prevClasses = $body.attr('class') || '';
            setTimeout(function () {
                $body.addClass('no-scroll');
            }, 400)

            if ($searchPage.hasClass('search-active')) {
                $searchClose.on('click', function (e) {
                    e.preventDefault();
                    $searchPage.removeClass('search-active');
                    $body.attr('class', prevClasses);  // from closure 
                });
                $searchInput.focus();
            }
        });
    });
</script>

    <!-- Image to hack wechat -->
    <img
      src="/Blog/img/icon_wechat.png"
      width="0"
      height="0"
    />
    <!-- Migrate from head to bottom, no longer block render and still work -->
  </body>
</html>
